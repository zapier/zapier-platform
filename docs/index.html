<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WNQKTM5');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zapier Platform CLI Documentation</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/agate.min.css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="./docs.css">
    <style>body {
  font-family: 'Open Sans', Helvetica, arial, sans-serif;
  background-color: #fff;
  color: #5F6C72;
  font-size: 14px;
  font-weight: 400;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  position: relative; }

img {
  max-width: 100%; }

h1 {
  color: #354147;
  font-size: 28px;
  font-weight: 400;
  line-height: 1.3em;
  padding: 20px 0; }

h2 {
  color: #354147;
  font-size: 20px;
  line-height: 1.4em;
  font-weight: 600;
  padding: 1em 0; }

h3 {
  color: #354147;
  font-size: 15px;
  line-height: 1.5em;
  font-weight: 600;
  padding: 0 0 0.5em 0; }

h4 {
  color: #354147;
  font-size: 0.9em;
  letter-spacing: 1px;
  line-height: 1.2em;
  font-weight: 600;
  padding: 0 0 10px;
  text-transform: uppercase; }

a {
  color: #499DF3;
  text-decoration: none; }
  a:hover {
    text-decoration: underline; }

::-webkit-input-placeholder {
  color: #969EA2; }

:-moz-placeholder {
  color: #969EA2; }

::-moz-placeholder {
  color: #969EA2; }

:-ms-input-placeholder {
  color: #969EA2; }

p {
  line-height: 1.6em;
  margin: 0 0 15px; }

small {
  font-size: 13px; }

i, em {
  font-style: italic; }

strong {
  font-weight: 600; }

sup, sub, .sup {
  font-size: 13px;
  vertical-align: baseline;
  position: relative;
  top: -0.4em; }
  sup.small, sub.small, .sup.small {
    font-size: 10px; }

sub {
  top: 0.4em; }

pre {
  border: none;
  line-height: 20px;
  font-family: 'Consolas','Liberation Mono',Courier,monospace; }
  pre code {
    display: block;
    white-space: pre; /* no word wrap */
    padding: 10px;
    line-height: 1.7em; }

p code {
  word-break: break-all;
  display: inline; }

hr {
  color: #DADFE2;
  background: #DADFE2;
  border: 0;
  height: 1px; }

ul {
  line-height: 1.75em;
  margin: 0 0 20px; }

ol {
  line-height: 1.75em;
  list-style-type: decimal;
  list-style-position: inside;
  margin: 0 0 20px; }

blockquote {
  border-left: 3px solid #ff4a00;
  font-size: 14px;
  font-style: italic;
  line-height: 2em;
  margin: 30px 0;
  padding-left: 20px; }
  blockquote p {
    font-size: inherit;
    font-style: inherit;
    line-height: inherit; }

.docs-toc {
  height: 100%;
  width: 230px;
  position: fixed;
  padding: 40px 20px;
  overflow-y: scroll;
  overflow-x: hidden; }
  .docs-toc ul {
    margin: 0; 
    padding: 0 0 0 10px; }

.generated-by {
  font-size: 12px;
  color: #969EA2; }

.docs-main {}

.docs-code {
  /* see media queries */ }
  .docs-code pre {
    background: #354147;
    color: #ffffff;
    line-height: 20px;
    font-family: 'Consolas','Liberation Mono',Courier,monospace; }
    .docs-code pre code {
      display: block;
      padding: 10px;
      line-height: 1.7em; }

a code {
  color: #499DF3;
  background-color: #f2f4f9; }

/* targets bootstraps md width */

@media (min-width: 992px) {
  .row-height {
    display: table;
    table-layout: fixed;
    height: 100%;
    width: 100%; }
  .col-height {
    display: table-cell;
    float: none;
    height: 100%; }

  .docs-main {
    margin-left: 230px; }

  .docs-code {
    background: #5F6C72;
    color: #ffffff; }
}

@media (max-width: 992px) {
  .docs-toc {
    display: none; }
  .is-empty {
    display: none; }
}
</style>
  </head>
  <body>
    <!-- Header -->
    <div class="docs-header">
      <div class="docs-header__main">
        <div class="docs-header__container">
          <a class="docs-header__logo" href="https://zapier.com"></a>
          <div class="docs-header__links">
            <a href="https://zapier.com/app/explore">Explore</a>
            <a href="https://zapier.com/zapbook/">App Directory</a>
            <a href="https://zapier.com/pricing">Pricing</a>
            <a href="https://zapier.com/app/login">Login</a>
            <a href="https://zapier.com/sign-up/" class="docs-header__sign-up">Sign Up</a>
          </div>
        </div>
      </div>
      <div class="docs-header__platform">
        <div class="docs-header__container">
          <h2 class="docs-header__platform-title">Developer Platform</h2>
          <div class="docs-header__links">
            <a href="https://zapier.com/developer/builder">Your Apps</a>
            <a href="https://zapier.com/developer/shared-zaps">Zap Templates</a>
            <a href="https://zapier.com/developer/documentation">Documentation</a>
          </div>
        </div>
      </div>
    </div>
    <!-- End Header -->

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNQKTM5"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="docs-toc">
      <ul>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#what-is-an-app">What is an App?</a></li>
<li><a href="#how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</a></li>
<li><a href="#zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#quick-setup-guide">Quick Setup Guide</a></li>
<li><a href="#tutorial">Tutorial</a></li>
</ul>
</li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth1">OAuth1</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a><ul>
<li><a href="#return-types">Return Types</a></li>
</ul>
</li>
<li><a href="#input-fields">Input Fields</a><ul>
<li><a href="#customdynamic-fields">Custom/Dynamic Fields</a></li>
<li><a href="#dynamic-dropdowns">Dynamic Dropdowns</a></li>
<li><a href="#search-powered-fields">Search-Powered Fields</a></li>
<li><a href="#computed-fields">Computed Fields</a></li>
<li><a href="#nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#output-fields">Output Fields</a><ul>
<li><a href="#nested--children-line-item-fields-1">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsole"><code>z.console</code></a></li>
<li><a href="#zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></a></li>
<li><a href="#zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
<li><a href="#zcursor"><code>z.cursor</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
<li><a href="#bundlerawrequest"><code>bundle.rawRequest</code></a></li>
<li><a href="#bundlecleanedrequest"><code>bundle.cleanedRequest</code></a></li>
<li><a href="#bundletargeturl"><code>bundle.targetUrl</code></a></li>
<li><a href="#bundlesubscribedata"><code>bundle.subscribeData</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a><ul>
<li><a href="#file-dehydration">File Dehydration</a></li>
</ul>
</li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#viewing-bundle-logs">Viewing Bundle Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#error-handling">Error Handling</a><ul>
<li><a href="#general-errors">General Errors</a></li>
<li><a href="#halting-execution">Halting Execution</a></li>
<li><a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#mocking-requests">Mocking Requests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
<li><a href="#testing-in-your-ci">Testing in Your CI</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#building-native-packages-with-docker">Building Native Packages with Docker</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#example-apps">Example Apps</a></li>
<li><a href="#faqs">FAQs</a><ul>
<li><a href="#why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&#39;t Zapier support newer versions of Node.js?</a></li>
<li><a href="#how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</a></li>
<li><a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a></li>
<li><a href="#does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</a></li>
<li><a href="#is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</a></li>
<li><a href="#how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</a></li>
<li><a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&#39;s the deal with pagination? When is it used and how does it work?</a></li>
<li><a href="#how-does-deduplication-work">How does deduplication work?</a></li>
<li><a href="#why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&#39;t provide an explicit <code>id</code> field?</a></li>
<li><a href="#node-6-no-longer-supported">Node 6 No Longer Supported</a></li>
<li><a href="#what-analytics-are-collected">What Analytics are Collected?</a></li>
<li><a href="#whats-the-difference-between-an-app-and-an-integration">What&#39;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</a></li>
</ul>
</li>
<li><a href="#command-line-tab-completion">Command Line Tab Completion</a><ul>
<li><a href="#zsh-completion-script">Zsh Completion Script</a></li>
<li><a href="#bash-completion-script">Bash Completion Script</a></li>
</ul>
</li>
<li><a href="#the-zapier-platform-packages">The Zapier Platform Packages</a><ul>
<li><a href="#updating">Updating</a></li>
</ul>
</li>
<li><a href="#development-of-the-cli">Development of the CLI</a><ul>
<li><a href="#commands">Commands</a></li>
<li><a href="#publishing-of-the-cli-after-merging">Publishing of the CLI (after merging)</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
</ul>

      <hr />
      <small><a class="generated-by" href="https://github.com/zapier/litdoc">generated by litdoc</a></small>
    </div>

    <div class="docs-main container-fluid">
      <div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h1 align="center">
  <a href="https://zapier.com"><img src="https://raw.githubusercontent.com/zapier/zapier-platform/master/packages/cli/goodies/zapier-logomark.png" alt="Zapier" width="200"></a>
  <br>
  Zapier Platform CLI
  <br>
  <br>
</h1>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p align="center">
  <!-- this isn't live yet? or won't be until I push -->
  <!-- <a href="https://travis-ci.org/zapier/zapier-platform-cli"><img src="https://img.shields.io/travis/zapier/zapier-platform-cli/master.svg" alt="Travis"></a> -->
  <a href="https://www.npmjs.com/package/zapier-platform-cli"><img src="https://img.shields.io/npm/v/zapier-platform-cli.svg" alt="npm version"></a>
  <!--possible downloads badge too, once that's good-->
</p><p>Zapier is a platform for creating integrations and workflows. This CLI is your gateway to creating custom applications on the Zapier platform.</p><p><a href="https://zapier.github.io/zapier-platform/">These docs are available here</a>, the <a href="https://zapier.github.io/zapier-platform/cli">CLI docs are available here</a>, and you can <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md">view all the schema definitions here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="table-of-contents">Table of Contents</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#what-is-an-app">What is an App?</a></li>
<li><a href="#how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</a></li>
<li><a href="#zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#quick-setup-guide">Quick Setup Guide</a></li>
<li><a href="#tutorial">Tutorial</a></li>
</ul>
</li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth1">OAuth1</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a><ul>
<li><a href="#return-types">Return Types</a></li>
</ul>
</li>
<li><a href="#input-fields">Input Fields</a><ul>
<li><a href="#customdynamic-fields">Custom/Dynamic Fields</a></li>
<li><a href="#dynamic-dropdowns">Dynamic Dropdowns</a></li>
<li><a href="#search-powered-fields">Search-Powered Fields</a></li>
<li><a href="#computed-fields">Computed Fields</a></li>
<li><a href="#nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#output-fields">Output Fields</a><ul>
<li><a href="#nested--children-line-item-fields-1">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsole"><code>z.console</code></a></li>
<li><a href="#zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></a></li>
<li><a href="#zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
<li><a href="#zcursor"><code>z.cursor</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
<li><a href="#bundlerawrequest"><code>bundle.rawRequest</code></a></li>
<li><a href="#bundlecleanedrequest"><code>bundle.cleanedRequest</code></a></li>
<li><a href="#bundletargeturl"><code>bundle.targetUrl</code></a></li>
<li><a href="#bundlesubscribedata"><code>bundle.subscribeData</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a><ul>
<li><a href="#file-dehydration">File Dehydration</a></li>
</ul>
</li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#viewing-bundle-logs">Viewing Bundle Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#error-handling">Error Handling</a><ul>
<li><a href="#general-errors">General Errors</a></li>
<li><a href="#halting-execution">Halting Execution</a></li>
<li><a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#mocking-requests">Mocking Requests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
<li><a href="#testing-in-your-ci">Testing in Your CI</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#building-native-packages-with-docker">Building Native Packages with Docker</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#example-apps">Example Apps</a></li>
<li><a href="#faqs">FAQs</a><ul>
<li><a href="#why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&apos;t Zapier support newer versions of Node.js?</a></li>
<li><a href="#how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</a></li>
<li><a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a></li>
<li><a href="#does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</a></li>
<li><a href="#is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</a></li>
<li><a href="#how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</a></li>
<li><a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&apos;s the deal with pagination? When is it used and how does it work?</a></li>
<li><a href="#how-does-deduplication-work">How does deduplication work?</a></li>
<li><a href="#why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&apos;t provide an explicit <code>id</code> field?</a></li>
<li><a href="#node-6-no-longer-supported">Node 6 No Longer Supported</a></li>
<li><a href="#what-analytics-are-collected">What Analytics are Collected?</a></li>
<li><a href="#whats-the-difference-between-an-app-and-an-integration">What&apos;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</a></li>
</ul>
</li>
<li><a href="#command-line-tab-completion">Command Line Tab Completion</a><ul>
<li><a href="#zsh-completion-script">Zsh Completion Script</a></li>
<li><a href="#bash-completion-script">Bash Completion Script</a></li>
</ul>
</li>
<li><a href="#the-zapier-platform-packages">The Zapier Platform Packages</a><ul>
<li><a href="#updating">Updating</a></li>
</ul>
</li>
<li><a href="#development-of-the-cli">Development of the CLI</a><ul>
<li><a href="#commands">Commands</a></li>
<li><a href="#publishing-of-the-cli-after-merging">Publishing of the CLI (after merging)</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="getting-started">Getting Started</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>If you&apos;re new to Zapier Platform CLI, we strongly recommend you to walk through the <a href="https://zapier.com/developer/start">Tutorial</a> for a more thorough introduction.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="what-is-an-app">What is an App?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: this document uses &quot;app&quot; while modern Zapier nomenclature refers instead to &quot;integrations&quot;. In both cases, the phrase refers to your code that connects your API with Zapier.</p>
</blockquote><p>A CLI App is an implementation of your app&apos;s API. You build a Node.js application
that exports a single object (<a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#appschema">JSON Schema</a>) and upload it to Zapier.
Zapier introspects that definition to find out what your app is capable of and
what options to present end users in the Zap Editor.</p><p>For those not familiar with Zapier terminology, here is how concepts in the CLI
map to the end user experience:</p><ul>
<li><a href="#authentication">Authentication</a>, (usually) which lets us know what credentials to ask users
for. This is used during the &quot;Connect Accounts&quot; section of the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Triggers</a>, which read data <em>from</em> your API. These have their own section in the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Creates</a>, which send data <em>to</em> your API to create new records. These are listed under &quot;Actions&quot; in the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Searches</a>, which find specific records <em>in</em> your system. These are also listed under &quot;Actions&quot; in the Zap Editor.</li>
<li><a href="#resources">Resources</a>, which define an object type in your API (say a contact) and the operations available to perform on it. These are automatically extracted into Triggers, Searches, and Creates.</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier takes the App you upload and sends it over to Amazon Web Service&apos;s Lambda.
We then make calls to execute the operations your App defines as we execute Zaps.
Your App takes the input data we provide (if any), makes the necessary HTTP calls,
and returns the relevant data, which gets fed back into Zapier.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier Platform includes two ways to build integrations: a CLI to build integrations in your local development environment and deploy them from the command line, and a UI to create integrations with a visual builder from your browser. Both use the same Zapier platform, so pick the one that fits your team&apos;s needs best, as the difference is in how you develop the integration.</p><p>Zapier Platform CLI is designed to be used by development teams who collaborate with version control and CI, and can be used to build more advanced integrations with custom coding for every part of your API calls and response parsing.</p><p><a href="https://zapier.com/app/developer/">Zapier Platform UI</a> is designed to quickly spin up new integrations, and collaborate on them with teams that include non-developers. It&apos;s the quickest way to start using the Zapier platform&#x2014;and you can manage your CLI apps&apos; core details from its online UI as well. Coming soon, you will be able to convert Zapier Platform UI integrations to CLI to start development in your browser then finish out the core features in your local development environment.</p><p><em>&#x2192; Learn more in our <a href="https://platform.zapier.com/docs/vs">Zapier Platform UI vs CLI</a> post.</em></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="requirements">Requirements</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>All Zapier CLI apps are run using Node.js <code>v8.10.0</code>.</p><p>You can develop using any version of Node you&apos;d like, but your eventual code must be compatible with <code>v8.10.0</code>. If you&apos;re using features not yet available in <code>v8.10.0</code>, you can transpile your code to a compatible format with <a href="https://babeljs.io/">Babel</a> (or similar).</p><p>To ensure stability for our users, we strongly encourage you run tests on <code>v8.10.0</code> sometime before your code reaches users. This can be done multiple ways.</p><p>Firstly, by using a CI tool (like <a href="https://travis-ci.org/">Travis CI</a> or <a href="https://circleci.com/">Circle CI</a>, which are free for open source projects). We provide a sample <a href="https://github.com/zapier/zapier-platform/blob/master/example-apps/minimal/.travis.yml">.travis.yml</a> file in our template apps to get you started.</p><p>Alternatively, you can change your local node version with tools such as <a href="https://github.com/nvm-sh/nvm#installation-and-update">nvm</a> or <a href="https://github.com/tj/n#installation">n</a>.
Then you can either swap to that version with <code>nvm use v8.10.0</code>, or do <code>nvm exec v8.10.0 zapier test</code> so you can run tests without having to switch versions while developing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="quick-setup-guide">Quick Setup Guide</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>First up is installing the CLI and setting up your auth to create a working &quot;Zapier Example&quot; application. It will be private to you and visible in your live <a href="https://zapier.com/app/editor">Zap Editor</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># install the CLI globally</span>
npm install -g zapier-platform-cli

<span class="hljs-comment"># setup auth to Zapier&apos;s platform with a deploy key</span>
zapier login
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your Zapier CLI should be installed and ready to go at this point. Next up, we&apos;ll create our first app!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># create a directory with the minimum required files</span>
zapier init example-app

<span class="hljs-comment"># move into the new directory</span>
<span class="hljs-built_in">cd</span> example-app

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: there are plenty of templates &amp; example apps to choose from! <a href="#example-apps">View all Example Apps here.</a>.</p>
</blockquote><p>You should now have a working local app. You can run several local commands to try it out.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># run the local tests</span>
<span class="hljs-comment"># the same as npm test, but adds some extra things to the environment</span>
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next, you&apos;ll probably want to upload app to Zapier itself so you can start testing live.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app to Zapier</span>
zapier push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Go check out our <a href="https://zapier.github.io/zapier-platform/cli">full CLI reference documentation</a> to see all the other commands!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="tutorial">Tutorial</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For a full tutorial, head over to our <a href="https://zapier.com/developer/start">Tutorial</a> for a comprehensive walkthrough for creating your first app. If this isn&apos;t your first rodeo, read on!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="creating-a-local-app">Creating a Local App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: check the <a href="#quick-setup-guide">Quick Setup</a> if this is your first time using the platform!</p>
</blockquote><p>Creating an App can be done entirely locally and they are fairly simple Node.js apps using the standard Node environment and should be completely testable. However, a local app stays local until you <code>zapier register</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># make your folder</span>
mkdir zapier-example
<span class="hljs-built_in">cd</span> zapier-example

<span class="hljs-comment"># create the needed files from a template</span>
zapier init . --template=trigger

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>local App</strong>, use these commands:</p><ul>
<li><code>zapier init . --template=resource</code> - initialize/start a local app project (<a href="https://github.com/zapier/zapier-platform/wiki/Example-Apps">see templates here</a>)</li>
<li><code>zapier convert 1234 .</code> - initialize/start from an existing app (alpha)</li>
<li><code>zapier scaffold resource Contact</code> - auto-injects a new resource, trigger, etc.</li>
<li><code>zapier test</code> - run the same tests as <code>npm test</code></li>
<li><code>zapier validate</code> - ensure your app is valid</li>
<li><code>zapier describe</code> - print some helpful information about your app</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-project-structure">Local Project Structure</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In your app&apos;s folder, you should see this general recommended structure. The <code>index.js</code> is Zapier&apos;s entry point to your app. Zapier expects you to export an <code>App</code> definition there.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-plain">$ tree .
.
&#x251C;&#x2500;&#x2500; README.md
&#x251C;&#x2500;&#x2500; index.js
&#x251C;&#x2500;&#x2500; package.json
&#x251C;&#x2500;&#x2500; triggers
&#x2502;   &#x2514;&#x2500;&#x2500; contact-by-tag.js
&#x251C;&#x2500;&#x2500; resources
&#x2502;   &#x2514;&#x2500;&#x2500; Contact.js
&#x251C;&#x2500;&#x2500; test
&#x2502;   &#x251C;&#x2500;&#x2500; basic.js
&#x2502;   &#x251C;&#x2500;&#x2500; triggers.js
&#x2502;   &#x2514;&#x2500;&#x2500; resources.js
&#x251C;&#x2500;&#x2500; build
&#x2502;   &#x2514;&#x2500;&#x2500; build.zip
&#x2514;&#x2500;&#x2500; node_modules
    &#x251C;&#x2500;&#x2500; ...
    &#x2514;&#x2500;&#x2500; ...
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-app-definition">Local App Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The core definition of your <code>App</code> will look something like this, and is what your <code>index.js</code> should provide as the <em>only</em> export:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// both version strings are required</span>
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// see &quot;Authentication&quot; section below</span>
  <span class="hljs-attr">authentication</span>: {},

  <span class="hljs-comment">// see &quot;Dehydration&quot; section below</span>
  <span class="hljs-attr">hydrators</span>: {},

  <span class="hljs-comment">// see &quot;Making HTTP Requests&quot; section below</span>
  <span class="hljs-attr">requestTemplate</span>: {},
  <span class="hljs-attr">beforeRequest</span>: [],
  <span class="hljs-attr">afterResponse</span>: [],

  <span class="hljs-comment">// See &quot;Resources&quot; section below</span>
  <span class="hljs-attr">resources</span>: {},

  <span class="hljs-comment">// See &quot;Triggers/Searches/Creates&quot; section below</span>
  <span class="hljs-attr">triggers</span>: {},
  <span class="hljs-attr">searches</span>: {},
  <span class="hljs-attr">creates</span>: {}
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: you can use higher order functions to create any part of your App definition!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="registering-an-app">Registering an App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Registering your App with Zapier is a necessary first step which only enables basic administrative functions. It should happen before <code>zapier push</code> which is to used to actually expose an App Version in the Zapier interface and editor.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># register your app</span>
zapier register <span class="hljs-string">&quot;Zapier Example&quot;</span>

<span class="hljs-comment"># list your apps</span>
zapier apps
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: this doesn&apos;t put your app in the editor - see the docs on pushing an App Version to do that!</p>
</blockquote><p>If you&apos;d like to manage your <strong>App</strong>, use these commands:</p><ul>
<li><code>zapier apps</code> - list the apps in Zapier you can administer</li>
<li><code>zapier register &quot;Name&quot;</code> - creates a new app in Zapier</li>
<li><code>zapier link</code> - lists and links a selected app in Zapier to your current folder</li>
<li><code>zapier history</code> - print the history of your app</li>
<li><code>zapier collaborate [user@example.com]</code> - add admins to your app who can push</li>
<li><code>zapier invite [user@example.com] [1.0.0]</code> - add users to try your app version 1.0.0 before promotion</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="deploying-an-app-version">Deploying an App Version</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>An App Version is related to a specific App but is an &quot;immutable&quot; implementation of your app. This makes it easy to run multiple versions for multiple users concurrently. The App Version is pulled from the version within the <code>package.json</code>. To create a new App Version, update the version number in that file. By default, <strong>every App Version is private</strong> but you can <code>zapier promote</code> it to production for use by over 1 million Zapier users.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app version to Zapier</span>
zapier push

<span class="hljs-comment"># list your versions</span>
zapier versions
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>Version</strong>, use these commands:</p><ul>
<li><code>zapier versions</code> - list the versions for the current directory&apos;s app</li>
<li><code>zapier push</code> - push the current version of current directory&apos;s app &amp; version (read from <code>package.json</code>)</li>
<li><code>zapier promote [1.0.0]</code> - mark a version as the &quot;production&quot; version</li>
<li><code>zapier migrate [1.0.0] [1.0.1] [100%]</code> - move users between versions, regardless of deployment status</li>
<li><code>zapier deprecate [1.0.0] [YYYY-MM-DD]</code> - mark a version as deprecated, but let users continue to use it (we&apos;ll email them)</li>
<li><code>zapier env 1.0.0 [KEY] [value]</code> - set an environment variable to some value</li>
<li><code>zapier delete version [1.0.0]</code> - delete a version entirely. This is mostly for clearing out old test apps you used personally. It will fail if there are any users. You probably want <code>deprecate</code> instead.</li>
</ul><blockquote>
<p>Note: To see the changes that were just pushed reflected in the browser, you have to manually refresh the browser each time you push.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="private-app-version-default">Private App Version (default)</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A simple <code>zapier push</code> will only create the App Version in your editor. No one else using Zapier can see it or use it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="sharing-an-app-version">Sharing an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is how you would share your app with friends, co-workers or clients. This is perfect for quality assurance, testing with active users or just sharing any app you like.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># sends an email this user to let them view the app version 1.0.0 in the UI privately</span>
zapier invite user@example.com 1.0.0

<span class="hljs-comment"># sends an email this user to let them admin the app (make changes just like you)</span>
zapier collaborate user@example.com
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can also invite anyone on the internet to your app by observing the URL at the bottom of <code>zapier invite</code>, it should look something like <code>https://zapier.com/platform/public-invite/1/222dcd03aed943a8676dc80e2427a40d/</code>. You can put this in your help docs, post it to Twitter, add it to your email campaign, etc. Note this will invite users to every app version.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="promoting-an-app-version">Promoting an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Promotion is how you would share your app with every one of the 1 million+ Zapier users. If this is your first time promoting - you may have to wait for the Zapier team to review and approve your app.</p><p>If this isn&apos;t the first time you&apos;ve promoted your app - you might have users on older versions. You can <code>zapier migrate</code> to either move users over (which can be dangerous if you have breaking changes). Or, you can <code>zapier deprecate</code> to give users some time to move over themselves.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># promote your app version to all Zapier users</span>
zapier promote 1.0.1

<span class="hljs-comment"># OPTIONAL - migrate your users between one app version to another</span>
zapier migrate 1.0.0 1.0.1

<span class="hljs-comment"># OR - mark the old version as deprecated</span>
zapier deprecate 1.0.0 2017-01-01
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="converting-an-existing-app">Converting an Existing App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you have an existing Zapier <a href="https://zapier.com/developer/builder/">legacy Web Builder app</a>, you can use it as a template to kickstart your local application.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Convert an existing Web Builder app to a CLI app in the my-app directory</span>
<span class="hljs-comment"># App ID 1234 is from URL https://zapier.com/developer/builder/app/1234/development</span>
zapier convert 1234 my-app
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your CLI app will be created and you can continue working on it.</p><blockquote>
<p>Note - there is no way to convert a CLI app to a Web Builder app and we do not plan on implementing this.</p>
</blockquote><p>Introduced in <code>v8.2.0</code>, you are able to convert new integrations built in Zapier Platform UI to CLI.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-sh"><span class="hljs-comment"># the --version flag is what denotes this command is interacting with a Visual Builder app</span>
<span class="hljs-comment"># zapier convert &lt;APP_ID&gt; &lt;PATH&gt; --version=&lt;APP_VERSION&gt;</span>
zapier convert 1234 my-app 1.0.1
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="authentication">Authentication</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most applications require some sort of authentication - and Zapier provides a handful of methods for helping your users authenticate with your application. Zapier will provide some of the core behaviors, but you&apos;ll likely need to handle the rest.</p><blockquote>
<p>Hint: You can access the data tied to your authentication via the <code>bundle.authData</code> property in any method called in your app. Exceptions exist in OAuth and Session auth. Please see them below.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="basic">Basic</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Useful if your app requires two pieces of information to authentication: <code>username</code> and <code>password</code> which only the end user can provide. By default, Zapier will do the standard Basic authentication base64 header encoding for you (via an automatically registered middleware).</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/basic-auth">https://github.com/zapier/zapier-platform/tree/master/example-apps/basic-auth</a> for a working example app for basic auth.</p>
</blockquote><blockquote>
<p>Note: if you do the common API Key pattern like <code>Authorization: Basic APIKEYHERE:x</code> you should look at the &quot;Custom&quot; authentication method instead.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;basic&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">connectionLabel</span>: <span class="hljs-string">&apos;{{bundle.authData.username}}&apos;</span> <span class="hljs-comment">// Can also be a function, check digest auth below for an example</span>
  <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="digest">Digest</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>New in v7.4.0.</em></p><p>The setup and user experience of Digest Auth is identical to Basic Auth. Users will provide Zapier their username and password and Zapier will handle all the nonce and quality of protection details automatically.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/digest-auth">https://github.com/zapier/zapier-platform/tree/master/example-apps/digest-auth</a> for a working example app for digest auth.</p>
</blockquote><blockquote>
<p>Limitation: Currently, MD5-sess and SHA are not implemented. Only the MD5 algorithm is supported. In addition, server nonces are not reused. That means for every <code>z.request</code> call, Zapier will sends an additional request beforehand to get the server nonce.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;digest&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">connectionLabel</span>: <span class="hljs-string">&apos;{{bundle.authData.username}}&apos;</span> <span class="hljs-comment">// Can also be a function, check digest auth below for an example</span>
  <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="custom">Custom</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is what most &quot;API Key&quot; driven apps should default to using. You&apos;ll likely provide some custom <code>beforeRequest</code> middleware or a <code>requestTemplate</code> to complete the authentication by adding/computing needed headers.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/custom-auth">https://github.com/zapier/zapier-platform/tree/master/example-apps/custom-auth</a> for a working example app for custom auth.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;custom&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>:
      <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">fields</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found in your browsers address bar after logging in.&apos;</span>
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;api_key&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found on your settings page.&apos;</span>
    }
  ]
};

<span class="hljs-keyword">const</span> addApiKeyToHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;X-Subdomain&apos;</span>] = bundle.authData.subdomain;
  <span class="hljs-keyword">const</span> basicHash = Buffer.from(<span class="hljs-string">`<span class="hljs-subst">${bundle.authData.api_key}</span>:x`</span>).toString(
    <span class="hljs-string">&apos;base64&apos;</span>
  );
  request.headers.Authorization = <span class="hljs-string">`Basic <span class="hljs-subst">${basicHash}</span>`</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication,
  <span class="hljs-attr">beforeRequest</span>: [addApiKeyToHeader]
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="session">Session</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Probably the most &quot;powerful&quot; mechanism for authentication - it gives you the ability to exchange some user provided data for some authentication data (IE: username &amp; password for a session key).</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/session-auth">https://github.com/zapier/zapier-platform/tree/master/example-apps/session-auth</a> for a working example app for session auth.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> getSessionKey = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> promise = z.request({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/login.json&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-attr">username</span>: bundle.authData.username,
      <span class="hljs-attr">password</span>: bundle.authData.password
    }
  });

  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;The username/password you supplied is invalid&apos;</span>);
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">sessionKey</span>: z.JSON.parse(response.content).sessionKey
    };
  });
};

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;session&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">fields</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;username&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login username.&apos;</span>
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;password&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login password.&apos;</span>
    }
    <span class="hljs-comment">// For Session Auth we store `sessionKey` automatically in `bundle.authData`</span>
    <span class="hljs-comment">// for future use. If you need to save/use something that the user shouldn&apos;t</span>
    <span class="hljs-comment">// need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;something&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in sessionConfig.perform</span>
  ],
  <span class="hljs-attr">sessionConfig</span>: {
    <span class="hljs-attr">perform</span>: getSessionKey
  }
};

<span class="hljs-keyword">const</span> includeSessionKeyHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData.sessionKey) {
    request.headers = request.headers || {};
    request.headers[<span class="hljs-string">&apos;X-Session-Key&apos;</span>] = bundle.authData.sessionKey;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> sessionRefreshIf401 = <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData.sessionKey) {
    <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.RefreshAuthError(); <span class="hljs-comment">// ask for a refresh &amp; retry</span>
    }
  }
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication,
  <span class="hljs-attr">beforeRequest</span>: [includeSessionKeyHeader],
  <span class="hljs-attr">afterResponse</span>: [sessionRefreshIf401]
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note - For Session auth, <code>authentication.sessionConfig.perform</code> will have the provided fields in <code>bundle.inputData</code> instead of <code>bundle.authData</code> because <code>bundle.authData</code> will only have &quot;previously existing&quot; values, which will be empty the first time the Zap runs.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth1">OAuth1</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>New in <code>v7.5.0</code>.</em></p><p>Zapier&apos;s OAuth1 implementation matches <a href="https://developer.twitter.com/en/docs/basics/authentication/overview">Twitter&apos;s</a> and <a href="https://developers.trello.com/page/authorization">Trello&apos;s</a> implementation of the 3-legged OAuth flow.</p><blockquote>
<p>Example Apps: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/oauth1-trello">oauth1-trello</a>, <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/oauth1-tumblr">oauth1-tumblr</a>, and <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/oauth1-twitter">oauth1-twitter</a> for working example apps with OAuth1.</p>
</blockquote><p>The flow works like this:</p><ol>
<li>Zapier makes a call to your API requesting a &quot;request token&quot; (also known as &quot;temporary credentials&quot;)</li>
<li>Zapier sends the user to the authorization URL, defined by your app, along with the request token</li>
<li>Once authorized, your website sends the user to the <code>redirect_uri</code> Zapier provided. Use <code>zapier describe</code> command to find out what it is: <img src="https://zappy.zapier.com/117ECB35-5CCA-4C98-B74A-35F1AD9A3337.png" alt></li>
<li>Zapier makes a call on our backend to your API to exchange the request token for an &quot;access token&quot; (also known as &quot;long-lived credentials&quot;)</li>
<li>Zapier remembers the access token and makes calls on behalf of the user</li>
</ol><p>You are required to define:</p><ul>
<li><code>getRequestToken</code>: The API call to fetch the request token</li>
<li><code>authorizeUrl</code>: The authorization URL</li>
<li><code>getAccessToken</code>: The API call to fetch the access token</li>
</ul><p>You&apos;ll also likely need to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables. These are the consumer key and secret in OAuth1 terminology.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env 1.0.0 CLIENT_ID 1234
$ zapier env 1.0.0 CLIENT_SECRET abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them in .env or in the command!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;lodash&apos;</span>);

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth1&apos;</span>,
  <span class="hljs-attr">oauth1Config</span>: {
    <span class="hljs-attr">getRequestToken</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/request-token&apos;</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">oauth_consumer_key</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">oauth_consumer_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,

        <span class="hljs-comment">// &apos;HMAC-SHA1&apos; is used by default if not specified.</span>
        <span class="hljs-comment">// &apos;HMAC-SHA256&apos;, &apos;RSA-SHA1&apos;, &apos;PLAINTEXT&apos; are also supported.</span>
        <span class="hljs-attr">oauth_signature_method</span>: <span class="hljs-string">&apos;HMAC-SHA1&apos;</span>,
        <span class="hljs-attr">oauth_callback</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>
      }
    },
    <span class="hljs-attr">authorizeUrl</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">oauth_token</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token}}&apos;</span>
      }
    },
    <span class="hljs-attr">getAccessToken</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/access-token&apos;</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">oauth_consumer_key</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">oauth_consumer_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">oauth_token</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token}}&apos;</span>,
        <span class="hljs-attr">oauth_token_secret</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token_secret}}&apos;</span>,
        <span class="hljs-attr">oauth_verifier</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_verifier}}&apos;</span>
      }
    }
  },
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/me&apos;</span>
  },
  <span class="hljs-comment">// If you need any fields upfront, put them here</span>
  <span class="hljs-attr">fields</span>: [
    { <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;app&apos;</span> }
    <span class="hljs-comment">// For OAuth1 we store `oauth_token` and `oauth_token_secret` automatically</span>
    <span class="hljs-comment">// in `bundle.authData` for future use. If you need to save/use something</span>
    <span class="hljs-comment">// that the user shouldn&apos;t need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;user_id&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in oauth1Config.getAccessToken</span>
  ]
};

<span class="hljs-comment">// A middleware that is run before z.request() actually makes the request. Here we&apos;re</span>
<span class="hljs-comment">// adding necessary OAuth1 parameters to `auth` property of the request object.</span>
<span class="hljs-keyword">const</span> includeAccessToken = <span class="hljs-function">(<span class="hljs-params">req, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (
    bundle.authData &amp;&amp;
    bundle.authData.oauth_token &amp;&amp;
    bundle.authData.oauth_token_secret
  ) {
    <span class="hljs-comment">// Just put your OAuth1 credentials in req.auth, Zapier will sign the request for</span>
    <span class="hljs-comment">// you.</span>
    req.auth = req.auth || {};
    _.defaults(req.auth, {
      <span class="hljs-attr">oauth_consumer_key</span>: process.env.CLIENT_ID,
      <span class="hljs-attr">oauth_consumer_secret</span>: process.env.CLIENT_SECRET,
      <span class="hljs-attr">oauth_token</span>: bundle.authData.oauth_token,
      <span class="hljs-attr">oauth_token_secret</span>: bundle.authData.oauth_token_secret
    });
  }
  <span class="hljs-keyword">return</span> req;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication,
  <span class="hljs-attr">beforeRequest</span>: [includeAccessToken]
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note - For OAuth1, <code>authentication.oauth1Config.getRequestToken</code>, <code>authentication.oauth1Config.authorizeUrl</code>, and <code>authentication.oauth1Config.getAccessToken</code> will have the provided fields in <code>bundle.inputData</code> instead of <code>bundle.authData</code> because <code>bundle.authData</code> will only have &quot;previously existing&quot; values, which will be empty when the user hasn&apos;t connected their account on your service to Zapier. Also note that <code>authentication.oauth1Config.getAccessToken</code> has access to the users return values in <code>rawRequest</code> and <code>cleanedRequest</code> should you need to extract other values (for example from the query string).</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2">OAuth2</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier&apos;s OAuth2 implementation is based on the <code>authorization_code</code> flow, similar to <a href="https://developer.github.com/v3/oauth/">GitHub</a> and <a href="https://developers.facebook.com/docs/authentication/server-side/">Facebook</a>.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/oauth2">https://github.com/zapier/zapier-platform/tree/master/example-apps/oauth2</a> for a working example app for OAuth2.</p>
</blockquote><p>It looks like this:</p><ol>
<li>Zapier sends the user to the authorization URL defined by your app</li>
<li>Once authorized, your website sends the user to the <code>redirect_uri</code> Zapier provided. Use <code>zapier describe</code> command to find out what it is: <img src="https://zappy.zapier.com/83E12494-0A03-4DB4-AA46-5A2AF6A9ECCC.png" alt></li>
<li>Zapier makes a call on our backend to your API to exchange the <code>code</code> for an <code>access_token</code></li>
<li>Zapier remembers the <code>access_token</code> and makes calls on behalf of the user</li>
<li>(Optionally) Zapier can refresh the token if it expires</li>
</ol><p>You are required to define the authorization URL and the API call to fetch the access token. You&apos;ll also likely want to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env 1.0.0 CLIENT_ID 1234
$ zapier env 1.0.0 CLIENT_SECRET abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them in .env or in the command!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth2&apos;</span>,
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>:
      <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-comment">// you can provide additional fields for inclusion in authData</span>
  <span class="hljs-attr">oauth2Config</span>: {
    <span class="hljs-comment">// &quot;authorizeUrl&quot; could also be a function returning a string url</span>
    <span class="hljs-attr">authorizeUrl</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
      <span class="hljs-attr">url</span>:
        <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/oauth2/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-string">&apos;{{bundle.inputData.state}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">response_type</span>: <span class="hljs-string">&apos;code&apos;</span>
      }
    },
    <span class="hljs-comment">// Zapier expects a response providing {access_token: &apos;abcd&apos;}</span>
    <span class="hljs-comment">// &quot;getAccessToken&quot; could also be a function returning an object</span>
    <span class="hljs-attr">getAccessToken</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">url</span>:
        <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/v2/oauth2/token&apos;</span>,
      <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&apos;{{bundle.inputData.code}}&apos;</span>,
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">client_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">grant_type</span>: <span class="hljs-string">&apos;authorization_code&apos;</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>
      }
    },
    <span class="hljs-attr">scope</span>: <span class="hljs-string">&apos;read,write&apos;</span>
  },
  <span class="hljs-comment">// If you need any fields upfront, put them here</span>
  <span class="hljs-attr">fields</span>: [
    { <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;app&apos;</span> }
    <span class="hljs-comment">// For OAuth2 we store `access_token` and `refresh_token` automatically</span>
    <span class="hljs-comment">// in `bundle.authData` for future use. If you need to save/use something</span>
    <span class="hljs-comment">// that the user shouldn&apos;t need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;user_id&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in oauth2Config.getAccessToken/refreshAccessToken</span>
  ]
};

<span class="hljs-keyword">const</span> addBearerHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData &amp;&amp; bundle.authData.access_token) {
    request.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${bundle.authData.access_token}</span>`</span>;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">authentication</span>: authentication,
  <span class="hljs-attr">beforeRequest</span>: [addBearerHeader]
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note - For OAuth2, <code>authentication.oauth2Config.authorizeUrl</code>, <code>authentication.oauth2Config.getAccessToken</code>, and <code>authentication.oauth2Config.refreshAccessToken</code>  will have the provided fields in <code>bundle.inputData</code> instead of <code>bundle.authData</code> because <code>bundle.authData</code> will only have &quot;previously existing&quot; values, which will be empty when the user hasn&apos;t connected their account on your service to Zapier. Also note that <code>authentication.oauth2Config.getAccessToken</code> has access to the users return values in <code>rawRequest</code> and <code>cleanedRequest</code> should you need to extract other values (for example from the query string).</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="resources">Resources</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>resource</code> is a representation (as a JavaScript object) of one of the REST resources of your API. Say you have a <code>/recipes</code>
endpoint for working with recipes; you can define a recipe resource in your app that will tell Zapier how to do create,
read, and search operations on that resource.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">// `key` is the unique identifier the Zapier backend references</span>
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// `noun` is the user-friendly name displayed in the Zapier UI</span>
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-comment">// `list` and `create` are just a couple of the methods you can define</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">create</span>: {
    <span class="hljs-comment">// ...</span>
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The quickest way to create a resource is with the <code>zapier scaffold</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier scaffold resource <span class="hljs-string">&quot;Recipe&quot;</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This will generate the resource file and add the necessary statements to the <code>index.js</code> file to import it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="resource-definition">Resource Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A resource has a few basic properties. The first is the <code>key</code>, which allows Zapier to identify the resource on our backend.
The second is the <code>noun</code>, the user-friendly name of the resource that is presented to users throughout the Zapier UI.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/resource">https://github.com/zapier/zapier-platform/tree/master/example-apps/resource</a> for a working example app using resources.</p>
</blockquote><p>After those, there is a set of optional properties that tell Zapier what methods can be performed on the resource.
The complete list of available methods can be found in the <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#resourceschema">Resource Schema Docs</a>.
For now, let&apos;s focus on two:</p><ul>
<li><code>list</code> - Tells Zapier how to fetch a set of this resource. This becomes a Trigger in the Zapier Editor.</li>
<li><code>create</code> - Tells Zapier how to create a new instance of the resource. This becomes an Action in the Zapier Editor.</li>
</ul><p>Here is a complete example of what the list method might look like</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> listRecipesRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>
};

<span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: listRecipesRequest
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The method is made up of two properties, a <code>display</code> and an <code>operation</code>. The <code>display</code> property (<a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#basicdisplayschema">schema</a>) holds the info needed to present the method as an available Trigger in the Zapier Editor. The <code>operation</code> (<a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#resourceschema">schema</a>) provides the implementation to make the API call.</p><p>Adding a create method looks very similar.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> createRecipeRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
    <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
  }
};

<span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">create</span>: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Add Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Adds a new recipe to our cookbook.&apos;</span>
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: createRecipeRequest
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Every method you define on a <code>resource</code> Zapier converts to the appropriate Trigger, Create, or Search. Our examples
above would result in an app with a New Recipe Trigger and an Add Recipe Create.</p><p>Note the keys for the Trigger, Create, Search, and Search or Create are automatically generated (in case you want to use them in a dynamic dropdown), like: <code>{resourceName}List</code>, <code>{resourceName}Create</code>, <code>{resourceName}Search</code>, and <code>{resourceName}SearchOrCreate</code>; in the examples above, <code>{resourceName}</code> would be <code>recipe</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="triggerssearchescreates">Triggers/Searches/Creates</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Triggers, Searches, and Creates are the way an app defines what it is able to do. Triggers read
data into Zapier (i.e. watch for new recipes). Searches locate individual records (find recipe by title). Creates create
new records in your system (add a recipe to the catalog).</p><p>The definition for each of these follows the same structure. Here is an example of a trigger:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> recipeListRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_recipe</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;new_recipe&apos;</span>, <span class="hljs-comment">// uniquely identifies the trigger</span>
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>, <span class="hljs-comment">// user-friendly word that is used to refer to the resource</span>
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
      },
      <span class="hljs-comment">// `operation` implements the API call used to fetch the data</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: recipeListRequest
      }
    },
    <span class="hljs-attr">another_trigger</span>: {
      <span class="hljs-comment">// Another trigger definition...</span>
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the definition for each by looking at the <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#triggerschema">Trigger Schema</a>,
<a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#searchschema">Search Schema</a>, and <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#createschema">Create Schema</a>.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/trigger">https://github.com/zapier/zapier-platform/tree/master/example-apps/trigger</a> for a working example app using triggers.</p>
</blockquote><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/rest-hooks">https://github.com/zapier/zapier-platform/tree/master/example-apps/rest-hooks</a> for a working example app using REST hook triggers.</p>
</blockquote><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/search">https://github.com/zapier/zapier-platform/tree/master/example-apps/search</a> for a working example app using searches.</p>
</blockquote><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/create">https://github.com/zapier/zapier-platform/tree/master/example-apps/create</a> for a working example app using creates.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="return-types">Return Types</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Each of the 3 types of function expects a certain type of object. As of core <code>v1.0.11</code>, there are automated checks to let you know when you&apos;re trying to pass the wrong type back. There&apos;s more info in each relevant <code>post_X</code> section of the <a href="https://zapier.com/developer/documentation/v2/scripting/#available-methods">v2 docs</a>. For reference, each expects:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <table>
<thead>
<tr>
<th>Method</th>
<th>Return Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trigger</td>
<td>Array</td>
<td>0 or more objects that will be passed to the <a href="https://zapier.com/developer/documentation/v2/deduplication/">deduper</a></td>
</tr>
<tr>
<td>Search</td>
<td>Array</td>
<td>0 or more objects. If len &gt; 0, put the best match first</td>
</tr>
<tr>
<td>Action</td>
<td>Object</td>
<td>Return values are evaluated by <a href="https://lodash.com/docs#isPlainObject"><code>isPlainObject</code></a></td>
</tr>
</tbody>
</table>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="input-fields">Input Fields</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>On each trigger, search, or create in the <code>operation</code> directive - you can provide an array of objects as fields under the <code>inputFields</code>. Input Fields are what your users would see in the main Zapier user interface. For example, you might have a &quot;Create Contact&quot; action with fields like &quot;First name&quot;, &quot;Last name&quot;, &quot;Email&quot;, etc. These fields will be able to accept input from previous steps in a Zap, for example:</p><p><img src="https://cdn.zapier.com/storage/photos/6bd938f7cad7e34c75ba1c1d3be75ac5.gif" alt="gif of setting up an action field in Zap Editor"></p><p>You can find more details about setting action fields from a user perspective in <a href="https://zapier.com/help/creating-zap/#set-up-action-template">our help documentation</a>.</p><p>Those fields have various options you can provide, here is a succinct example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">creates</span>: {
    <span class="hljs-attr">create_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">inputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title of Recipe&apos;</span>,
            <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Name your recipe!&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;style&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">choices</span>: { <span class="hljs-attr">mexican</span>: <span class="hljs-string">&apos;Mexican&apos;</span>, <span class="hljs-attr">italian</span>: <span class="hljs-string">&apos;Italian&apos;</span> }
          }
        ],
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {}
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the different field schema options at <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#fieldschema">our Field Schema</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="customdynamic-fields">Custom/Dynamic Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In some cases, it might be necessary to provide fields that are dynamically generated - especially for custom fields. This is a common pattern for CRMs, form software, databases and more. Basically - you can provide a function instead of a field and we&apos;ll evaluate that function - merging the dynamic fields with the static fields.</p><blockquote>
<p>You should see <code>bundle.inputData</code> partially filled in as users provide data - even in field retrieval. This allows you to build hierarchical relationships into fields (EG: only show issues from the previously selected project).</p>
</blockquote><blockquote>
<p>A function that returns a list of dynamic fields cannot include additional functions in that list to call for dynamic fields.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> recipeFields = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> response = z.request(<span class="hljs-string">&apos;https://example.com/api/v2/fields.json&apos;</span>);
  <span class="hljs-comment">// json is is [{&quot;key&quot;:&quot;field_1&quot;},{&quot;key&quot;:&quot;field_2&quot;}]</span>
  <span class="hljs-keyword">return</span> response.then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json);
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">creates</span>: {
    <span class="hljs-attr">create_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">inputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title of Recipe&apos;</span>,
            <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Name your recipe!&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;style&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">choices</span>: { <span class="hljs-attr">mexican</span>: <span class="hljs-string">&apos;Mexican&apos;</span>, <span class="hljs-attr">italian</span>: <span class="hljs-string">&apos;Italian&apos;</span> }
          },
          recipeFields <span class="hljs-comment">// provide a function inline - we&apos;ll merge the results!</span>
        ],
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {}
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Additionally, if there is a field that affects the generation of dynamic fields, you can set the <code>altersDynamicFields: true</code> property. This informs the Zapier UI that whenever the value of that field changes, fields need to be recomputed. An example could be a static dropdown of &quot;dessert type&quot; that will change whether the function that generates dynamic fields includes a field &quot;with sprinkles.&quot; If your field affects others, this is an important property to set.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;dessert&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Dessert&apos;</span>,
  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Order Dessert&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Orders a dessert.&apos;</span>
  },
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-attr">inputFields</span>: [
      {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;type&apos;</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">choices</span>: { <span class="hljs-number">1</span>: <span class="hljs-string">&apos;cake&apos;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&apos;ice cream&apos;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&apos;cookie&apos;</span> },
        <span class="hljs-attr">altersDynamicFields</span>: <span class="hljs-literal">true</span>
      },
      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">z, bundle</span>) </span>{
        <span class="hljs-keyword">if</span> (bundle.inputData.type === <span class="hljs-string">&apos;2&apos;</span>) {
          <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;with_sprinkles&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;boolean&apos;</span> }];
        }
        <span class="hljs-keyword">return</span> [];
      }
    ],
    <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">z, bundle</span>) </span>{
      <span class="hljs-comment">/* ... */</span>
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Only dropdowns support <code>altersDynamicFields</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="dynamic-dropdowns">Dynamic Dropdowns</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Sometimes, API endpoints require clients to specify a parent object in order to create or access the child resources. For instance, specifying a spreadsheet id in order to retrieve its worksheets. Since people don&apos;t speak in auto-incremented ID&apos;s, it is necessary that Zapier offer a simple way to select that parent using human readable handles.</p><p>Our solution is to present users a dropdown that is populated by making a live API call to fetch a list of parent objects. We call these special dropdowns &quot;dynamic dropdowns.&quot;</p><p>To define one you include the <code>dynamic</code> property on the <code>inputFields</code> object. The value for the property is a dot-separated <em>string</em> concatenation.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">//...</span>
<span class="hljs-attr">issue</span>: {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
  <span class="hljs-comment">//...</span>
  <span class="hljs-attr">create</span>: {
    <span class="hljs-comment">//...</span>
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">inputFields</span>: [
        {
          <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
          <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;This is a dynamic dropdown&apos;</span>,
          <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;project.id.name&apos;</span>
        }, <span class="hljs-comment">// will call the trigger with a key of project</span>
        {
          <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
          <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
          <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>
        }
      ]
    }
  }
}

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The dot-separated string concatenation follows this pattern:</p><ul>
<li>The key of the trigger you want to use to power the dropdown. <em>required</em></li>
<li>The value to be made available in bundle.inputData. <em>required</em></li>
<li>The human friendly value to be shown on the left of the dropdown in bold. <em>optional</em></li>
</ul><p>In the above code example the dynamic property makes reference to a trigger with a key of project. Assuming the project trigger returns an array of objects and each object contains an id and name key, i.e.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">[
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;First Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Second Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;3&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Third Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;4&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Fourth Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> }
];

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The dynamic dropdown would look something like this.
<img src="https://cdn.zapier.com/storage/photos/dd31fa761e0cf9d0abc9b50438f95210.png" alt="screenshot of dynamic dropdown in Zap Editor"></p><p>In the first code example the dynamic dropdown is powered by a trigger. You can also use a resource to power a dynamic dropdown. To do this combine the resource key and the resource method using camel case.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">list</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
          } <span class="hljs-comment">// called for project_id dropdown</span>
        }
      }
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>
            }, <span class="hljs-comment">// calls project.list</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>
            }
          ]
        }
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In some cases you will need to power a dynamic dropdown but do not want to make the Trigger available to the end user. Here it is best practice to create the trigger and set <code>hidden: true</code> on it&apos;s display object.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Project&apos;</span>,
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Project&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new project is added.&apos;</span>,
        <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: projectListRequest
      }
    },
    <span class="hljs-attr">another_trigger</span>: {
      <span class="hljs-comment">// Another trigger definition...</span>
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can have multiple dynamic dropdowns in a single Trigger or Action. And a dynamic dropdown can depend on the value chosen in another dynamic dropdown when making it&apos;s API call. Such as a Spreadsheet and Worksheet dynamic dropdown in a trigger or action. This means you must make sure that the key of the first dynamic dropdown is the same as referenced in the trigger powering the second.</p><p>Let&apos;s say you have a Worksheet trigger with a <code>perform</code> method similar to this.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">perform: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> z
    .request(<span class="hljs-string">&apos;https://example.com/api/v2/projects.json&apos;</span>, {
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">spreadsheet_id</span>: bundle.inputData.spreadsheet_id
      }
    })
    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> z.JSON.parse(response.content));
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And your New Records trigger has a Spreadsheet and a Worksheet dynamic dropdown. The Spreadsheet dynamic dropdown must have a key of <code>spreadsheet_id</code>. When the user selects a spreadsheet via the dynamic dropdown the value chosen is made available in <code>bundle.inputData</code>. It will then be passed to the Worksheet trigger when the user clicks on the Worksheet dynamic dropdown.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;new_records&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;spreadsheet_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Spreadsheet&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;spreadsheet.id.name&apos;</span>
            },
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;worksheet_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Worksheet&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;worksheet.id.name&apos;</span>
            }
          ]
        }
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <a href="https://zapier.com/apps/google-sheets/integrations#triggers-and-actions">Google Sheets</a> integration is an example of this pattern.</p><p>If you want your trigger to perform specific scripting for a dynamic dropdown you will need to make use of <code>bundle.meta.isFillingDynamicDropdown</code>. This can be useful if need to make use of <a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">pagination</a> in the dynamic dropdown to load more options.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">list</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">canPaginate</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (bundle.meta.isFillingDynamicDropdown) {
              <span class="hljs-comment">// perform pagination request here</span>
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
            }
          }
        }
      }
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>
            }, <span class="hljs-comment">// calls project.list</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>
            }
          ]
        }
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="search-powered-fields">Search-Powered Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For fields that take id of another object to create a relationship between the two (EG: a project id for a ticket), you can specify the <code>search</code> property on the field to indicate that Zapier needs to prompt the user to setup a Search step to populate the value for this field. Similar to dynamic dropdowns, the value for this property is a dot-separated concatenation of a search&apos;s key and the field to use for the value.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">search</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
          } <span class="hljs-comment">// called for project_id</span>
        }
      }
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>,
              <span class="hljs-attr">search</span>: <span class="hljs-string">&apos;projectSearch.id&apos;</span>
            }, <span class="hljs-comment">// calls project.search (requires a trigger in the &quot;dynamic&quot; property)</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>
            }
          ]
        }
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><strong>NOTE:</strong> This has to be combined with the <code>dynamic</code> property to give the user a guided experience when setting up a Zap.</p><p>If you don&apos;t define a trigger for the <code>dynamic</code> property, the search connector won&apos;t show.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="computed-fields">Computed Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In OAuth and Session Auth, Zapier automatically stores every value from an integration&#x2019;s auth API response i.e. that&#x2019;s <code>getAccessToken</code> and <code>refreshAccessToken</code> for OAuth and <code>getSessionKey</code> for session auth.</p><p>You can return additional fields in these responses, on top of the expected <code>access_token</code> or <code>refresh_token</code> for OAuth and <code>sessionKey</code> for Session auth. They will be saved in <code>bundle.authData</code>. You can reference these fields in any subsequent API call as needed.</p><p>If you want Zapier to validate that these additional fields exist, you need to use Computed Fields. If you define computed fields in your integration, Zapier will check to make sure those fields exist when it runs the authentication test API call.</p><p>Computed fields work like any other field, though with <code>computed: true</code> property, and <code>required: false</code> as user can not enter computed fields themselves. Reference computed fields in API calls as <code>{{bundle.authData.field}}</code>, replacing <code>field</code> with that field&apos;s name from your test API call response.</p><p>You can see examples of computed fields in the <a href="#oauth2">OAuth2</a> or <a href="#session">Session Auth</a> example sections.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When your action needs to accept an array of items, you can include an input field with the <code>children</code> attribute. The <code>children</code> attribute accepts a list of <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#fieldschema">fields</a> that can be input for each item in this array.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">inputFields</span>: [
      {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;lineItems&apos;</span>,
        <span class="hljs-attr">children</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;lineItemId&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Line Item ID&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Name&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;description&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Description&apos;</span>
          }
        ]
      }
    ]
    <span class="hljs-comment">// ...</span>
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="output-fields">Output Fields</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>On each trigger, search, or create in the operation directive - you can provide an array of objects as fields under the <code>outputFields</code>. Output Fields are what your users would see when they select a field provided by your trigger, search or create to map it to another.</p><p>Output Fields are optional, but can be used to:</p><ul>
<li>Define friendly labels for the returned fields. By default, we will <em>humanize</em> for example <code>my_key</code> as <em>My Key</em>.</li>
<li>Make sure that custom fields that may not be found in every live sample and - since they&apos;re custom to the connected account - cannot be defined in the static sample, can still be mapped.</li>
</ul><p>The <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#fieldschema">schema</a> for <code>outputFields</code> is shared with <code>inputFields</code> but only the <code>key</code> and <code>required</code> properties are relevant.</p><p>Custom/Dynamic Output Fields are defined in the same way as <a href="#customdynamic-fields">Custom/Dynamic Input Fields</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an Output Field for a nested field use <code>{{parent}}__{{key}}</code>. For children (line item) fields use <code>{{parent}}[]{{key}}</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> recipeOutputFields = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> response = z.request(<span class="hljs-string">&apos;https://example.com/api/v2/fields.json&apos;</span>);
  <span class="hljs-comment">// json is like [{&quot;key&quot;:&quot;field_1&quot;,&quot;label&quot;:&quot;Label for Custom Field&quot;}]</span>
  <span class="hljs-keyword">return</span> response.then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content));
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {},
        <span class="hljs-attr">sample</span>: {
          <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">&apos;Pancake&apos;</span>,
          <span class="hljs-attr">author</span>: {
            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Amy&apos;</span>
          },
          <span class="hljs-attr">ingredients</span>: [
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Egg&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">1</span>
            },
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Milk&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">60</span>,
              <span class="hljs-attr">unit</span>: <span class="hljs-string">&apos;g&apos;</span>
            },
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Flour&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">30</span>,
              <span class="hljs-attr">unit</span>: <span class="hljs-string">&apos;g&apos;</span>
            }
          ]
        },
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">outputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;id&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Recipe ID&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Recipe Title&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;author__id&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Author User ID&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;author__name&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Author Name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]name&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]amount&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Amount&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;number&apos;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]unit&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Unit&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>
          },
          recipeOutputFields <span class="hljs-comment">// provide a function inline - we&apos;ll merge the results!</span>
        ]
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="z-object">Z Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We provide several methods off of the <code>z</code> object, which is provided as the first argument to all function calls in your app.</p><blockquote>
<p>The <code>z</code> object is passed into your functions as the first argument - IE: <code>perform: (z) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zrequesturl-options"><code>z.request([url], options)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.request([url], options)</code> is a promise based HTTP client with some Zapier-specific goodies. See <a href="#making-http-requests">Making HTTP Requests</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zconsole"><code>z.console</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.console.log(message)</code> is a logging console, similar to Node.js <code>console</code> but logs remotely, as well as to stdout in tests. See <a href="#console-logging">Log Statements</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.dehydrate(func, inputData)</code> is used to lazily evaluate a function, perfect to avoid API calls during polling or for reuse. See <a href="#dehydration">Dehydration</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.dehydrateFile</code> is used to lazily download a file, perfect to avoid API calls during polling or for reuse. See <a href="#file-dehydration">File Dehydration</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code> is a promise based file stasher that returns a URL file pointer. See <a href="#stashing-files">Stashing Files</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zjson"><code>z.JSON</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.JSON</code> is similar to the JSON built-in like <code>z.JSON.parse(&apos;...&apos;)</code>, but catches errors and produces nicer tracebacks.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zhash"><code>z.hash()</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.hash()</code> is a crypto tool for doing things like <code>z.hash(&apos;sha256&apos;, &apos;my password&apos;)</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zerrors"><code>z.errors</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.errors</code> is a collection error classes that you can throw in your code, like <code>throw new z.errors.HaltedError(&apos;...&apos;)</code>.</p><p>The available errors are:</p><ul>
<li>HaltedError - Stops current operation, but will never turn off Zap. Read more on <a href="#halting-execution">Halting Execution</a></li>
<li>ExpiredAuthError - Turns off Zap and emails user to manually reconnect. Read more on <a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
<li>RefreshAuthError - (OAuth2 or Session Auth) Tells Zapier to refresh credentials and retry operation. Read more on <a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
</ul><p>For more details on error handling in general, see <a href="#error-handling">here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zcursor"><code>z.cursor</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.cursor</code> object exposes two methods:</p><ul>
<li><code>z.cursor.get(): Promise&lt;string|null&gt;</code></li>
<li><code>z.cursor.set(string): Promise&lt;null&gt;</code></li>
</ul><p>Any data you <code>set</code> will be available to that Zap for about an hour (or until it&apos;s overwritten). For more information, see: <a href="#paging">paging</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="bundle-object">Bundle Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This object holds the user&apos;s auth details and the data for the API requests.</p><blockquote>
<p>The <code>bundle</code> object is passed into your functions as the second argument - IE: <code>perform: (z, bundle) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleauthdata"><code>bundle.authData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.authData</code> is user-provided authentication data, like <code>api_key</code> or <code>access_token</code>. <a href="#authentication">Read more on authentication.</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleinputdata"><code>bundle.inputData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputData</code> is user-provided data for this particular run of the trigger/search/create, as defined by the inputFields. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;his name is Bobby Flay&apos;</span>
  <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;he cooks mediterranean&apos;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleinputdataraw"><code>bundle.inputDataRaw</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputDataRaw</code> is kind of like <code>inputData</code>, but before rendering <code>{{curlies}}</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;his name is {{123__chef_name}}&apos;</span>
  <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;he cooks {{456__style}}&apos;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>&quot;curlies&quot; are data mapped in from previous steps. They take the form <code>{{NODE_ID__key_name}}</code>. You&apos;ll usually want to use <code>bundle.inputData</code> instead.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlemeta"><code>bundle.meta</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.meta</code> contains extra information useful for doing advanced behaviors depending on what the user is doing. It has the following options:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <table>
<thead>
<tr>
<th>key</th>
<th>default</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isLoadingSample</code></td>
<td><code>false</code></td>
<td>If true, this run was initiated manually via the Zap Editor</td>
</tr>
<tr>
<td><code>isFillingDynamicDropdown</code></td>
<td><code>false</code></td>
<td>If true, this poll is being used to populate a dynamic dropdown. You only need to return the fields you specified (such as <code>id</code> and <code>name</code>), though returning everything is fine too</td>
</tr>
<tr>
<td><code>isPopulatingDedupe</code></td>
<td><code>false</code></td>
<td>If true, the results of this poll will be used to initialize the deduplication list rather than trigger a zap. You should grab as many items as possible. See also: <a href="#dedup">deduplication</a></td>
</tr>
<tr>
<td><code>limit</code></td>
<td><code>-1</code></td>
<td>The number of items you should fetch. <code>-1</code> indicates there&apos;s no limit. Build this into your calls insofar as you are able</td>
</tr>
<tr>
<td><code>page</code></td>
<td><code>0</code></td>
<td>Used in <a href="#paging">paging</a> to uniquely identify which page of results should be returned</td>
</tr>
<tr>
<td><code>isTestingAuth</code></td>
<td><code>false</code></td>
<td>(legacy property) If true, the poll was triggered by a user testing their account (via <a href="https://cdn.zapier.com/storage/photos/5c94c304ce11b02c073a973466a7b846.png">clicking &quot;test&quot;</a> or during setup). We use this data to populate the auth label, but it&apos;s mostly used to verify we made a successful authenticated request</td>
</tr>
</tbody>
</table>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Before version <code>8.0.0</code>, the information in <code>bundle.meta</code> was different. See <a href="https://github.com/zapier/zapier-platform-cli/blob/a058e6d538a75d215d2e0c52b9f49a97218640c4/README.md#bundlemeta">the old docs</a> for the previous values and <a href="https://github.com/zapier/zapier-platform/wiki/bundle.meta-changes">the wiki</a> for a mapping of old values to new.</p>
</blockquote><p>There&apos;s also <code>bundle.meta.zap.id</code>, which is only available in the <code>performSubscribe</code> and <code>performUnsubscribe</code> methods.</p><p>The user&apos;s Zap ID is available during the <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#basichookoperationschema">subscribe and unsubscribe</a> methods.</p><p>For example - you could do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> subscribeHook = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {

  <span class="hljs-keyword">const</span> options = {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api/hooks&apos;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-attr">url</span>: bundle.targetUrl, <span class="hljs-comment">// bundle.targetUrl has the Hook URL this app should call</span>
      <span class="hljs-attr">zap_id</span>: bundle.meta.zap.id,
    },
  };

  <span class="hljs-keyword">return</span> z.request(options).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json);
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// ... see our rest hook example for additional details: https://github.com/zapier/zapier-platform/blob/master/example-apps/rest-hooks/triggers/recipe.js</span>
  <span class="hljs-attr">performSubscribe</span>: subscribeHook,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlerawrequest"><code>bundle.rawRequest</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.rawRequest</code> is only available in the <code>perform</code> for web hooks and <code>getAccessToken</code> for oauth authentication methods.</p>
</blockquote><p><code>bundle.rawRequest</code> holds raw information about the HTTP request that triggered the <code>perform</code> method or that represents the users browser request that triggered the <code>getAccessToken</code> call:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>{
  method: &apos;POST&apos;,
  querystring: &apos;foo=bar&amp;baz=qux&apos;,
  headers: {
    &apos;Content-Type&apos;: &apos;application/json&apos;
  },
  content: &apos;{&quot;hello&quot;: &quot;world&quot;}&apos;
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlecleanedrequest"><code>bundle.cleanedRequest</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.cleanedRequest</code> is only available in the <code>perform</code> for webhooks and <code>getAccessToken</code> for oauth authentication methods.</p>
</blockquote><p><code>bundle.cleanedRequest</code> will return a formatted and parsed version of the request. Some or all of the following will be available:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>{
  method: &apos;POST&apos;,
  querystring: {
    foo: &apos;bar&apos;,
    baz: &apos;qux&apos;
  },
  headers: {
    &apos;Content-Type&apos;: &apos;application/json&apos;
  },
  content: {
    hello: &apos;world&apos;
  }
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundletargeturl"><code>bundle.targetUrl</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.targetUrl</code> is only available in the <code>performSubscribe</code> and <code>performUnsubscribe</code> methods for webhooks.</p>
</blockquote><p>This the URL to which you should send hook data. It&apos;ll look something like <code>https://hooks.zapier.com/1234/abcd</code>. We provide it so you can make a POST request to your server.Your server should store this URL and use is as a destination when there&apos;s new data to report.</p><p>Read more in the <a href="https://github.com/zapier/zapier-platform/blob/master/example-apps/rest-hooks/triggers/recipe.js">REST hook example</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlesubscribedata"><code>bundle.subscribeData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.subscribeData</code> is only available in the <code>performUnsubscribe</code> method for webhooks.</p>
</blockquote><p>This is an object that contains the data you returned from the <code>performSubscribe</code> function. It should contain whatever information you need send a <code>DELETE</code> request to your server to stop sending webhooks to Zapier.</p><p>Read more in the <a href="https://github.com/zapier/zapier-platform/blob/master/example-apps/rest-hooks/triggers/recipe.js">REST hook example</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="environment">Environment</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Apps can define environment variables that are available when the app&apos;s code executes. They work just like environment
variables defined on the command line. They are useful when you have data like an OAuth client ID and secret that you
don&apos;t want to commit to source control. Environment variables can also be used as a quick way to toggle between a
a staging and production environment during app development.</p><p>It is important to note that <strong>variables are defined on a per-version basis!</strong> When you push a new version, the
existing variables from the previous version are copied, so you don&apos;t have to manually add them. However, edits
made to one version&apos;s environment will not affect the other versions.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="defining-environment-variables">Defining Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an environment variable, use the <code>env</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will set the environment variable on Zapier.com</span>
zapier env 1.0.0 MY_SECRET_VALUE 1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will likely also want to set the value locally for testing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Alternatively, we provide some extra tooling to work with an <code>.env</code> (or <code>.environment</code>, see below note) that looks like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>.env</code> is the new recommended name for the environment file since v5.1.0. The old name <code>.environment</code> is depreated but will continue to work for backward compatibility.</p>
</blockquote><p>And then in your <code>test/basic.js</code> file:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

should(<span class="hljs-string">&apos;some tests&apos;</span>, () =&gt; {
  zapier.tools.env.inject(); <span class="hljs-comment">// testing only!</span>
  <span class="hljs-built_in">console</span>.log(process.env.MY_SECRET_VALUE);
  <span class="hljs-comment">// should print &apos;1234&apos;</span>
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>This is a popular way to provide <code>process.env.ACCESS_TOKEN || bundle.authData.access_token</code> for convenient testing.</p>
</blockquote><blockquote>
<p><strong>NOTE</strong> Variables defined via <code>zapier env</code> will <em>always</em> be uppercased. For example, you would access the variable defined by <code>zapier env 1.0.0 foo_bar 1234</code> with <code>process.env.FOO_BAR</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="accessing-environment-variables">Accessing Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view existing environment variables, use the <code>env</code> command.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will print a table listing the variables for this version</span>
zapier env 1.0.0
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Within your app, you can access the environment via the standard <code>process.env</code> - any values set via local <code>export</code> or <code>zapier env</code> will be there.</p><p>For example, you can access the <code>process.env</code> in your perform functions and in templates:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> listExample = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> httpOptions = {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&apos;my-header&apos;</span>: process.env.MY_SECRET_VALUE
    }
  };
  <span class="hljs-keyword">const</span> response = z.request(
    <span class="hljs-string">&apos;https://example.com/api/v2/recipes.json&apos;</span>,
    httpOptions
  );
  <span class="hljs-keyword">return</span> response.then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json);
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;{{process.env.MY_NOUN}}&apos;</span>,
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: listExample
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note! Be sure to lazily access your environment variables - see <a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="making-http-requests">Making HTTP Requests</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two primary ways to make HTTP requests in the Zapier platform:</p><ol>
<li><strong>Shorthand HTTP Requests</strong> - these are simple object literals that make it easy to define simple requests.</li>
<li><strong>Manual HTTP Requests</strong> - you use <code>z.request([url], options)</code> to make the requests and control the response. Use this when you need to change options for certain requests (for all requests, use middleware).</li>
</ol><p>There are also a few helper constructs you can use to reduce boilerplate:</p><ol>
<li><code>requestTemplate</code> which is an shorthand HTTP request that will be merged with every request.</li>
<li><code>beforeRequest</code> middleware which is an array of functions to mutate a request before it is sent.</li>
<li><code>afterResponse</code> middleware which is an array of functions to mutate a response before it is completed.</li>
</ol><blockquote>
<p>Note: you can install any HTTP client you like - but this is greatly discouraged as you lose <a href="#http-logging">automatic HTTP logging</a> and middleware.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="shorthand-http-requests">Shorthand HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For simple HTTP requests that do not require special pre or post processing, you can specify the HTTP options as an object literal in your app definition.</p><p>This features:</p><ol>
<li>Lazy <code>{{curly}}</code> replacement.</li>
<li>JSON and form body de-serialization.</li>
<li>Automatic non-2xx error raising.</li>
</ol>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> triggerShorthandRequest = {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/v2/api/recipes.json&apos;</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">sort_by</span>: <span class="hljs-string">&apos;id&apos;</span>,
    <span class="hljs-attr">sort_order</span>: <span class="hljs-string">&apos;DESC&apos;</span>
  }
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: triggerShorthandRequest
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In the URL above, <code>{{bundle.authData.subdomain}}</code> is automatically replaced with the live value from the bundle. If the call returns a non 2xx return code, an error is automatically raised. The response body is automatically parsed as JSON and returned.</p><p>An error will be raised if the response is not valid JSON, so <em>do not use shorthand HTTP requests with non-JSON responses</em>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="manual-http-requests">Manual HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When you need to do custom processing of the response, or need to process non-JSON responses, you can make manual HTTP requests. This approach does not perform any magic - no status code checking, no automatic JSON parsing. Use this method when you need more control. Manual requests do perform lazy <code>{{curly}}</code> replacement.</p><p>To make a manual HTTP request, use the <code>request</code> method of the <code>z</code> object:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> listExample = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> customHttpOptions = {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&apos;my-header&apos;</span>: <span class="hljs-string">&apos;from zapier&apos;</span>
    }
  };

  <span class="hljs-keyword">return</span> z
    .request(<span class="hljs-string">&apos;https://example.com/api/v2/recipes.json&apos;</span>, customHttpOptions)
    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">300</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
      }

      <span class="hljs-keyword">const</span> recipes = z.JSON.parse(response.content);
      <span class="hljs-comment">// do any custom processing of recipes here...</span>

      <span class="hljs-keyword">return</span> recipes;
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: listExample
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="post-and-put-requests">POST and PUT Requests</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To POST or PUT data to your API you can do this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> recipe = {
            <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
            <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
            <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;Get some dough....&apos;</span>
          };

          <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
            <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(recipe)
          };

          <span class="hljs-keyword">return</span> z
            .request(<span class="hljs-string">&apos;https://example.com/api/v2/recipes.json&apos;</span>, options)
            .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
              <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">201</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
              }
            });
        }
      }
    }
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you need to call <code>z.JSON.stringify()</code> before setting the <code>body</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="using-http-middleware">Using HTTP middleware</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you need to process all HTTP requests in a certain way, you may be able to use one of utility HTTP middleware functions.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/middleware">https://github.com/zapier/zapier-platform/tree/master/example-apps/middleware</a> for a working example app using HTTP middleware.</p>
</blockquote><p>Try putting them in your app definition:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> addHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;my-header&apos;</span>] = <span class="hljs-string">&apos;from zapier&apos;</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> mustBe200 = <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">200</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
  }
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> autoParseJson = <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
  response.json = z.JSON.parse(response.content);
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">beforeRequest</span>: [addHeader],
  <span class="hljs-attr">afterResponse</span>: [mustBe200, autoParseJson]
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>beforeRequest</code> middleware function takes a request options object, and returns a (possibly mutated) request object. An <code>afterResponse</code> middleware function takes a response object, and returns a (possibly mutated) response object. Middleware functions are executed in the order specified in the app definition, and each subsequent middleware receives the request or response object returned by the previous middleware.</p><p>Middleware functions can be asynchronous - just return a promise from the middleware function.</p><p>The second argument for middleware is the <code>z</code> object, but it does <em>not</em> include <code>z.request()</code> as using that would easily create infinite loops.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-request-options">HTTP Request Options</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Shorthand requests and manual <code>z.request([url], options)</code> calls support the following HTTP <code>options</code>:</p><ul>
<li><code>url</code>: HTTP url, you can provide it both <code>z.request(url, options)</code> or <code>z.request({url: url, ...})</code>.</li>
<li><code>method</code>: HTTP method, default is <code>GET</code>.</li>
<li><code>headers</code>: request headers object, format <code>{&apos;header-key&apos;: &apos;header-value&apos;}</code>.</li>
<li><code>params</code>: URL query params object, format <code>{&apos;query-key&apos;: &apos;query-value&apos;}</code>.</li>
<li><code>body</code>: request body, can be a string, buffer, readable stream or plain object. When it is an object/array and the <code>Content-Type</code> header is <code>application/x-www-form-urlencoded</code> the body will be transformed to query string parameters, otherwise we&apos;ll set the header to <code>application/json; charset=utf-8</code> and JSON encode the body. Default is <code>null</code>.</li>
<li><code>json</code>: shortcut object/array/etc. you want to JSON encode into body. Default is <code>null</code>.</li>
<li><code>form</code>: shortcut object. you want to form encode into body. Default is <code>null</code>.</li>
<li><code>raw</code>: set this to stream the response instead of consuming it immediately. Default is <code>false</code>.</li>
<li><code>redirect</code>: set to <code>manual</code> to extract redirect headers, <code>error</code> to reject redirect, default is <code>follow</code>.</li>
<li><code>follow</code>: maximum redirect count, set to <code>0</code> to not follow redirects. default is <code>20</code>.</li>
<li><code>compress</code>: support gzip/deflate content encoding. Set to <code>false</code> to disable. Default is <code>true</code>.</li>
<li><code>agent</code>: Node.js <code>http.Agent</code> instance, allows custom proxy, certificate etc. Default is <code>null</code>.</li>
<li><code>timeout</code>: request / response timeout in ms. Set to <code>0</code> to disable (OS limit still applies), timeout reset on <code>redirect</code>. Default is <code>0</code> (disabled).</li>
<li><code>size</code>: maximum response body size in bytes. Set to <code>0</code> to disable. Default is <code>0</code> (disabled).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.request({
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>
  },
  <span class="hljs-comment">// only provide body, json or form...</span>
  <span class="hljs-attr">body</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>}, <span class="hljs-comment">// or &apos;{&quot;hello&quot;: &quot;world&quot;}&apos; or &apos;hello=world&apos;</span>
  <span class="hljs-attr">json</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-attr">form</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-comment">// access node-fetch style response.body</span>
  <span class="hljs-attr">raw</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">redirect</span>: <span class="hljs-string">&apos;follow&apos;</span>,
  <span class="hljs-attr">follow</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">agent</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">0</span>,
})
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-response-object">HTTP Response Object</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The response object returned by <code>z.request([url], options)</code> supports the following fields and methods:</p><ul>
<li><code>status</code>: The response status code, i.e. <code>200</code>, <code>404</code>, etc.</li>
<li><code>content</code>: The response content as a String. For Buffer, try <code>options.raw = true</code>.</li>
<li><code>json</code>: The response content as an object (or <code>undefined</code>). If <code>options.raw = true</code> - is a promise.</li>
<li><code>body</code>: A stream available only if you provide <code>options.raw = true</code>.</li>
<li><code>headers</code>: Response headers object. The header keys are all lower case.</li>
<li><code>getHeader(key)</code>: Retrieve response header, case insensitive: <code>response.getHeader(&apos;My-Header&apos;)</code></li>
<li><code>throwForStatus()</code>: Throw error if final <code>response.status &gt; 300</code>. Will throw <code>z.error.RefreshAuthError</code> if 401.</li>
<li><code>request</code>: The original request options object (see above).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.request({
  <span class="hljs-comment">// ..</span>
}).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
  <span class="hljs-comment">// a bunch of examples lines for cherry picking</span>
  response.status;
  response.headers[<span class="hljs-string">&apos;Content-Type&apos;</span>];
  response.getHeader(<span class="hljs-string">&apos;content-type&apos;</span>);
  response.request; <span class="hljs-comment">// original request options</span>
  response.throwForStatus();
  <span class="hljs-comment">// if options.raw === false (default)...</span>
  <span class="hljs-built_in">JSON</span>.parse(response.content);
  response.json;
  <span class="hljs-comment">// if options.raw === true...</span>
  response.buffer().then(<span class="hljs-function"><span class="hljs-params">buf</span> =&gt;</span> buf.toString());
  response.text().then(<span class="hljs-function"><span class="hljs-params">content</span> =&gt;</span> content);
  response.json().then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> json);
  response.body.pipe(otherStream);
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="dehydration">Dehydration</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Dehydration, and its counterpart Hydration, is a tool that can lazily load data that might be otherwise expensive to retrieve aggressively.</p><ul>
<li><strong>Dehydration</strong> - think of this as &quot;make a pointer&quot;, you control the creation of pointers with <code>z.dehydrate(func, inputData)</code> (or <code>z.dehydrateFile(func, inputData)</code> for files). This usually happens in a trigger step.</li>
<li><strong>Hydration</strong> - think of this as an automatic step that &quot;consumes a pointer&quot; and &quot;returns some data&quot;, Zapier does this automatically behind the scenes. This usually happens in an action step.</li>
</ul><blockquote>
<p>This is very common when <a href="#stashing-files">Stashing Files</a> - but that isn&apos;t their only use!</p>
</blockquote><p>The method <code>z.dehydrate(func, inputData)</code> has two required arguments:</p><ul>
<li><code>func</code> - the function to call to fetch the extra data. Can be any raw <code>function</code>, defined in the file doing the dehydration or imported from another part of your app. You must also register the function in the app&apos;s <code>hydrators</code> property</li>
<li><code>inputData</code> - this is an object that contains things like a <code>path</code> or <code>id</code> - whatever you need to load data on the other side</li>
</ul><blockquote>
<p><strong>Why do I need to register my functions?</strong> Because of how Javascript works with its module system, we need an explicit handle on the function that can be accessed from the App definition without trying to &quot;automagically&quot; (and sometimes incorrectly) infer code locations.</p>
</blockquote><p>Here is an example that pulls in extra data for a movie:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> getExtraDataFunction = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://example.com/movies/<span class="hljs-subst">${bundle.inputData.id}</span>.json`</span>;
  <span class="hljs-keyword">return</span> z.request(url).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content));
};

<span class="hljs-keyword">const</span> movieList = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z
    .request(<span class="hljs-string">&apos;https://example.com/movies.json&apos;</span>)
    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content))
    .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> results.map(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-comment">// so maybe /movies.json is thin content but</span>
        <span class="hljs-comment">// /movies/:id.json has more details we want...</span>
        result.moreData = z.dehydrate(getExtraDataFunction, {
          <span class="hljs-attr">id</span>: result.id
        });
        <span class="hljs-keyword">return</span> result;
      });
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// don&apos;t forget to register hydrators here!</span>
  <span class="hljs-comment">// it can be imported from any module</span>
  <span class="hljs-attr">hydrators</span>: {
    <span class="hljs-attr">getExtraData</span>: getExtraDataFunction
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_movie</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Movie&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Movie&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new Movie is added.&apos;</span>
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: movieList
      }
    }
  }
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And in future steps of the Zap - if Zapier encounters a pointer as returned by <code>z.dehydrate(func, inputData)</code> - Zapier will tie it back to your app and pull in the data lazily.</p><blockquote>
<p><strong>Why can&apos;t I just load the data immediately?</strong> Isn&apos;t it easier? In some cases it can be - but imagine an API that returns 100 records when polling - doing 100x <code>GET /id.json</code> aggressive inline HTTP calls when 99% of the time Zapier doesn&apos;t <em>need</em> the data yet is wasteful.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="file-dehydration">File Dehydration</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>New in v7.3.0.</em></p><p>The method <code>z.dehydrateFile(func, inputData)</code> allows you to download a file lazily. It takes the identical arguments as <code>z.dehydrate(func, inputData)</code> does.</p><p>An example can be found in the <a href="#stashing-files">Stashing Files</a> section.</p><p>What makes <code>z.dehydrateFile</code> different from <code>z.dehydrate</code> has to do with efficiency and when Zapier chooses to hydrate data. Knowing which pointers give us back files helps us delay downloading files until its absolutely necessary. A good example is users creating Zaps in the Zap Editor. If a pointer is made by <code>z.dehydrate</code>, the Zap Editor will hydrate the data immediately after pulling in samples. This allows users to map fields from the hydrated data into the subsequent steps of the Zap. If, however, the pointer is made by <code>z.dehydrateFile</code>, the Zap Editor will wait to hydrate the file. There&apos;s nothing in binary file data for users to map in the subsequent steps.</p><blockquote>
<p><code>z.dehydrateFile(func, inputData)</code> is new in v7.3.0. We used to recommend to use <code>z.dehydrate(func, inputData)</code> for files, but it&apos;s not the case anymore. Please change it to <code>z.dehydrateFile(func, inputData)</code> for a better user expereience.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="stashing-files">Stashing Files</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>It can be expensive to download and stream files or they can require complex handshakes to authorize downloads - so we provide a helpful stash routine that will take any <code>String</code>, <code>Buffer</code> or <code>Stream</code> and return a URL file pointer suitable for returning from triggers, searches, creates, etc.</p><p>The interface <code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code> takes a single required argument - the extra three arguments will be automatically populated in most cases. For example - a full example is this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> content = <span class="hljs-string">&apos;Hello world!&apos;</span>;
z.stashFile(content, content.length, <span class="hljs-string">&apos;hello.txt&apos;</span>, <span class="hljs-string">&apos;text/plain&apos;</span>)
  .then(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> z.console.log(url));
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/f75e2819-05e2-41d0-b70e-9f8272f9eebf</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most likely you&apos;d want to stream from another URL - note the usage of <code>z.request({raw: true})</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> fileRequest = z.request({<span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/file.pdf&apos;</span>, <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>});
z.stashFile(fileRequest) <span class="hljs-comment">// knownLength and filename will be sniffed from the request. contentType will be binary/octet-stream</span>
  .then(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> z.console.log(url));
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/74bc623c-d94d-4cac-81f1-f71d7d517bc7</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you should only be using <code>z.stashFile()</code> in a hydration method or a hook trigger&apos;s <code>perform</code> if you&apos;re sending over a short-lived URL to a file. Otherwise, it can be very expensive to stash dozens of files in a polling call - for example!</p>
</blockquote><p>See a full example with dehydration/hydration wired in correctly:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> stashPDFfunction = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-comment">// use standard auth to request the file</span>
  <span class="hljs-keyword">const</span> filePromise = z.request({
    <span class="hljs-attr">url</span>: bundle.inputData.downloadUrl,
    <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>
  });
  <span class="hljs-comment">// and swap it for a stashed URL</span>
  <span class="hljs-keyword">return</span> z.stashFile(filePromise);
};

<span class="hljs-keyword">const</span> pdfList = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z
    .request(<span class="hljs-string">&apos;https://example.com/pdfs.json&apos;</span>)
    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content))
    .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> results.map(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-comment">// lazily convert a secret_download_url to a stashed url</span>
        <span class="hljs-comment">// zapier won&apos;t do this until we need it</span>
        result.file = z.dehydrateFile(stashPDFfunction, {
          <span class="hljs-attr">downloadUrl</span>: result.secret_download_url
        });
        <span class="hljs-keyword">delete</span> result.secret_download_url;
        <span class="hljs-keyword">return</span> result;
      });
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-attr">hydrators</span>: {
    <span class="hljs-attr">stashPDF</span>: stashPDFfunction
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_pdf</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;PDF&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New PDF&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new PDF is added.&apos;</span>
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: pdfList
      }
    }
  }
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/files">https://github.com/zapier/zapier-platform/tree/master/example-apps/files</a> for a working example app using files.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="logging">Logging</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two types of logs for a Zapier app, console logs and HTTP logs. The console logs are created by your app through the use of the <code>z.console.log</code> method (<a href="#console-logging">see below for details</a>). The HTTP logs are created automatically by Zapier whenever your app makes HTTP requests (as long as you use <code>z.request([url], options)</code> or shorthand request objects).</p><p>To view the logs for your application, use the <code>zapier logs</code> command. There are three types of logs, <code>http</code> (logged automatically by Zapier on HTTP requests), <code>bundle</code> (logged automatically on every method execution), and <code>console</code> (manual logs via <code>z.console.log()</code> statements).</p><p>For advanced logging options including only displaying the logs for a certain user or app version, look at the help for the logs command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">help</span> logs
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="console-logging">Console Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To manually print a log statement in your code, use <code>z.console.log</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.console.log(<span class="hljs-string">&apos;Here are the input fields&apos;</span>, bundle.inputData);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.console</code> object has all the same methods and works just like the Node.js <a href="https://nodejs.org/docs/latest-v6.x/api/console.html"><code>Console</code></a> class - the only difference is we&apos;ll log to our distributed datastore and you can view them via <code>zapier logs</code> (more below).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-console-logs">Viewing Console Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see your <code>z.console.log</code> logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=console
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-bundle-logs">Viewing Bundle Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see the bundle logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=bundle
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-logging">HTTP Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you are using the <code>z.request()</code> shortcut that we provide - HTTP logging is handled automatically for you. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.request(<span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api/recipes&apos;</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-comment">// do whatever you like, this request is already getting logged! :-D</span>
    <span class="hljs-keyword">return</span> res;
  })
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs">Viewing HTTP Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see the HTTP logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=http
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see detailed http logs including headers, request and response bodies, etc, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=http --detailed
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="error-handling">Error Handling</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>APIs are not always available. Users do not always input data correctly to
formulate valid requests. Thus, it is a good idea to write apps defensively and
plan for 4xx and 5xx responses from APIs. Without proper handling, errors often
have incomprehensible messages for end users, or possibly go uncaught.</p><p>Zapier provides a couple tools to help with error handling. First is the <code>afterResponse</code>
middleware (<a href="#using-http-middleware">docs</a>), which provides a hook for processing
all responses from HTTP calls. The other tool is the collection of errors in
<code>z.errors</code> (<a href="#zerrors">docs</a>), which control the behavior of Zaps when
various kinds of errors occur.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="general-errors">General Errors</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Errors due to a misconfiguration in a user&apos;s Zap should be handled in your app
by throwing a standard JavaScript <code>Error</code> with a user-friendly message.
Typically, this will be prettifying 4xx responses or APIs that return errors as
200s with a payload that describes the error.</p><p>Example: <code>throw new Error(&apos;Your error message.&apos;);</code></p><p>A couple best practices to keep in mind:</p><ul>
<li>Elaborate on terse messages. &quot;not_authenticated&quot; -&gt; &quot;Your API Key is invalid. Please reconnect your account.&quot;</li>
<li>If the error calls out a specific field, surface that information to the user. &quot;Invalid Request&quot; -&gt; &quot;contact name is invalid&quot;</li>
<li>If the error provides details about why a field is invalid, add that in too! &quot;contact name is invalid&quot; -&gt; &quot;contact name is too long&quot;</li>
</ul><p>Note that if a Zap raises too many error messages it will be automatically
turned off, so only use these if the scenario is truly an error that needs to
be fixed.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="halting-execution">Halting Execution</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Any operation can be interrupted or &quot;halted&quot; (not success, not error, but
stopped for some specific reason) with a <code>HaltedError</code>. You might find yourself
using this error in cases where a required pre-condition is not met. For instance,
in a create to add an email address to a list where duplicates are not allowed,
you would want to throw a <code>HaltedError</code> if the Zap attempted to add a duplicate.
This would indicate failure, but it would be treated as a soft failure.</p><p>Unlike throwing <code>Error</code>, a Zap will never by turned off when this error is thrown
(even if it is raised more often than not).</p><p>Example: <code>throw new z.errors.HaltedError(&apos;Your reason.&apos;);</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="stale-authentication-credentials">Stale Authentication Credentials</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For apps that require manual refresh of authorization on a regular basis, Zapier
provides a mechanism to notify users of expired credentials. With the
<code>ExpiredAuthError</code>, the current operation is interrupted, the Zap is turned off
(to prevent more calls with expired credentials), and a predefined email is sent
out informing the user to refresh the credentials.</p><p>Example: <code>throw new z.errors.ExpiredAuthError(&apos;Your message.&apos;);</code></p><p>For apps that use OAuth2 + refresh or Session Auth, you can use the
<code>RefreshAuthError</code>. This will signal Zapier to refresh the credentials and then
repeat the failed operation.</p><p>Example: <code>throw new z.errors.RefreshAuthError();</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="testing">Testing</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can write unit tests for your Zapier app that run locally, outside of the zapier editor.
You can run these tests in a CI tool like <a href="https://travis-ci.com/">Travis</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="writing-unit-tests">Writing Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We recommend using the <a href="https://mochajs.org/">Mocha</a> testing framework. After running
<code>zapier init</code> you should find an example test to start from in the <code>test</code> directory.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// we use should assertions</span>
<span class="hljs-keyword">const</span> should = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);
<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-comment">// createAppTester() makes it easier to test your app. It takes your</span>
<span class="hljs-comment">// raw app definition, and returns a function that will test you app.</span>
<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>);
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(App);

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {
  describe(<span class="hljs-string">&apos;new recipe trigger&apos;</span>, () =&gt; {
    it(<span class="hljs-string">&apos;should load recipes&apos;</span>, done =&gt; {
      <span class="hljs-comment">// This is what Zapier will send to your app as input.</span>
      <span class="hljs-comment">// It contains trigger options the user choice in their zap.</span>
      <span class="hljs-keyword">const</span> bundle = {
        <span class="hljs-attr">inputData</span>: {
          <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
        }
      };

      <span class="hljs-comment">// Pass appTester the path to the trigger you want to call,</span>
      <span class="hljs-comment">// and the input bundle. appTester returns a promise for results.</span>
      appTester(App.App.triggers.recipe.operation.perform, bundle)
        .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
          <span class="hljs-comment">// Make assertions</span>

          results.length.should.eql(<span class="hljs-number">10</span>);

          <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
          firstRecipe.name.should.eql(<span class="hljs-string">&apos;Baked Falafel&apos;</span>);

          done();
        })
        .catch(done);
    });
  });
});

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="mocking-requests">Mocking Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>While testing, it&apos;s useful to test your code without actually hitting any external services. <a href="https://github.com/node-nock/nock">Nock</a> is a node.js utility that intercepts requests before they ever leave your computer. You can specify a response code, body, headers, and more. It works out of the box with <code>z.request</code> by setting up your <code>nock</code> before calling <code>appTester</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>);
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(App);

<span class="hljs-keyword">const</span> nock = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;nock&apos;</span>);

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {
  describe(<span class="hljs-string">&apos;new recipe trigger&apos;</span>, () =&gt; {
    it(<span class="hljs-string">&apos;should load recipes&apos;</span>, done =&gt; {
      <span class="hljs-keyword">const</span> bundle = {
        <span class="hljs-attr">inputData</span>: {
          <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
        }
      };

      <span class="hljs-comment">// mocks the next request that matches this url and querystring</span>
      nock(<span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api&apos;</span>)
        .get(<span class="hljs-string">&apos;/recipes&apos;</span>)
        .query(bundle.inputData)
        .reply(<span class="hljs-number">200</span>, [
          { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 1&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 1&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> },
          { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 2&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 2&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }
        ]);

      appTester(App.triggers.recipe.operation.perform, bundle)
        .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
          results.length.should.above(<span class="hljs-number">1</span>);

          <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
          firstRecipe.name.should.eql(<span class="hljs-string">&apos;name 1&apos;</span>);
          firstRecipe.directions.should.eql(<span class="hljs-string">&apos;directions 1&apos;</span>);

          done();
        })
        .catch(done);
    });

    it(<span class="hljs-string">&apos;should load recipes without filters&apos;</span>, done =&gt; {
      <span class="hljs-keyword">const</span> bundle = {};

      <span class="hljs-comment">// each test needs its own mock</span>
      nock(<span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api&apos;</span>)
        .get(<span class="hljs-string">&apos;/recipes&apos;</span>)
        .reply(<span class="hljs-number">200</span>, [
          { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 1&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 1&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> },
          { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 2&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 2&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }
        ]);

      appTester(App.triggers.recipe.operation.perform, bundle)
        .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
          results.length.should.above(<span class="hljs-number">1</span>);

          <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
          firstRecipe.name.should.eql(<span class="hljs-string">&apos;name 1&apos;</span>);
          firstRecipe.directions.should.eql(<span class="hljs-string">&apos;directions 1&apos;</span>);

          done();
        })
        .catch(done);
    });
  });
});

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There&apos;s more info about nock and its usage in its <a href="https://github.com/node-nock/nock/blob/master/README.md">readme</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="running-unit-tests">Running Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To run all your tests do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>You can also go direct with <code>npm test</code> or <code>node_modules/mocha/bin/mocha</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing--environment-variables">Testing &amp; Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The best way to store sensitive values (like API keys, OAuth secrets, or passwords) is in an <code>.env</code> (or <code>.environment</code>, see below note) file (<a href="https://github.com/motdotla/dotenv#faq">learn more</a>). Then, you can include the following before your tests run:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);
zapier.tools.env.inject(); <span class="hljs-comment">// inject() can take a filename; defaults to &quot;.env&quot;</span>

<span class="hljs-comment">// now process.env has all the values in your .env file</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>.env</code> is the new recommended name for the environment file since v5.1.0. The old name <code>.environment</code> is depreated but will continue to work for backward compatibility.</p>
</blockquote><blockquote>
<p>Remember: <strong>NEVER</strong> add your secrets file to version control!</p>
</blockquote><p>Additionally, you can provide them dynamically at runtime:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Or, <code>export</code> them explicitly and place them into the environment:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> CLIENT_ID=1234
<span class="hljs-built_in">export</span> CLIENT_SECRET=abcd
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When running a unit test via <code>zapier test</code>, <code>z.console</code> statements and detailed HTTP logs print to <code>stdout</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Sometimes you don&apos;t want that much logging, for example in a CI test. To suppress the detailed HTTP logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span> --quiet
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To also suppress the HTTP summary logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span> --very-quiet
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing-in-your-ci">Testing in Your CI</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Whether you use Travis, Circle, Jenkins, or anything else, we aim to make it painless to test in an automated environment.</p><p>Behind the scenes <code>zapier test</code> is doing a pretty standard <code>npm test</code> with <a href="https://www.npmjs.com/package/mocha">mocha</a> as the backend.</p><p>This makes it pretty straightforward to integrate into your testing interface. If you&apos;d like to test with <a href="https://travis-ci.com/">Travis CI</a> for example - the <code>.travis.yml</code> would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-yaml"><span class="hljs-attr">language:</span> <span class="hljs-string">node_js</span>
<span class="hljs-attr">node_js:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;v8.10.0&quot;</span>
<span class="hljs-attr">before_script:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">zapier-platform-cli</span>
<span class="hljs-attr">script:</span> <span class="hljs-string">CLIENT_ID=1234</span> <span class="hljs-string">CLIENT_SECRET=abcd</span> <span class="hljs-string">zapier</span> <span class="hljs-string">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can substitute <code>zapier test</code> with <code>npm test</code>, or a direct call to <code>node_modules/mocha/bin/mocha</code>. Also, we generally recommend putting the environment variables into whatever configuration screen Jenkins or Travis provides!</p><p>As an alternative to reading the deploy key from root (the default location), you may set the <code>ZAPIER_DEPLOY_KEY</code> environment variable to run privileged commands without the human input needed for <code>zapier login</code>. We suggest encrypting your deploy key in whatever manner you CI provides (such as <a href="https://docs.travis-ci.com/user/environment-variables/#Defining-encrypted-variables-in-.travis.yml">these instructions</a>, for Travis).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-npm-modules">Using <code>npm</code> Modules</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Use <code>npm</code> modules just like you would use them in any other node app, for example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">npm install --save jwt
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then <code>package.json</code> will be updated, and you can use them like anything else:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;jwt&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>During the <code>zapier build</code> or <code>zapier push</code> step - we&apos;ll copy all your code to <code>/tmp</code> folder and do a fresh re-install of modules.</p><blockquote>
<p>Note: If your package isn&apos;t being pushed correctly (IE: you get &quot;Error: Cannot find module &apos;whatever&apos;&quot; in production), try adding the <code>--disable-dependency-detection</code> flag to <code>zapier push</code>.</p>
</blockquote><blockquote>
<p>Note 2: You can also try adding a &quot;includeInBuild&quot; array property (with paths to include, which will be evaluated to RegExp, with a case insensitive flag) to your <code>.zapierapprc</code> file, to make it look like:</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-json">{
  <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">&quot;key&quot;</span>: <span class="hljs-string">&quot;App1&quot;</span>,
  <span class="hljs-attr">&quot;includeInBuild&quot;</span>: [
    <span class="hljs-string">&quot;test.txt&quot;</span>,
    <span class="hljs-string">&quot;testing.json&quot;</span>
  ]
}

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Warning: do not use compiled libraries unless you run your build on the AWS AMI <code>ami-4fffc834</code>, or follow the Docker instructions below.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="building-native-packages-with-docker">Building Native Packages with Docker</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Unfortunately if you are developing on a macOS or Windows box you won&apos;t be able to build native libraries locally. If you try and push locally build native modules, you&apos;ll get runtime errors during usage. However, you can use Docker and Docker Compose to do this in a pinch. Make sure you have all the necessary Docker programs installed and follow along.</p><p>First, create your <code>Dockerfile</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> amazonlinux:<span class="hljs-number">2017.03</span>.<span class="hljs-number">1.20170812</span>

<span class="hljs-keyword">RUN</span><span class="bash"> yum install zip findutils wget gcc44 gcc-c++ libgcc44 cmake -y</span>

<span class="hljs-keyword">RUN</span><span class="bash"> wget https://nodejs.org/dist/v8.10.0/node-v8.10.0.tar.gz &amp;&amp; \
    tar -zxvf node-v8.10.0.tar.gz &amp;&amp; \
    <span class="hljs-built_in">cd</span> node-v8.10.0 &amp;&amp; \
    ./configure &amp;&amp; \
    make &amp;&amp; \
    make install &amp;&amp; \
    <span class="hljs-built_in">cd</span> .. &amp;&amp; \
    rm -rf node-v8.10.0 node-v8.10.0.tar.gz</span>

<span class="hljs-keyword">RUN</span><span class="bash"> npm i -g zapier-platform-cli</span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And finally, create your <code>docker-compose.yml</code> file:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-yml"><span class="hljs-attr">version:</span> <span class="hljs-string">&apos;3.4&apos;</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">pusher:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">.:/app</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">node_modules:/app/node_modules:delegated</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">~/.zapierrc:/root/.zapierrc</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">&apos;bash -c &quot;npm i &amp;&amp; zapier push&quot;&apos;</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">ZAPIER_DEPLOY_KEY:</span> <span class="hljs-string">${ZAPIER_DEPLOY_KEY}</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">node_modules:</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: watch out for your <code>package-lock.json</code> file, if it exists for local install it might incorrectly pin a native version.</p>
</blockquote><p>Now you should be able to run <code>docker-compose run pusher</code> and see the build and push successfully complete!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-transpilers">Using Transpilers</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We do not yet support transpilers out of the box, but if you would like to use <code>babel</code> or similar, we recommend creating a custom wrapper on <code>zapier push</code> like this in your <code>package.json</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-json">{
  <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;zapier-dev&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib --watch&quot;</span>,
    <span class="hljs-attr">&quot;zapier-push&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib &amp;&amp; zapier push&quot;</span>
  }
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then you can have your fancy ES7 code in <code>src/*</code> and a root <code>index.js</code> like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./lib&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And work with commands like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># watch and recompile</span>
npm run zapier-dev

<span class="hljs-comment"># tests should work fine</span>
zapier <span class="hljs-built_in">test</span>

<span class="hljs-comment"># every build ensures a fresh build</span>
npm run zapier-push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are a lot of details left out - check out the full example app for a working setup.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/master/example-apps/babel">https://github.com/zapier/zapier-platform/tree/master/example-apps/babel</a> for a working example app using Babel.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="example-apps">Example Apps</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>See <a href="https://github.com/zapier/zapier-platform/wiki/Example-Apps">the wiki</a> for a full list of working examples (and installation instructions).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="faqs">FAQs</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&apos;t Zapier support newer versions of Node.js?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We run your code on AWS Lambda, which only supports a few <a href="https://docs.aws.amazon.com/lambda/latest/dg/programming-model.html">versions</a> of Node (the latest of which is <code>v8.10.0</code>. As that updates, so too will we.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Update your <code>zapier-platform-core</code> dependency in <code>package.json</code>.  Each major version ties to a specific version of Node.js. You can find the mapping <a href="https://github.com/zapier/zapier-platform/blob/master/packages/cli/src/version-store.js">here</a>. We only support the version(s) supported by <a href="https://docs.aws.amazon.com/lambda/latest/dg/programming-model.html">AWS Lambda</a>.</p><p><strong>IMPORTANT CAVEAT</strong>: AWS periodically deprecates Node versions as they reach EOL. They announce this<a href="https://aws.amazon.com/blogs/developer/node-js-6-is-approaching-end-of-life-upgrade-your-aws-lambda-functions-to-the-node-js-10-lts/">on their blog</a>. Similar info and dates are available on <a href="https://github.com/nodejs/Release">github</a>. Well before this date, we&apos;ll have a version of <code>core</code> that targets the newer Node version.</p><p>If you don&apos;t upgrade before the cutoff date, there&apos;s a chance that AWS will throw an error when attempting to run your app&apos;s code. If that&apos;s the case, we&apos;ll instead run it under the oldest Node version still supported. All that is to say, <strong>we may run your code on a newer version of Node.js than you intend</strong> if you don&apos;t update your app&apos;s dependencies periodically.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will see both <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Expression_interpolation">template literal placeholders</a> <code>${var}</code> and (double) &quot;curlies&quot; <code>{{var}}</code> used in examples.</p><p>In general, use <code>${var}</code> within functions and use <code>{{var}}</code> anywhere else.</p><p>Placeholders get evaluated as soon as the line of code is evaluated. This means that if you use <code>${process.env.VAR}</code> in a trigger configuration, <code>zapier push</code> will substitute it with your local environment&apos;s value for <code>VAR</code> when it builds your app and the value set via <code>zapier env</code> will not be used.</p><blockquote>
<p>If you&apos;re not familiar with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a>, know that <code>const val = &quot;a&quot; + b + &quot;c&quot;</code> is essentially the same as <code>const val = `a${b}c`</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Not natively, but it can! Users have reported that the following <code>npm</code> modules are compatible with the CLI Platform:</p><ul>
<li><a href="https://github.com/jhuckaby/pixl-xml">pixl-xml</a></li>
<li><a href="https://github.com/Leonidas-from-XIV/node-xml2js">xml2js</a></li>
<li><a href="https://github.com/NaturalIntelligence/fast-xml-parser">fast-xml-parser</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> xml = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;pixl-xml&apos;</span>);

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">afterResponse</span>: [
    <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
      response.xml = xml.parse(response.content);
      <span class="hljs-keyword">return</span> response;
    }
  ]
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Yes, though there are caveats. Your entire function only gets 30 seconds to run. HTTP requests are costly, so paging through a list may time out (which you should avoid at all costs).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// some async call</span>
<span class="hljs-keyword">const</span> makeCall = <span class="hljs-function">(<span class="hljs-params">z, start, limit</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">_start</span>: start,
      <span class="hljs-attr">_limit</span>: limit
    }
  });
};

<span class="hljs-comment">// triggers on paging with a certain tag</span>
<span class="hljs-keyword">const</span> performPaging = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> limit = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// array of promises</span>
  <span class="hljs-keyword">const</span> promises = [];

  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">5</span>) {
    promises.push(makeCall(z, start, limit));
    start += limit;
    i += <span class="hljs-number">1</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(promises).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-comment">// res is an array of responses</span>
    <span class="hljs-keyword">const</span> results = res.map(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.json); <span class="hljs-comment">// array of arrays of js objects</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.concat.apply([], results); <span class="hljs-comment">// flatten array</span>
  });
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;paging&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Paging&apos;</span>,

  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Get Paging&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers on a new paging.&apos;</span>
  },

  <span class="hljs-attr">operation</span>: {
    <span class="hljs-attr">inputFields</span>: [],
    <span class="hljs-attr">perform</span>: performPaging
  }
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you need to do more requests conditionally based on the results of an HTTP call (such as the &quot;next URL&quot; param or similar value), using <code>async/await</code> (as shown in the example below) is a good way to go. If you go this route, only page as far as you need to. Keep an eye on the polling <a href="https://zapier.com/developer/documentation/v2/deduplication/">guidelines</a>, namely the part about only iterating until you hit items that have probably been seen in a previous poll.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// a hypothetical API where payloads are big so we want to heavily limit how much comes back</span>
<span class="hljs-comment">// we want to only return items created in the last hour</span>

<span class="hljs-keyword">const</span> asyncExample = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> limit = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> twoHourMilliseconds = <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">2</span> * <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">const</span> hoursAgo = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() - twoHourMilliseconds;

  <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">_start</span>: start,
      <span class="hljs-attr">_limit</span>: limit
    }
  });

  <span class="hljs-keyword">let</span> results = response.json;

  <span class="hljs-comment">// keep paging until the last item was created over two hours ago</span>
  <span class="hljs-comment">// then we know we almost certainly haven&apos;t missed anything and can let</span>
  <span class="hljs-comment">//   deduper handle the rest</span>

  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(results[results.length - <span class="hljs-number">1</span>].createdAt) &gt; hoursAgo) {
    start += limit; <span class="hljs-comment">// next page</span>

    response = <span class="hljs-keyword">await</span> z.request({
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">_start</span>: start,
        <span class="hljs-attr">_limit</span>: limit
      }
    });

    results = results.concat(response.json);
  }

  <span class="hljs-keyword">return</span> results;
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To understand search-powered fields, we have to have a good understanding of dynamic dropdowns.</p><p>When users are selecting specific resources (for instance, a Google Sheet), it&apos;s important they&apos;re able to select the exact sheet they want. Instead of referencing the sheet by name (which may change), we match via <code>id</code> instead. Rather than directing the user copy and paste an id for every item they might encounter, there is the notion of a <strong>dynamic dropdown</strong>. A dropdown is a trigger that returns a list of resources. It can pull double duty and use its results to power another trigger, search, or action in the same app.  It provides a list of ids with labels that show the item&apos;s name:</p><p><img src="https://cdn.zapier.com/storage/photos/fb56bdc2aab91504be0e51800bec4d64.png" alt></p><p>The field&apos;s value reaches your app as an id. You define this connection with the <code>dynamic</code> property, which is a string: <code>trigger_key.id_key.label_key</code>. This approach works great if the user setting up the Zap always wants the Zap to use the same spreadsheet. They specify the id during setup and the Zap runs happily.</p><p><strong>Search fields</strong> take this connection a step further. Rather than set the spreadsheet id at setup, the user could precede the action with a search field to make the id dynamic. For instance, let&apos;s say you have a different spreadsheet for every day of the week. You could build the following zap:</p><ol>
<li>Some Trigger</li>
<li>Calculate what day of the week it is today (Code)</li>
<li>Find the spreadsheet that matches the day from Step 2</li>
<li>Update the spreadsheet (with the id from step 3) with some data</li>
</ol><p>If the connection between steps 3 and 4 is a common one, you can indicate that in your field by specifying <code>search</code> as a <code>search_key.id_key</code>. When paired <strong>with a dynamic dropdown</strong>, this will add a button to the editor that will add the search step to the user&apos;s Zap and map the id field correctly.</p><p><img src="https://cdn.zapier.com/storage/photos/d263fd3a56cf8108cb89195163e7c9aa.png" alt></p><p>This is paired most often with &quot;update&quot; actions, where a required parameter will be a resource id.</p><p><a id="paging"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&apos;s the deal with pagination? When is it used and how does it work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Paging is <strong>only used when a trigger is part of a dynamic dropdown</strong>. Depending on how many items exist and how many are returned in the first poll, it&apos;s possible that the resource the user is looking for isn&apos;t in the initial poll. If they hit the &quot;see more&quot; button, we&apos;ll increment the value of <code>bundle.meta.page</code> and poll again.</p><p>Paging is a lot like a regular trigger except the range of items returned is dynamic. The most common example of this is when you can pass a <code>offset</code> parameter:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">(z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> promise = z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/list.json&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">limit</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">offset</span>: <span class="hljs-number">100</span> * bundle.meta.page
    }
  });
  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json);
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If your API uses cursor-based paging instead of an offset, you can use <code>z.cursor.get</code> and <code>z.cursor.set</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// the perform method of our trigger</span>
<span class="hljs-comment">// ensure operation.canPaginate is true!</span>

<span class="hljs-keyword">const</span> performWithoutAsync = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve()
    .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (bundle.meta.page === <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// first page, no need to fetch a cursor</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> z.cursor.get(); <span class="hljs-comment">// Promise&lt;string | null&gt;</span>
      }
    })
    .then(<span class="hljs-function"><span class="hljs-params">cursor</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> z.request(
        <span class="hljs-string">&apos;https://5ae7ad3547436a00143e104d.mockapi.io/api/recipes&apos;</span>,
        {
          <span class="hljs-attr">params</span>: { <span class="hljs-attr">cursor</span>: cursor } <span class="hljs-comment">// if cursor is null, it&apos;s ignored here</span>
        }
      );
    })
    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-comment">// need to save the cursor and return a promise, but also need to pass the data along</span>
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([response.items, z.cursor.set(response.nextPage)]);
    })
    .then(<span class="hljs-function">(<span class="hljs-params">[items <span class="hljs-regexp">/* null */</span>]</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> items;
    });
};

<span class="hljs-comment">// ---------------------------------------------------</span>

<span class="hljs-keyword">const</span> performWithAsync = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">let</span> cursor;
  <span class="hljs-keyword">if</span> (bundle.meta.page) {
    cursor = <span class="hljs-keyword">await</span> z.cursor.get(); <span class="hljs-comment">// string | null</span>
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(
    <span class="hljs-string">&apos;https://5ae7ad3547436a00143e104d.mockapi.io/api/recipes&apos;</span>,
    {
      <span class="hljs-comment">// if cursor is null, it&apos;s sent as an empty query</span>
      <span class="hljs-comment">//   param and should be ignored by the server</span>
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">cursor</span>: cursor }
    }
  );

  <span class="hljs-comment">// we successfully got page 1, should store the cursor in case the user wants page 2</span>
  <span class="hljs-keyword">await</span> z.cursor.set(response.nextPage);

  <span class="hljs-keyword">return</span> response.items;
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Cursors are stored per-zap and last about an hour. Per the above, make sure to only include the cursor if <code>bundle.meta.page !== 0</code>, so you don&apos;t accidentally reuse a cursor from a previous poll.</p><p>Lastly, you need to set <code>canPaginate</code> to <code>true</code> in your polling definition (per the <a href="https://github.com/zapier/zapier-platform/blob/master/packages/schema/docs/build/schema.md#basicpollingoperationschema">schema</a>) for the <code>z.cursor</code> methods to work as expected.</p><p><a id="dedup"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-does-deduplication-work">How does deduplication work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Each time a polling Zap runs, Zapier needs to decide which of the items in the response should trigger the zap. To do this, we compare the <code>id</code>s to all those we&apos;ve seen before, trigger on new objects, and update the list of seen <code>id</code>s. When a Zap is turned on, we initialize the list of seen <code>id</code>s with a single poll. When it&apos;s turned off, we clear that list. For this reason, it&apos;s important that calls to a polling endpoint always return the newest items.</p><p>For example, the initial poll returns objects 4, 5, and 6 (where a higher <code>id</code> is newer). If a later poll increases the limit and returns objects 1-6, then 1, 2, and 3 will be (incorrectly) treated like new objects.</p><p>There&apos;s a more in-depth explanation <a href="https://zapier.com/developer/documentation/v2/deduplication/">here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&apos;t provide an explicit <code>id</code> field?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For deduplication to work, we need to be able to identify and use a unique field. In older, legacy Zapier Web Builder apps, we guessed if <code>id</code> wasn&apos;t present. In order to ensure we don&apos;t guess wrong, we now require that the developers send us an <code>id</code> field. If your objects have a differently-named unique field, feel free to adapt this snippet and ensure this test passes:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">let</span> items = z.JSON.parse(response.content).items;
items.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
  item.id = item.contactId;
})

<span class="hljs-keyword">return</span> items;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="node-6-no-longer-supported">Node 6 No Longer Supported</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;re seeing errors like the following:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>InvalidParameterValueException An error occurred (InvalidParameterValueException) when calling the CreateFunction operation: The runtime parameter of nodejs6.10 is no longer supported for creating or updating AWS Lambda functions. We recommend you use the new runtime (nodejs8.10) while creating or updating functions.
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>then you need to update your <code>zapier-platform-core</code> dependency to a non-deprecated version that uses a newer version of Node.js. Complete the following instructions as soon as possible:</p><ol>
<li>Edit <code>package.json</code> to depend on a version of <code>zapier-platform-core</code> &gt;= <code>7.0.0</code>. (8.x is the latest) There&apos;s a list of all breaking changes (marked with an :exclamation:) in the <a href="https://github.com/zapier/zapier-platform/blob/master/CHANGELOG.md">changelog</a>.</li>
<li>Increment the <code>version</code> property in <code>package.json</code></li>
<li>Ensure you&apos;re using version <code>v8.10.0</code> (or greater) of node locally (<code>node -v</code>). Use <a href="https://github.com/nvm-sh/nvm">nvm</a> to use a different one if need be.</li>
<li>Run <code>rm -rf node_modules &amp;&amp; npm i</code> to get a fresh copy of everything</li>
<li>Run <code>zapier test</code> to ensure your tests still pass</li>
<li>Run <code>zapier push</code></li>
<li>Run <code>zapier promote YOUR_NEW_VERSION</code> (from step 2)</li>
<li>Migrate your users from the previous version (<code>zapier migrate OLD_VERSION NEW_VERSION</code>)</li>
</ol><p><a id="analytics"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="what-analytics-are-collected">What Analytics are Collected?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Starting with version <code>8.4.0</code>, Zapier collects information about each invocation of the CLI tool.</p><p>This data is collected purely to improve the CLI experience and will <strong>never</strong> be used for advertising or any non-product purpose. There are 3 collection modes that are set on a per-computer basis.</p><p><strong>Anonymous</strong></p><p>When you run a command with analytics in <code>anonymous</code> mode, the following data is sent to Zapier:</p><ul>
<li>which command you ran</li>
<li>if that command is a known command</li>
<li>how many arguments you supplied (but not the contents of the arguments)</li>
<li>which flags you used (but not their contents)</li>
<li>the version of CLI that you&apos;re using</li>
</ul><p><strong>Enabled</strong> (the default)</p><p>When analytics are fully <code>enabled</code>, the above is sent, plus:</p><ul>
<li>your operating system (the result of calling <a href="https://nodejs.org/api/process.html#process_process_platform"><code>process.platform</code></a>)</li>
<li>your Zapier user id</li>
</ul><p><strong>Disabled</strong></p><p>Lastly, analytics can be <code>disabled</code> entirely, either by running <code>zapier analytics --mode disabled</code> or setting the <code>DISABLE_ZAPIER_ANALYTICS</code> environment variable to <code>1</code>.</p><p>We take great care not to collect any information about your filesystem or anything otherwise secret. You can see exactly what&apos;s being collecting at runtime by prefixing any command with <code>DEBUG=zapier:analytics</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="whats-the-difference-between-an-app-and-an-integration">What&apos;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We&apos;re in the process of doing some renaming across our Zapier marketing terms. Eventually we&apos;ll use &quot;integration&quot; everywhere. Until then, know that these terms are interchangeable and describe the code that you write that connects your API to Zapier.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="command-line-tab-completion">Command Line Tab Completion</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We have provided two tab completion scripts to make it easier to use the Zapier Platform CLI, for zsh and bash.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zsh-completion-script">Zsh Completion Script</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To use the zsh completion script, first setup support for completion, if you haven&apos;t already done so. This example assumes your completion scripts are in <code>~/.zsh/completion</code>. Adjust accordingly if you put them somewhere else:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-zsh"><span class="hljs-comment"># add custom completion scripts</span>
fpath=(~/.zsh/completion <span class="hljs-variable">$fpath</span>)

<span class="hljs-comment"># compsys initialization</span>
<span class="hljs-built_in">autoload</span> -U compinit
compinit
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next download our completion script to your completions directory:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-zsh"><span class="hljs-built_in">cd</span> ~/.zsh/completion
curl https://raw.githubusercontent.com/zapier/zapier-platform/master/packages/cli/goodies/zsh/_zapier -O
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Finally, restart your shell and start hitting TAB with the <code>zapier</code> command!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bash-completion-script">Bash Completion Script</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To use the bash completion script, first download the completion script. The example assumes your completion scripts are in <code>~/.bash_completion.d</code> directory. Adjust accordingly if you put them somewhere else.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">cd</span> ~/.bash_completion.d
curl https://raw.githubusercontent.com/zapier/zapier-platform/master/packages/cli/goodies/bash/_zapier -O
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next source the script from your <code>~/.bash_profile</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">source</span> ~/.bash_completion.d/_zapier
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Finally, restart your shell and start hitting TAB with the <code>zapier</code> command!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="the-zapier-platform-packages">The Zapier Platform Packages</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier Platform consists of 3 npm packages that are released simultaneously as a trio.</p><ul>
<li><p><a href="https://github.com/zapier/zapier-platform/tree/master/packages/cli"><code>zapier-platform-cli</code></a> is the code that powers the <code>zapier</code> command. You use it most commonly with the <code>test</code>, <code>scaffold</code>, and <code>push</code> commands. It&apos;s installed with <code>npm install -g zapier-platform-cli</code> and does not correspond to a particular app.</p>
</li>
<li><p><a href="https://github.com/zapier/zapier-platform/tree/master/packages/core"><code>zapier-platform-core</code></a> is what allows your app to interact with Zapier. It holds the <code>z</code> object and app tester code. Your app depends on a specific version of <code>zapier-platform-core</code> in the <code>package.json</code> file. It&apos;s installed via <code>npm install</code> along with the rest of your app&apos;s dependencies.</p>
</li>
<li><p><a href="https://github.com/zapier/zapier-platform/tree/master/packages/clischema"><code>zapier-platform-schema</code></a> enforces app structure behind the scenes. It&apos;s a dependency of <code>core</code>, so it will be installed automatically.</p>
</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="updating">Updating</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier platform and its tools are under active development. While you don&apos;t need to install every release, we release new versions because they are better than the last. We do our best to adhere to <a href="https://semver.org/">Semantic Versioning</a> wherein we won&apos;t break your code unless there&apos;s a <code>major</code> release. Otherwise, we&apos;re just fixing bugs (<code>patch</code>) and adding features (<code>minor</code>).</p><p>Barring unforeseen circumstances, all released platform versions will continue to work for the forseeable future. While you never <em>have</em> to upgrade your app&apos;s <code>platform-core</code> dependency, we recommend keeping an eye on the <a href="https://github.com/zapier/zapier-platform/blob/master/CHANGELOG.md">changelog</a> to see what new features and bux fixes are available.</p><p>The most recently released version of <code>cli</code> and <code>core</code> is <code>8.4.2</code>. You can see the versions you&apos;re working with by running <code>zapier -v</code>.</p><p>To update <code>cli</code>, run <code>npm install -g zapier-platform-cli</code>.</p><p>To update the version of <code>core</code> your app depends on, set the <code>zapier-platform-core</code> dependency in your <code>package.json</code> to a version listed <a href="https://www.npmjs.com/package/zapier-platform-core?activeTab=versions">here</a> and run <code>npm install</code>.</p><p>For maximum compatibility, keep the versions of <code>cli</code> and <code>core</code> in sync.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="development-of-the-cli">Development of the CLI</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This section is only relevant if you&apos;re editing the <code>zapier-platform-cli</code> package itself.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="commands">Commands</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><code>export ZAPIER_BASE_ENDPOINT=&apos;https://localhost:8001&apos;</code> if you&apos;re building against a local dev environment</li>
<li><code>npm install</code> for getting started</li>
<li><code>npm run build</code> for updating <code>./lib</code> from <code>./src</code></li>
<li><code>npm run watch</code> for automatically building as you work</li>
<li><code>npm test</code> for running tests (also runs <code>npm run build</code>)</li>
<li><code>npm link</code> (while in this project&apos;s directory) and then use <code>zapier</code> command elsewhere</li>
<li><code>npm run test-convert</code> for running integration tests for the <code>zapier convert</code> command</li>
<li><code>npm run docs</code> for updating docs</li>
<li><code>npm run gen-completions</code> for updating the auto complete scripts</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="publishing-of-the-cli-after-merging">Publishing of the CLI (after merging)</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><code>npm version [patch|minor|major]</code> will pull, test, update docs, increment version in package.json, push tags, and publish to npm</li>
<li><code>npm run validate-templates</code> for validating the example apps</li>
<li><code>npm run set-template-versions VERSION</code> for updating the platform-core version in the example app repos to <code>VERSION</code></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="get-help">Get Help!</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can get help by either emailing <a href="mailto:partners@zapier.com">partners@zapier.com</a> or by <a href="https://join.slack.com/t/zapier-platform/shared_invite/enQtNTg1MjM5NjMzNTI3LTUyYWJjM2E1NTQ3NjViMGY0MzQ1NWJiMDJmNjcyNTJjMWRlOTg4MTNjOWEwNDFlNGExODU5OTgzNWM3MzZlMjk">joining our Slack team here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div>
    </div>

    <script type="text/javascript" src="./lib/lodash.custom.min.js"></script>
    <script type="text/javascript" src="./docs.js"></script>

  </body>
</html>
