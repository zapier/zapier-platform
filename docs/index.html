<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K7GFJTV');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zapier Platform CLI Documentation</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/agate.min.css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="./docs.css">
    <style>body {
  font-family: 'Open Sans', Helvetica, arial, sans-serif;
  background-color: #fff;
  color: #5F6C72;
  font-size: 14px;
  font-weight: 400;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  position: relative; }

img {
  max-width: 100%; }

h1 {
  color: #354147;
  font-size: 28px;
  font-weight: 400;
  line-height: 1.3em;
  padding: 20px 0; }

h2 {
  color: #354147;
  font-size: 20px;
  line-height: 1.4em;
  font-weight: 600;
  padding: 1em 0; }

h3 {
  color: #354147;
  font-size: 15px;
  line-height: 1.5em;
  font-weight: 600;
  padding: 0 0 0.5em 0; }

h4 {
  color: #354147;
  font-size: 0.9em;
  letter-spacing: 1px;
  line-height: 1.2em;
  font-weight: 600;
  padding: 0 0 10px;
  text-transform: uppercase; }

a {
  color: #499DF3;
  text-decoration: none; }
  a:hover {
    text-decoration: underline; }

::-webkit-input-placeholder {
  color: #969EA2; }

:-moz-placeholder {
  color: #969EA2; }

::-moz-placeholder {
  color: #969EA2; }

:-ms-input-placeholder {
  color: #969EA2; }

p {
  line-height: 1.6em;
  margin: 0 0 15px; }

small {
  font-size: 13px; }

i, em {
  font-style: italic; }

strong {
  font-weight: 600; }

sup, sub, .sup {
  font-size: 13px;
  vertical-align: baseline;
  position: relative;
  top: -0.4em; }
  sup.small, sub.small, .sup.small {
    font-size: 10px; }

sub {
  top: 0.4em; }

pre {
  border: none;
  line-height: 20px;
  font-family: 'Consolas','Liberation Mono',Courier,monospace; }
  pre code {
    display: block;
    white-space: pre; /* no word wrap */
    padding: 10px;
    line-height: 1.7em; }

p code {
  word-break: break-all;
  display: inline; }

hr {
  color: #DADFE2;
  background: #DADFE2;
  border: 0;
  height: 1px; }

ul {
  line-height: 1.75em;
  margin: 0 0 20px; }

ol {
  line-height: 1.75em;
  list-style-type: decimal;
  list-style-position: inside;
  margin: 0 0 20px; }

blockquote {
  border-left: 3px solid #ff4a00;
  font-size: 14px;
  font-style: italic;
  line-height: 2em;
  margin: 30px 0;
  padding-left: 20px; }
  blockquote p {
    font-size: inherit;
    font-style: inherit;
    line-height: inherit; }

.docs-toc {
  height: 100%;
  width: 230px;
  position: fixed;
  padding: 40px 20px;
  overflow-y: scroll;
  overflow-x: hidden; }
  .docs-toc ul {
    margin: 0; 
    padding: 0 0 0 10px; }

.generated-by {
  font-size: 12px;
  color: #969EA2; }

.docs-main {}

.docs-code {
  /* see media queries */ }
  .docs-code pre {
    background: #354147;
    color: #ffffff;
    line-height: 20px;
    font-family: 'Consolas','Liberation Mono',Courier,monospace; }
    .docs-code pre code {
      display: block;
      padding: 10px;
      line-height: 1.7em; }

a code {
  color: #499DF3;
  background-color: #f2f4f9; }

/* targets bootstraps md width */

@media (min-width: 992px) {
  .row-height {
    display: table;
    table-layout: fixed;
    height: 100%;
    width: 100%; }
  .col-height {
    display: table-cell;
    float: none;
    height: 100%; }

  .docs-main {
    margin-left: 230px; }

  .docs-code {
    background: #5F6C72;
    color: #ffffff; }
}

@media (max-width: 992px) {
  .docs-toc {
    display: none; }
  .is-empty {
    display: none; }
}
</style>
  </head>
  <body>
    <!-- Header -->
    <div class="docs-header__platform">
      <div class="docs-header__container">
        <div class="docs-header__logo">
          <svg fill="none" height="32" viewBox="0 0 177 32" width="177" xmlns="http://www.w3.org/2000/svg"><path d="M82.8896 25.23C82.0692 25.23 81.3178 25.0805 80.6354 24.7815C79.9607 24.4748 79.3933 24.0071 78.9333 23.3784H78.7953C78.8873 24.1144 78.9333 24.8122 78.9333 25.4715V30.6584H77.0242V12.395H78.5768L78.8413 14.1202H78.9333C79.424 13.4301 79.9952 12.9317 80.6469 12.6251C81.2986 12.3184 82.0462 12.165 82.8896 12.165C84.5611 12.165 85.8492 12.7362 86.7539 13.8787C87.6663 15.0211 88.1225 16.6235 88.1225 18.686C88.1225 20.7562 87.6586 22.3663 86.7309 23.5164C85.8108 24.6588 84.5304 25.23 82.8896 25.23ZM82.6136 13.7866C81.3255 13.7866 80.3939 14.1432 79.8189 14.8562C79.2438 15.5693 78.9486 16.704 78.9333 18.2605V18.686C78.9333 20.4572 79.2285 21.7261 79.8189 22.4928C80.4092 23.2519 81.3562 23.6314 82.6596 23.6314C83.7483 23.6314 84.5994 23.1905 85.2128 22.3088C85.8338 21.4271 86.1444 20.2118 86.1444 18.663C86.1444 17.0912 85.8338 15.8875 85.2128 15.0517C84.5994 14.2083 83.733 13.7866 82.6136 13.7866ZM93.3784 25H91.4693V7.10463H93.3784V25ZM105.178 25L104.799 23.2059H104.707C104.078 23.9956 103.449 24.5323 102.821 24.816C102.2 25.092 101.421 25.23 100.486 25.23C99.2362 25.23 98.2548 24.908 97.5417 24.2639C96.8363 23.6199 96.4836 22.7037 96.4836 21.5152C96.4836 18.9697 98.5193 17.6356 102.591 17.5129L104.73 17.4439V16.6619C104.73 15.6728 104.515 14.9444 104.086 14.4767C103.664 14.0013 102.985 13.7636 102.05 13.7636C101 13.7636 99.8112 14.0857 98.4848 14.7297L97.8982 13.2691C98.5193 12.9317 99.1978 12.6672 99.9339 12.4755C100.678 12.2839 101.421 12.188 102.165 12.188C103.668 12.188 104.78 12.5215 105.5 13.1886C106.229 13.8556 106.593 14.9252 106.593 16.3973V25H105.178ZM100.865 23.6544C102.054 23.6544 102.985 23.3285 103.66 22.6768C104.343 22.0251 104.684 21.1127 104.684 19.9396V18.801L102.775 18.8815C101.257 18.9352 100.16 19.1729 99.4854 19.5946C98.8183 20.0086 98.4848 20.6565 98.4848 21.5382C98.4848 22.2283 98.6918 22.7535 99.1058 23.1139C99.5275 23.4742 100.114 23.6544 100.865 23.6544ZM114.609 23.6544C114.946 23.6544 115.272 23.6314 115.587 23.5854C115.901 23.5317 116.15 23.4781 116.334 23.4244V24.885C116.127 24.9847 115.82 25.0652 115.414 25.1265C115.015 25.1955 114.655 25.23 114.333 25.23C111.895 25.23 110.676 23.9458 110.676 21.3772V13.8787H108.87V12.9586L110.676 12.165L111.481 9.47382H112.585V12.395H116.242V13.8787H112.585V21.2967C112.585 22.0558 112.765 22.6385 113.125 23.0449C113.486 23.4512 113.98 23.6544 114.609 23.6544ZM124.546 13.8787H121.337V25H119.428V13.8787H117.174V13.0161L119.428 12.326V11.6245C119.428 8.52691 120.781 6.97813 123.488 6.97813C124.155 6.97813 124.937 7.1123 125.834 7.38066L125.339 8.91027C124.603 8.67259 123.975 8.55375 123.453 8.55375C122.732 8.55375 122.2 8.79526 121.855 9.2783C121.51 9.75367 121.337 10.5204 121.337 11.5785V12.395H124.546V13.8787ZM137.726 18.686C137.726 20.7408 137.208 22.3471 136.173 23.5049C135.138 24.655 133.708 25.23 131.883 25.23C130.756 25.23 129.756 24.9655 128.882 24.4365C128.008 23.9074 127.333 23.1484 126.857 22.1593C126.382 21.1702 126.144 20.0125 126.144 18.686C126.144 16.6312 126.658 15.0326 127.686 13.8902C128.713 12.7401 130.139 12.165 131.964 12.165C133.727 12.165 135.127 12.7516 136.162 13.9247C137.204 15.0977 137.726 16.6849 137.726 18.686ZM128.123 18.686C128.123 20.2961 128.445 21.5229 129.089 22.3663C129.733 23.2097 130.68 23.6314 131.929 23.6314C133.179 23.6314 134.126 23.2135 134.77 22.3778C135.422 21.5344 135.748 20.3038 135.748 18.686C135.748 17.0836 135.422 15.8683 134.77 15.0402C134.126 14.2045 133.171 13.7866 131.906 13.7866C130.657 13.7866 129.714 14.1968 129.077 15.0172C128.441 15.8376 128.123 17.0606 128.123 18.686ZM146.834 12.165C147.394 12.165 147.896 12.211 148.341 12.303L148.077 14.0742C147.555 13.9592 147.095 13.9017 146.696 13.9017C145.677 13.9017 144.803 14.3157 144.074 15.1437C143.354 15.9718 142.993 17.0031 142.993 18.2375V25H141.084V12.395H142.66L142.878 14.7297H142.97C143.438 13.9093 144.001 13.2768 144.661 12.8321C145.32 12.3874 146.045 12.165 146.834 12.165ZM166.766 25V16.7999C166.766 15.7955 166.551 15.0441 166.121 14.5457C165.692 14.0397 165.025 13.7866 164.12 13.7866C162.932 13.7866 162.054 14.1278 161.487 14.8102C160.919 15.4926 160.636 16.543 160.636 17.9615V25H158.726V16.7999C158.726 15.7955 158.512 15.0441 158.082 14.5457C157.653 14.0397 156.982 13.7866 156.07 13.7866C154.874 13.7866 153.996 14.147 153.436 14.8677C152.884 15.5808 152.608 16.7539 152.608 18.387V25H150.699V12.395H152.251L152.562 14.1202H152.654C153.014 13.5068 153.52 13.0276 154.172 12.6826C154.831 12.3375 155.567 12.165 156.38 12.165C158.351 12.165 159.639 12.8781 160.245 14.3042H160.337C160.712 13.6448 161.257 13.1234 161.97 12.7401C162.683 12.3567 163.495 12.165 164.408 12.165C165.834 12.165 166.9 12.533 167.605 13.2691C168.318 13.9975 168.675 15.1667 168.675 16.7769V25H166.766Z" fill="#dadfe2"></path><path d="M41.4582 13.8944H39.7361C39.7007 13.7517 39.6743 13.5861 39.6568 13.3983C39.6217 13.0325 39.6217 12.6643 39.6568 12.2986C39.6743 12.1111 39.7007 11.9457 39.7361 11.8022H44.0279V25.5626C43.8131 25.6005 43.5965 25.6272 43.3789 25.6427C43.1628 25.6595 42.9462 25.6683 42.7295 25.6693C42.5219 25.6679 42.3144 25.659 42.1074 25.6427C41.8899 25.6271 41.6734 25.6002 41.4586 25.5622V13.8938V13.8941L41.4582 13.8944ZM56.3991 17.3549C56.3991 16.854 56.3328 16.3758 56.2007 15.9194C56.068 15.4637 55.8732 15.066 55.6178 14.726C55.3612 14.3866 55.0347 14.1136 54.6373 13.9081C54.24 13.7024 53.7675 13.5994 53.22 13.5994C52.1428 13.5994 51.317 13.9307 50.7431 14.5921C50.1692 15.2536 49.8205 16.1745 49.6967 17.3549H56.3992H56.3991ZM49.6703 19.3396C49.7057 20.8417 50.0898 21.9417 50.8227 22.6387C51.5554 23.336 52.6373 23.6852 54.0679 23.6852C55.3214 23.6852 56.5136 23.4613 57.6439 23.0143C57.7849 23.2825 57.8996 23.609 57.988 23.9934C58.0748 24.3678 58.128 24.7492 58.1469 25.1333C57.5645 25.3843 56.9238 25.5712 56.2266 25.6967C55.5286 25.8215 54.756 25.8844 53.9088 25.8844C52.6721 25.8844 51.6123 25.7095 50.7297 25.3612C49.8465 25.0121 49.118 24.5203 48.544 23.8858C47.9702 23.2512 47.5505 22.5 47.2856 21.6326C47.0209 20.7656 46.8881 19.8132 46.8881 18.7761C46.8881 17.7568 47.0161 16.8045 47.2722 15.9191C47.5279 15.0345 47.9217 14.2654 48.4509 13.6127C48.981 12.9598 49.6475 12.4414 50.4512 12.0569C51.2544 11.6725 52.2036 11.48 53.299 11.48C54.2349 11.48 55.0561 11.6411 55.7628 11.9629C56.4689 12.2847 57.0607 12.7274 57.5377 13.2907C58.0144 13.8541 58.3764 14.5247 58.6238 15.3021C58.8708 16.0803 58.9949 16.9251 58.9949 17.8373C58.9949 18.0877 58.9855 18.3513 58.968 18.6283C58.9535 18.8655 58.9359 19.1024 58.9152 19.3391H49.6698L49.6701 19.3395L49.6703 19.3396ZM61.884 11.8022C62.0683 11.7683 62.2539 11.7415 62.4403 11.7219C62.6164 11.7044 62.8023 11.6953 62.9966 11.6953C63.1909 11.6953 63.3849 11.7044 63.5794 11.7219C63.7736 11.74 63.9503 11.7669 64.1093 11.8022C64.1618 12.0705 64.2149 12.4241 64.2677 12.8617C64.3206 13.2999 64.3475 13.6707 64.3475 13.9748C64.7183 13.3671 65.2084 12.8392 65.8175 12.392C66.4269 11.9453 67.2083 11.7214 68.1618 11.7214C68.3031 11.7214 68.4487 11.7262 68.5989 11.7352C68.7274 11.7421 68.8559 11.7553 68.983 11.775C69.0181 11.9362 69.0452 12.1063 69.0626 12.2849C69.08 12.4635 69.0889 12.6514 69.0889 12.848C69.0889 13.0627 69.0758 13.2865 69.0494 13.5184C69.0239 13.7426 68.993 13.9662 68.9568 14.1889C68.8137 14.1532 68.6668 14.1352 68.5194 14.1353H68.1616C67.6848 14.1353 67.23 14.2024 66.7973 14.3363C66.3643 14.4707 65.976 14.7077 65.6316 15.0471C65.2876 15.3871 65.0136 15.8521 64.8109 16.4423C64.6073 17.0324 64.506 17.7924 64.506 18.7221V25.5622C64.2912 25.6 64.0745 25.627 63.8569 25.6425C63.6188 25.6604 63.4023 25.6691 63.2081 25.6691C62.9915 25.6682 62.775 25.6594 62.559 25.6425C62.3327 25.6259 62.1072 25.5991 61.8833 25.5624V11.8023L61.884 11.8022ZM43.2914 4.4547C43.2915 4.77575 43.2342 5.09417 43.1224 5.39461C42.8256 5.50779 42.5111 5.5658 42.1939 5.56586H42.19C41.8728 5.5659 41.5583 5.50794 41.2615 5.39475C41.1495 5.09426 41.0922 4.77573 41.0922 4.45456V4.45037C41.0922 4.11948 41.1522 3.80259 41.2608 3.51018C41.5576 3.39684 41.8723 3.33886 42.1896 3.33907H42.1932C42.5201 3.33907 42.833 3.39979 43.1218 3.51018C43.2336 3.81068 43.2909 4.12921 43.2908 4.45037V4.45456H43.2912L43.2914 4.4547ZM46.5284 3.71039H43.9616L45.7764 1.87268C45.4911 1.46687 45.1407 1.11221 44.7398 0.823365L42.9247 2.66107V0.0619797C42.6834 0.0208725 42.439 0.000141251 42.1943 0H42.1896C41.9406 0 41.6967 0.021546 41.459 0.0619797V2.66107L39.6435 0.823225C39.4436 0.967313 39.2559 1.12812 39.0825 1.30395L39.0817 1.30479C38.9083 1.48049 38.7496 1.67049 38.6073 1.87282L40.4228 3.71039H37.8555C37.8555 3.71039 37.7944 4.19867 37.7944 4.45107V4.45414C37.7944 4.70654 37.8155 4.9539 37.8556 5.19468H40.423L38.6072 7.03211C38.8928 7.43787 39.2432 7.79259 39.6439 8.08171L41.4592 6.24414V8.84337C41.6966 8.88367 41.9401 8.90493 42.1888 8.90521H42.195C42.4395 8.90498 42.6835 8.8843 42.9246 8.84337V6.24414L44.74 8.08213C44.9399 7.93791 45.1277 7.77711 45.3014 7.6014H45.3018C45.4751 7.42551 45.6337 7.23537 45.776 7.03295L43.9612 5.19482H46.5286C46.5684 4.95418 46.5894 4.70766 46.5894 4.45582V4.44939C46.5894 4.20175 46.5689 3.95481 46.5286 3.71067V3.71039H46.5284ZM0 25.1873L7.15269 13.9212H0.847589C0.794805 13.5994 0.768413 13.2421 0.768413 12.8485C0.768413 12.4732 0.795219 12.1241 0.848142 11.802H11.0471L11.1798 12.1514L3.97416 23.4437H10.7292C10.7821 23.8015 10.8088 24.1678 10.8088 24.5431C10.8088 24.9013 10.7822 25.2409 10.7293 25.5626H0.132652L0 25.1868V25.1873ZM20.6365 19.098C20.3716 19.0626 20.0359 19.0272 19.6298 18.991C19.2236 18.9556 18.8792 18.9374 18.5971 18.9374C17.5019 18.9374 16.6674 19.1431 16.0938 19.5544C15.5194 19.966 15.233 20.5915 15.233 21.432C15.233 21.9684 15.3297 22.3887 15.5241 22.6926C15.7181 22.997 15.9612 23.229 16.2526 23.39C16.5442 23.5509 16.8661 23.6494 17.2192 23.6852C17.5722 23.7209 17.908 23.7386 18.2258 23.7386C18.632 23.7386 19.0514 23.7163 19.4842 23.6715C19.9167 23.6271 20.3008 23.5598 20.6366 23.4704V19.098H20.6365ZM20.6365 16.4965C20.6365 15.4411 20.3716 14.7079 19.8419 14.2966C19.3119 13.8853 18.5437 13.6796 17.5371 13.6796C16.9185 13.6796 16.3405 13.7291 15.802 13.8274C15.2691 13.9242 14.7426 14.0539 14.2254 14.2159C13.8896 13.6257 13.7224 12.9199 13.7224 12.0968C14.3221 11.9004 14.9843 11.7484 15.7087 11.6411C16.4328 11.5337 17.1303 11.48 17.8017 11.48C19.5676 11.48 20.9098 11.8871 21.8283 12.7007C22.7463 13.5149 23.2059 14.8157 23.2059 16.6036V25.2139C22.5874 25.3568 21.8371 25.5043 20.9541 25.6564C20.0614 25.809 19.1575 25.8853 18.252 25.8844C17.3868 25.8844 16.605 25.8043 15.9077 25.6432C15.2099 25.4819 14.6182 25.2232 14.1327 24.8651C13.6465 24.5077 13.2718 24.0516 13.0065 23.4974C12.7417 22.943 12.6092 22.2725 12.6092 21.4856C12.6092 20.7169 12.7637 20.0417 13.0728 19.4602C13.3766 18.8857 13.8073 18.3901 14.3314 18.0119C14.8611 17.628 15.4704 17.3414 16.1592 17.154C16.8482 16.9661 17.5719 16.8721 18.3314 16.8721C18.8965 16.8721 19.3601 16.8858 19.7223 16.9126C20.084 16.9392 20.3888 16.9705 20.6362 17.0064V16.4967L20.6365 16.4965ZM28.6895 23.309C29.024 23.4341 29.3702 23.524 29.7228 23.5773C30.076 23.6312 30.5348 23.6579 31.1005 23.6579C31.7361 23.6579 32.3187 23.5554 32.8484 23.3497C33.3785 23.1445 33.8331 22.8267 34.2128 22.3973C34.5925 21.9684 34.8927 21.4278 35.1135 20.7744C35.3341 20.1221 35.4448 19.349 35.4448 18.4544C35.4448 17.024 35.1839 15.8885 34.6633 15.0479C34.1419 14.2076 33.2898 13.7873 32.107 13.7873C31.6655 13.7873 31.2413 13.8676 30.8357 14.0288C30.4289 14.1897 30.0672 14.4312 29.7492 14.753C29.4314 15.0748 29.1754 15.4819 28.9812 15.9736C28.7864 16.4658 28.6897 17.0509 28.6897 17.7305V23.3094V23.3091L28.6895 23.309ZM26.0669 11.8019C26.2465 11.7661 26.4275 11.7393 26.6099 11.7216C26.7993 11.7038 26.9894 11.695 27.1796 11.695C27.3557 11.695 27.541 11.7042 27.7357 11.7216C27.9297 11.7398 28.1151 11.7668 28.292 11.802C28.3094 11.8384 28.3318 11.9496 28.3583 12.1375C28.3846 12.3254 28.4111 12.5265 28.4378 12.7408C28.4643 12.9556 28.4907 13.1617 28.5172 13.3578C28.5437 13.5548 28.557 13.68 28.557 13.7336C28.7332 13.4478 28.9453 13.1703 29.1926 12.9021C29.44 12.6338 29.7361 12.3924 30.0804 12.1781C30.4248 11.9633 30.8131 11.7936 31.246 11.6683C31.6785 11.5432 32.1597 11.4801 32.6897 11.4801C33.4842 11.4801 34.2217 11.6144 34.9019 11.8828C35.5815 12.1514 36.1639 12.5665 36.6499 13.1299C37.1353 13.6933 37.5149 14.4087 37.7889 15.2757C38.0625 16.1437 38.1993 17.1673 38.1993 18.3473C38.1993 20.7075 37.5678 22.5543 36.3048 23.8863C35.0419 25.2186 33.2543 25.8844 30.9407 25.8844C30.552 25.8844 30.1549 25.8576 29.7487 25.804C29.3421 25.7501 28.9892 25.6785 28.6888 25.5895V31.893C28.4651 31.9298 28.2398 31.9567 28.0137 31.9734C27.7751 31.9909 27.5585 32 27.3643 32C27.1477 31.9991 26.9313 31.9902 26.7154 31.9734C26.4979 31.9578 26.2813 31.931 26.0665 31.893V11.802L26.0669 11.8019Z" fill="#ffffff"></path></svg>
        </div>
        <div class="docs-header__links">
          <a href="https://zapier.com/app/developer">My Integrations</a>
          <a href="https://zapier.com/developer/zap-templates">Zap Templates</a>
        </div>
      </div>
    </div>
    <!-- End Header -->

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K7GFJTV"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="docs-toc">
      <ul>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#what-is-an-app">What is an App?</a></li>
<li><a href="#how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</a></li>
<li><a href="#zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#quick-setup-guide">Quick Setup Guide</a></li>
<li><a href="#tutorial">Tutorial</a></li>
</ul>
</li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth1">OAuth1</a></li>
<li><a href="#oauth2">OAuth2</a></li>
<li><a href="#oauth2-with-pkce">OAuth2 with PKCE</a></li>
<li><a href="#connection-label">Connection Label</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a><ul>
<li><a href="#return-types">Return Types</a><ul>
<li><a href="#returning-line-items-array-of-objects">Returning Line Items (Array of Objects)</a></li>
</ul>
</li>
<li><a href="#fallback-sample">Fallback Sample</a></li>
</ul>
</li>
<li><a href="#input-fields">Input Fields</a><ul>
<li><a href="#customdynamic-fields">Custom/Dynamic Fields</a></li>
<li><a href="#dynamic-dropdowns">Dynamic Dropdowns</a></li>
<li><a href="#search-powered-fields">Search-Powered Fields</a></li>
<li><a href="#computed-fields">Computed Fields</a></li>
<li><a href="#nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#output-fields">Output Fields</a><ul>
<li><a href="#nested--children-line-item-fields-1">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsole"><code>z.console</code></a></li>
<li><a href="#zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></a></li>
<li><a href="#zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
<li><a href="#zcursor"><code>z.cursor</code></a></li>
<li><a href="#zgeneratecallbackurl"><code>z.generateCallbackUrl()</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
<li><a href="#bundlerawrequest"><code>bundle.rawRequest</code></a></li>
<li><a href="#bundlecleanedrequest"><code>bundle.cleanedRequest</code></a></li>
<li><a href="#bundleoutputdata"><code>bundle.outputData</code></a></li>
<li><a href="#bundletargeturl"><code>bundle.targetUrl</code></a></li>
<li><a href="#bundlesubscribedata"><code>bundle.subscribeData</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a><ul>
<li><a href="#error-response-handling">Error Response Handling</a></li>
</ul>
</li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a><ul>
<li><a href="#merging-hydrated-data">Merging Hydrated Data</a></li>
<li><a href="#file-dehydration">File Dehydration</a></li>
</ul>
</li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#viewing-bundle-logs">Viewing Bundle Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#error-handling">Error Handling</a><ul>
<li><a href="#general-errors">General Errors</a></li>
<li><a href="#halting-execution">Halting Execution</a></li>
<li><a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
<li><a href="#handling-throttled-requests">Handling Throttled Requests</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#using-the-z-object-in-tests">Using the <code>z</code> Object in Tests</a></li>
<li><a href="#mocking-requests">Mocking Requests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#testing-in-your-ci">Testing in Your CI</a></li>
<li><a href="#debugging-tests">Debugging Tests</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#building-native-packages-with-docker">Building Native Packages with Docker</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#faqs">FAQs</a><ul>
<li><a href="#why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&#39;t Zapier support newer versions of Node.js?</a></li>
<li><a href="#how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</a></li>
<li><a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a></li>
<li><a href="#does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</a></li>
<li><a href="#is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</a></li>
<li><a href="#how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</a></li>
<li><a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&#39;s the deal with pagination? When is it used and how does it work?</a></li>
<li><a href="#how-does-deduplication-work">How does deduplication work?</a></li>
<li><a href="#why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&#39;t provide an explicit <code>id</code> field?</a></li>
<li><a href="#node-x-no-longer-supported">Node X No Longer Supported</a></li>
<li><a href="#what-analytics-are-collected">What Analytics are Collected?</a></li>
<li><a href="#whats-the-difference-between-an-app-and-an-integration">What&#39;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</a></li>
</ul>
</li>
<li><a href="#command-line-tab-completion">Command Line Tab Completion</a></li>
<li><a href="#the-zapier-platform-packages">The Zapier Platform Packages</a><ul>
<li><a href="#updating-these-packages">Updating These Packages</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
<li><a href="#developing-on-the-cli">Developing on the CLI</a></li>
</ul>

      <hr />
      <small><a class="generated-by" href="https://github.com/zapier/litdoc">generated by litdoc</a></small>
    </div>

    <div class="docs-main container-fluid">
      <div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h1 align="center">
  <img alt="Zapier Logo" src="https://cdn.zappy.app/1cd66b15407db2d9a01fbe8d600772fe.svg" width="300px">
  <br>
  Platform CLI
  <br>
  <br>
</h1>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p align="center">
  <a href="https://www.npmjs.com/package/zapier-platform-cli"><img src="https://img.shields.io/npm/v/zapier-platform-cli.svg" alt="npm version"></a>
</p><p>Zapier is a platform for creating integrations and workflows. This CLI is your gateway to creating custom applications on the Zapier platform.</p><p>You may find docs duplicate or outdated across the Zapier site. The most up-to-date contents are always available on GitHub:</p><ul>
<li><a href="https://github.com/zapier/zapier-platform/blob/main/packages/cli/README.md">Latest CLI Docs</a></li>
<li><a href="https://github.com/zapier/zapier-platform/blob/main/packages/cli/docs/cli.md">Latest CLI Reference</a></li>
<li><a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md">Latest Schema Docs</a></li>
</ul><p>Our code is updated frequently. To see a full list of changes, look no further than <a href="https://github.com/zapier/zapier-platform/blob/main/CHANGELOG.md">the CHANGELOG</a>.</p><p>This doc describes the latest CLI version (<strong>14.0.1</strong>), as of this writing. If you&apos;re using an older version of the CLI, you may want to check out these historical releases:</p><ul>
<li>CLI Docs: <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@11.3.3/packages/cli/README.md">11.3.3</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@10.2.0/packages/cli/README.md">10.2.0</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@9.7.3/packages/cli/README.md">9.7.3</a></li>
<li>CLI Reference: <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@11.3.3/packages/cli/docs/cli.md">11.3.3</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@10.2.0/packages/cli/docs/cli.md">10.2.0</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-cli@9.7.3/packages/cli/docs/cli.md">9.7.3</a></li>
<li>Schema Docs: <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-schema@11.3.3/packages/schema/docs/build/schema.md">11.3.3</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-schema@10.2.0/packages/schema/docs/build/schema.md">10.2.0</a>, <a href="https://github.com/zapier/zapier-platform/blob/zapier-platform-schema@9.7.3/packages/schema/docs/build/schema.md">9.7.3</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="table-of-contents">Table of Contents</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#what-is-an-app">What is an App?</a></li>
<li><a href="#how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</a></li>
<li><a href="#zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#quick-setup-guide">Quick Setup Guide</a></li>
<li><a href="#tutorial">Tutorial</a></li>
</ul>
</li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth1">OAuth1</a></li>
<li><a href="#oauth2">OAuth2</a></li>
<li><a href="#oauth2-with-pkce">OAuth2 with PKCE</a></li>
<li><a href="#connection-label">Connection Label</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a><ul>
<li><a href="#return-types">Return Types</a><ul>
<li><a href="#returning-line-items-array-of-objects">Returning Line Items (Array of Objects)</a></li>
</ul>
</li>
<li><a href="#fallback-sample">Fallback Sample</a></li>
</ul>
</li>
<li><a href="#input-fields">Input Fields</a><ul>
<li><a href="#customdynamic-fields">Custom/Dynamic Fields</a></li>
<li><a href="#dynamic-dropdowns">Dynamic Dropdowns</a></li>
<li><a href="#search-powered-fields">Search-Powered Fields</a></li>
<li><a href="#computed-fields">Computed Fields</a></li>
<li><a href="#nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#output-fields">Output Fields</a><ul>
<li><a href="#nested--children-line-item-fields-1">Nested &amp; Children (Line Item) Fields</a></li>
</ul>
</li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsole"><code>z.console</code></a></li>
<li><a href="#zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></a></li>
<li><a href="#zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
<li><a href="#zcursor"><code>z.cursor</code></a></li>
<li><a href="#zgeneratecallbackurl"><code>z.generateCallbackUrl()</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
<li><a href="#bundlerawrequest"><code>bundle.rawRequest</code></a></li>
<li><a href="#bundlecleanedrequest"><code>bundle.cleanedRequest</code></a></li>
<li><a href="#bundleoutputdata"><code>bundle.outputData</code></a></li>
<li><a href="#bundletargeturl"><code>bundle.targetUrl</code></a></li>
<li><a href="#bundlesubscribedata"><code>bundle.subscribeData</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a><ul>
<li><a href="#error-response-handling">Error Response Handling</a></li>
</ul>
</li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a><ul>
<li><a href="#merging-hydrated-data">Merging Hydrated Data</a></li>
<li><a href="#file-dehydration">File Dehydration</a></li>
</ul>
</li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#viewing-bundle-logs">Viewing Bundle Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#error-handling">Error Handling</a><ul>
<li><a href="#general-errors">General Errors</a></li>
<li><a href="#halting-execution">Halting Execution</a></li>
<li><a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
<li><a href="#handling-throttled-requests">Handling Throttled Requests</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#using-the-z-object-in-tests">Using the <code>z</code> Object in Tests</a></li>
<li><a href="#mocking-requests">Mocking Requests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#testing-in-your-ci">Testing in Your CI</a></li>
<li><a href="#debugging-tests">Debugging Tests</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#building-native-packages-with-docker">Building Native Packages with Docker</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#faqs">FAQs</a><ul>
<li><a href="#why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&apos;t Zapier support newer versions of Node.js?</a></li>
<li><a href="#how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</a></li>
<li><a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a></li>
<li><a href="#does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</a></li>
<li><a href="#is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</a></li>
<li><a href="#how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</a></li>
<li><a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&apos;s the deal with pagination? When is it used and how does it work?</a></li>
<li><a href="#how-does-deduplication-work">How does deduplication work?</a></li>
<li><a href="#why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&apos;t provide an explicit <code>id</code> field?</a></li>
<li><a href="#node-x-no-longer-supported">Node X No Longer Supported</a></li>
<li><a href="#what-analytics-are-collected">What Analytics are Collected?</a></li>
<li><a href="#whats-the-difference-between-an-app-and-an-integration">What&apos;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</a></li>
</ul>
</li>
<li><a href="#command-line-tab-completion">Command Line Tab Completion</a></li>
<li><a href="#the-zapier-platform-packages">The Zapier Platform Packages</a><ul>
<li><a href="#updating-these-packages">Updating These Packages</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
<li><a href="#developing-on-the-cli">Developing on the CLI</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="getting-started">Getting Started</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>If you&apos;re new to Zapier Platform CLI, we strongly recommend you to walk through the <a href="https://zapier.com/developer/start">Tutorial</a> for a more thorough introduction.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="what-is-an-app">What is an App?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: this document uses &quot;app&quot; while modern Zapier nomenclature refers instead to &quot;integrations&quot;. In both cases, the phrase refers to your code that connects your API with Zapier.</p>
</blockquote><p>A CLI App is an implementation of your app&apos;s API. You build a Node.js application
that exports a single object (<a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#appschema">JSON Schema</a>) and upload it to Zapier.
Zapier introspects that definition to find out what your app is capable of and
what options to present end users in the Zap Editor.</p><p>For those not familiar with Zapier terminology, here is how concepts in the CLI map to the end user experience:</p><ul>
<li><a href="#authentication">Authentication</a>, (usually) which lets us know what credentials to ask users
for. This is used during the &quot;Connect Accounts&quot; section of the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Triggers</a>, which read data <em>from</em> your API. These have their own section in the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Creates</a>, which send data <em>to</em> your API to create new records. These are listed under &quot;Actions&quot; in the Zap Editor.</li>
<li><a href="#triggerssearchescreates">Searches</a>, which find specific records <em>in</em> your system. These are also listed under &quot;Actions&quot; in the Zap Editor.</li>
<li><a href="#resources">Resources</a>, which define an object type in your API (say a contact) and the operations available to perform on it. These are automatically extracted into Triggers, Searches, and Creates.</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-does-zapier-platform-cli-work">How does Zapier Platform CLI Work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier takes the App you upload and sends it over to Amazon Web Service&apos;s Lambda. We then make calls to execute the operations your App defines as we execute Zaps. Your App takes the input data we provide (if any), makes the necessary HTTP calls, and returns the relevant data, which gets fed back into Zapier.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zapier-platform-cli-vs-ui">Zapier Platform CLI vs UI</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier Platform includes two ways to build integrations: a CLI (to build integrations in your local development environment and deploy them from the command line), and a Visual Builder (to create integrations with a visual builder from your browser). Both use the same underlying platform, so pick the one that fits your team&apos;s needs best. The main difference is how you make changes to your code.</p><p>Zapier Platform CLI is designed to be used by development teams who collaborate with version control and CI, and can be used to build more advanced integrations with custom coding for every part of your API calls and response parsing.</p><p><a href="https://zapier.com/app/developer/">Zapier Platform UI</a> is designed to quickly spin up new integrations, and collaborate on them with teams that include non-developers. It&apos;s the quickest way to start using the Zapier platform&#x2014;and you can manage your CLI apps&apos; core details from its online UI as well. You can also <a href="https://platform.zapier.com/docs/export">export</a> Zapier Platform UI integrations to CLI to start development in your browser, then finish out the core features in your local development environment.</p><blockquote>
<p>Learn more in our <a href="https://platform.zapier.com/docs/vs">Zapier Platform UI vs CLI</a> post.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="requirements">Requirements</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>All Zapier CLI apps are run using Node.js <code>v16</code>.</p><p>You can develop using any version of Node you&apos;d like, but your eventual code must be compatible with <code>v16</code>. If you&apos;re using features not yet available in <code>v16</code>, you can transpile your code to a compatible format with <a href="https://babeljs.io/">Babel</a> (or similar).</p><p>To ensure stability for our users, we strongly encourage you run tests on <code>v16</code> sometime before your code reaches users. This can be done multiple ways.</p><p>Firstly, by using a CI tool (like <a href="https://travis-ci.org/">Travis CI</a> or <a href="https://circleci.com/">Circle CI</a>, which are free for open source projects). We provide a sample <a href="https://github.com/zapier/zapier-platform/blob/main/example-apps/trigger/.travis.yml">.travis.yml</a> file in our template apps to get you started.</p><p>Alternatively, you can change your local node version with tools such as <a href="https://github.com/nvm-sh/nvm#installation-and-update">nvm</a>. Then you can either swap to that version with <code>nvm use v16</code>, or do <code>nvm exec v16 zapier test</code> so you can run tests without having to switch versions while developing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="quick-setup-guide">Quick Setup Guide</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>First up is installing the CLI and setting up your auth to create a working &quot;Zapier Example&quot; application. It will be private to you and visible in your live <a href="https://zapier.com/app/editor">Zap Editor</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># install the CLI globally</span>
npm install -g zapier-platform-cli

<span class="hljs-comment"># setup auth to Zapier&apos;s platform with a deploy key</span>
zapier login
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: If you log into Zapier via the single sign-on (Google, Facebook, or Microsoft), you may not have a Zapier password. If that&apos;s the case, you&apos;ll need to generate a deploy key, go to <a href="https://zapier.com/developer/partner-settings/deploy-keys/">your Zapier developer account here</a> and create/copy a key, then run <code>zapier login</code> command with the --sso flag.</p>
</blockquote><p>Your Zapier CLI should be installed and ready to go at this point. Next up, we&apos;ll create our first app!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># create a directory with the minimum required files</span>
zapier init example-app

<span class="hljs-comment"># move into the new directory</span>
<span class="hljs-built_in">cd</span> example-app

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: When you run <code>zapier init</code>, you&apos;ll be presented with a list of templates to start with. Pick the one that matches a feature you&apos;ll need (such as &quot;dynamic-dropdown&quot; for an integration with <a href="#dynamic-dropdowns">dynamic dropdown fields</a>), or select &quot;minimal&quot; for an integration with only the essentials. <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps">View more example apps here</a>.</p>
</blockquote><p>You should now have a working local app. You can run several local commands to try it out.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># run the local tests</span>
<span class="hljs-comment"># the same as npm test, but adds some extra things to the environment</span>
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next, you&apos;ll probably want to upload app to Zapier itself so you can start testing live.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app to Zapier</span>
zapier push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Go check out our <a href="https://zapier.github.io/zapier-platform/cli">full CLI reference documentation</a> to see all the other commands!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="tutorial">Tutorial</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For a full tutorial, head over to our <a href="https://zapier.com/developer/start">Tutorial</a> for a comprehensive walkthrough for creating your first app. If this isn&apos;t your first rodeo, read on!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="creating-a-local-app">Creating a Local App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: Check the <a href="#quick-setup-guide">Quick Setup</a> if this is your first time using the platform!</p>
</blockquote><p>Creating an App can be done entirely locally and they are fairly simple Node.js apps using the standard Node environment and should be completely testable. However, a local app stays local until you <code>zapier register</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># make your folder</span>
mkdir zapier-example
<span class="hljs-built_in">cd</span> zapier-example

<span class="hljs-comment"># create the needed files from a template</span>
zapier init . --template minimal

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>local App</strong>, use these commands:</p><ul>
<li><code>zapier init myapp</code> - initialize/start a local app project</li>
<li><code>zapier convert 1234 .</code> - initialize/start from an existing app</li>
<li><code>zapier scaffold resource Contact</code> - auto-injects a new resource, trigger, etc.</li>
<li><code>zapier test</code> - run the same tests as <code>npm test</code></li>
<li><code>zapier validate</code> - ensure your app is valid</li>
<li><code>zapier describe</code> - print some helpful information about your app</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-project-structure">Local Project Structure</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In your app&apos;s folder, you should see this general recommended structure. The <code>index.js</code> is Zapier&apos;s entry point to your app. Zapier expects you to export an <code>App</code> definition there.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>$ tree .
.
&#x251C;&#x2500;&#x2500; README.md
&#x251C;&#x2500;&#x2500; index.js
&#x251C;&#x2500;&#x2500; package.json
&#x251C;&#x2500;&#x2500; triggers
&#x2502;   &#x2514;&#x2500;&#x2500; contact-by-tag.js
&#x251C;&#x2500;&#x2500; resources
&#x2502;   &#x2514;&#x2500;&#x2500; Contact.js
&#x251C;&#x2500;&#x2500; test
&#x2502;   &#x251C;&#x2500;&#x2500; basic.js
&#x2502;   &#x251C;&#x2500;&#x2500; triggers.js
&#x2502;   &#x2514;&#x2500;&#x2500; resources.js
&#x251C;&#x2500;&#x2500; build
&#x2502;   &#x2514;&#x2500;&#x2500; build.zip
&#x2514;&#x2500;&#x2500; node_modules
    &#x251C;&#x2500;&#x2500; ...
    &#x2514;&#x2500;&#x2500; ...
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-app-definition">Local App Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The core definition of your <code>App</code> will look something like this, and is what your <code>index.js</code> should provide as the <em>only</em> export:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// both version strings are required</span>
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// see &quot;Authentication&quot; section below</span>
  <span class="hljs-attr">authentication</span>: {},

  <span class="hljs-comment">// see &quot;Dehydration&quot; section below</span>
  <span class="hljs-attr">hydrators</span>: {},

  <span class="hljs-comment">// see &quot;Making HTTP Requests&quot; section below</span>
  <span class="hljs-attr">requestTemplate</span>: {},
  <span class="hljs-attr">beforeRequest</span>: [],
  <span class="hljs-attr">afterResponse</span>: [],

  <span class="hljs-comment">// See &quot;Resources&quot; section below</span>
  <span class="hljs-attr">resources</span>: {},

  <span class="hljs-comment">// See &quot;Triggers/Searches/Creates&quot; section below</span>
  <span class="hljs-attr">triggers</span>: {},
  <span class="hljs-attr">searches</span>: {},
  <span class="hljs-attr">creates</span>: {},
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: You can use higher order functions to create any part of your App definition!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="registering-an-app">Registering an App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Registering your App with Zapier is a necessary first step which only enables basic administrative functions. It should happen before <code>zapier push</code> which is to used to actually expose an App Version in the Zapier interface and editor.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># register your app</span>
zapier register <span class="hljs-string">&quot;Zapier Example&quot;</span>

<span class="hljs-comment"># list your apps</span>
zapier integrations
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: This doesn&apos;t put your app in the editor - see the docs on pushing an App Version to do that!</p>
</blockquote><p>If you&apos;d like to manage your <strong>App</strong>, use these commands:</p><ul>
<li><code>zapier integrations</code> - list the apps in Zapier you can administer</li>
<li><code>zapier register &quot;App Title&quot;</code> - creates a new app in Zapier</li>
<li><code>zapier link</code> - lists and links a selected app in Zapier to your current folder</li>
<li><code>zapier history</code> - print the history of your app</li>
<li><code>zapier team:add user@example.com admin</code> - add an admin to help maintain/develop your app</li>
<li><code>zapier users:add user@example.com 1.0.0</code> - invite a user try your app version 1.0.0</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="deploying-an-app-version">Deploying an App Version</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>An App Version is related to a specific App but is an &quot;immutable&quot; implementation of your app. This makes it easy to run multiple versions for multiple users concurrently. The App Version is pulled from the version within the <code>package.json</code>. To create a new App Version, update the version number in that file. By default, <strong>every App Version is private</strong> but you can <code>zapier promote</code> it to production for use by over 1 million Zapier users.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app version to Zapier</span>
zapier push

<span class="hljs-comment"># list your versions</span>
zapier versions
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>Version</strong>, use these commands:</p><ul>
<li><code>zapier versions</code> - list the versions for the current directory&apos;s app</li>
<li><code>zapier push</code> - push the current version of current directory&apos;s app &amp; version (read from <code>package.json</code>)</li>
<li><code>zapier promote 1.0.0</code> - mark a version as the &quot;production&quot; version</li>
<li><code>zapier migrate 1.0.0 1.0.1 [100%]</code> - move users between versions, regardless of deployment status</li>
<li><code>zapier deprecate 1.0.0 2020-06-01</code> - mark a version as deprecated, but let users continue to use it (we&apos;ll email them)</li>
<li><code>zapier env:set 1.0.0 KEY=VALUE</code> - set an environment variable to some value</li>
<li><code>zapier delete:version 1.0.0</code> - delete a version entirely. This is mostly for clearing out old test apps you used personally. It will fail if there are any users. You probably want <code>deprecate</code> instead.</li>
</ul><blockquote>
<p>Note: To see the changes that were just pushed reflected in the browser, you have to manually refresh the browser each time you push.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="private-app-version-default">Private App Version (default)</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A simple <code>zapier push</code> will only create the App Version in your editor. No one else using Zapier can see it or use it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="sharing-an-app-version">Sharing an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is how you would share your app with friends, co-workers or clients. This is perfect for quality assurance, testing with active users or just sharing any app you like.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># sends an email this user to let them view the app version 1.0.0 in the UI privately</span>
zapier users:add user@example.com 1.0.0

<span class="hljs-comment"># sends an email this user to let them admin the app (make changes just like you)</span>
zapier team:add user@example.com
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can also invite anyone on the internet to your app by using the links from <code>zapier users:links</code>. The link should look something like <code>https://zapier.com/platform/public-invite/1/222dcd03aed943a8676dc80e2427a40d/</code>. You can put this in your help docs, post it to Twitter, add it to your email campaign, etc. You can choose an invite link specific to an app version or for the entire app (i.e. all app versions).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="promoting-an-app-version">Promoting an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Promotion is how you would share your app with every one of the 1 million+ Zapier users. If this is your first time promoting - you may have to wait for the Zapier team to review and approve your app.</p><p>If this isn&apos;t the first time you&apos;ve promoted your app - you might have users on older versions. You can <code>zapier migrate</code> to either move users over (which can be dangerous if you have breaking changes). Or, you can <code>zapier deprecate</code> to give users some time to move over themselves.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># promote your app version to all Zapier users</span>
zapier promote 1.0.1

<span class="hljs-comment"># OPTIONAL - migrate your users between one app version to another</span>
zapier migrate 1.0.0 1.0.1

<span class="hljs-comment"># OR - mark the old version as deprecated</span>
zapier deprecate 1.0.0 2020-06-01
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="converting-an-existing-app">Converting an Existing App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you have an existing Zapier <a href="https://zapier.com/developer/builder/">legacy Web Builder app</a>, you can use it as a template to kickstart your local application.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Convert an existing Web Builder app to a CLI app in the my-app directory</span>
<span class="hljs-comment"># App ID 1234 is from URL https://zapier.com/developer/builder/app/1234/development</span>
zapier convert 1234 my-app
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your CLI app will be created and you can continue working on it.</p><blockquote>
<p>Note: There is no way to convert a CLI app to a Web Builder app and we do not plan on implementing this.</p>
</blockquote><p>Introduced in v8.2.0, you are able to convert new integrations built in Zapier Platform UI to CLI.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># the --version flag is what denotes this command is interacting with a Visual Builder app</span>
<span class="hljs-comment"># zapier convert &lt;APP_ID&gt; --version &lt;APP_VERSION&gt; &lt;PATH&gt;</span>
zapier convert 1234 --version 1.0.1 my-app
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="authentication">Authentication</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most applications require some sort of authentication. The Zapier platform provides core behaviors for several common authentication methods that might be used with your application, as well as the ability to customize authentication further.</p><p>When a user authenticates to your application through Zapier, a &quot;connection&quot; is created representing their authentication details. Data tied to a specific authentication connection is included in the <a href="#bundle-object">bundle object</a> under <code>bundle.authData</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="basic">Basic</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Useful if your app requires two pieces of information to authenticate: <code>username</code> and <code>password</code>, which only the end user can provide. By default, Zapier will do the standard Basic authentication base64 header encoding for you (via an automatically registered middleware).</p><blockquote>
<p>To create a new integration with basic authentication, run <code>zapier init [your app name] --template basic-auth</code>. You can also review an example of that code <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/basic-auth">here</a>.</p>
</blockquote><p>If your app uses Basic auth with an encoded API key rather than a username and password, like <code>Authorization: Basic APIKEYHERE:x</code>, consider the <a href="#custom">Custom</a> authentication method instead.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;basic&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-attr">connectionLabel</span>: <span class="hljs-string">&apos;{{username}}&apos;</span>, <span class="hljs-comment">// Can also be a function, check digest auth below for an example</span>
  <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="digest">Digest</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>Added in v7.4.0.</em></p><p>The setup and user experience of Digest Auth is identical to Basic Auth. Users provide Zapier their username and password, and Zapier handles all the nonce and quality of protection details automatically.</p><blockquote>
<p>To create a new integration with digest authentication, run <code>zapier init [your app name] --template digest-auth</code>. You can also review an example of that code <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/digest-auth">here</a>.</p>
</blockquote><blockquote>
<p>Limitation: Currently, MD5-sess and SHA are not implemented. Only the MD5 algorithm is supported. In addition, server nonces are not reused. That means for every <code>z.request</code> call, Zapier will send an additional request beforehand to get the server nonce.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> getConnectionLabel = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-comment">// bundle.inputData will contain what the &quot;test&quot; URL (or function) returns</span>
  <span class="hljs-keyword">return</span> bundle.inputData.username;
};

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;digest&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-attr">connectionLabel</span>: getConnectionLabel,

  <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="custom">Custom</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Custom auth is most commonly used for apps that authenticate with API keys, although it also provides flexibility for any unusual authentication setup. You&apos;ll likely provide some custom <code>beforeRequest</code> middleware or a <code>requestTemplate</code> (see <a href="#making-http-requests">Making HTTP Requests</a>) to pass in data returned from the authentication process, most commonly by adding/computing needed headers.</p><blockquote>
<p>To create a new integration with custom authentication, run <code>zapier init [your app name] --template custom-auth</code>. You can also review an example of that code <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/custom-auth">here</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;custom&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-attr">fields</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found in your browsers address bar after logging in.&apos;</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;api_key&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found on your settings page.&apos;</span>,
    },
  ],
};

<span class="hljs-keyword">const</span> addApiKeyToHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;X-Subdomain&apos;</span>] = bundle.authData.subdomain;
  <span class="hljs-keyword">const</span> basicHash = Buffer.from(<span class="hljs-string">`<span class="hljs-subst">${bundle.authData.api_key}</span>:x`</span>).toString(
    <span class="hljs-string">&apos;base64&apos;</span>
  );
  request.headers.Authorization = <span class="hljs-string">`Basic <span class="hljs-subst">${basicHash}</span>`</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-attr">beforeRequest</span>: [addApiKeyToHeader],
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="session">Session</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Session auth gives you the ability to exchange some user-provided data for some authentication data; for example, username and password for a session key. It can be used to implement almost any authentication method that uses that pattern - for example, alternative OAuth flows.</p><blockquote>
<p>To create a new integration with session authentication, run <code>zapier init [your app name] --template session-auth</code>. You can also review an example of that code <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/session-auth">here</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> getSessionKey = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/login.json&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-attr">username</span>: bundle.authData.username,
      <span class="hljs-attr">password</span>: bundle.authData.password,
    },
  });

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">sessionKey</span>: response.data.sessionKey,
    <span class="hljs-comment">// or response.json.sessionKey if you&apos;re using core v9 and older</span>
  };
};

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;session&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-attr">fields</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;username&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login username.&apos;</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;password&apos;</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login password.&apos;</span>,
    },
    <span class="hljs-comment">// For Session Auth we store `sessionKey` automatically in `bundle.authData`</span>
    <span class="hljs-comment">// for future use. If you need to save/use something that the user shouldn&apos;t</span>
    <span class="hljs-comment">// need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;something&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in sessionConfig.perform</span>
  ],
  <span class="hljs-attr">sessionConfig</span>: {
    <span class="hljs-attr">perform</span>: getSessionKey,
  },
};

<span class="hljs-keyword">const</span> includeSessionKeyHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData.sessionKey) {
    request.headers = request.headers || {};
    request.headers[<span class="hljs-string">&apos;X-Session-Key&apos;</span>] = bundle.authData.sessionKey;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-attr">beforeRequest</span>: [includeSessionKeyHeader],
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For Session auth, the function that fetches the additional authentication data needed to make API calls (<code>authentication.sessionConfig.perform</code>) has the user-provided fields in <code>bundle.inputData</code>. Afterwards, <code>bundle.authData</code> contains the data returned by that function (usually the session key or token).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth1">OAuth1</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>Added in <code>v7.5.0</code>.</em></p><p>Zapier&apos;s OAuth1 implementation matches <a href="https://developer.twitter.com/en/docs/tutorials/authenticating-with-twitter-api-for-enterprise/authentication-method-overview#oauth1.0a">Twitter</a> and <a href="https://developer.atlassian.com/cloud/trello/guides/rest-api/authorization/#using-basic-oauth">Trello</a> implementations of the 3-legged OAuth flow.</p><blockquote>
<p>To create a new integration with OAuth1, run <code>zapier init [your app name] --template oauth1-trello</code>. You can also check out <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/oauth1-trello">oauth1-trello</a>, <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/oauth1-tumblr">oauth1-tumblr</a>, and <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/oauth1-twitter">oauth1-twitter</a> for working example apps with OAuth1.</p>
</blockquote><p>The flow works like this:</p><ol>
<li>Zapier makes a call to your API requesting a &quot;request token&quot; (also known as &quot;temporary credentials&quot;).</li>
<li>Zapier sends the user to the authorization URL, defined by your app, along with the request token.</li>
<li>Once authorized, your website sends the user to the <code>redirect_uri</code> Zapier provided. Use <code>zapier describe</code> command to find out what it is: <img src="https://zappy.zapier.com/117ECB35-5CCA-4C98-B74A-35F1AD9A3337.png" alt></li>
<li>Zapier makes a backend call to your API to exchange the request token for an &quot;access token&quot; (also known as &quot;long-lived credentials&quot;).</li>
<li>Zapier stores the <code>access_token</code> and uses it to make calls on behalf of the user.</li>
</ol><p>You are required to define:</p><ul>
<li><code>getRequestToken</code>: The API call to fetch the request token</li>
<li><code>authorizeUrl</code>: The authorization URL</li>
<li><code>getAccessToken</code>: The API call to fetch the access token</li>
</ul><p>You&apos;ll also likely need to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables. These are the consumer key and secret in OAuth1 terminology.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env:<span class="hljs-built_in">set</span> 1.0.0 CLIENT_ID=1234
$ zapier env:<span class="hljs-built_in">set</span> 1.0.0 CLIENT_SECRET=abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them in .env or in the command!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;lodash&apos;</span>);

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth1&apos;</span>,
  <span class="hljs-attr">oauth1Config</span>: {
    <span class="hljs-attr">getRequestToken</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/request-token&apos;</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">oauth_consumer_key</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">oauth_consumer_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,

        <span class="hljs-comment">// &apos;HMAC-SHA1&apos; is used by default if not specified.</span>
        <span class="hljs-comment">// &apos;HMAC-SHA256&apos;, &apos;RSA-SHA1&apos;, &apos;PLAINTEXT&apos; are also supported.</span>
        <span class="hljs-attr">oauth_signature_method</span>: <span class="hljs-string">&apos;HMAC-SHA1&apos;</span>,
        <span class="hljs-attr">oauth_callback</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
      },
    },
    <span class="hljs-attr">authorizeUrl</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">oauth_token</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token}}&apos;</span>,
      },
    },
    <span class="hljs-attr">getAccessToken</span>: {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/access-token&apos;</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">oauth_consumer_key</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">oauth_consumer_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">oauth_token</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token}}&apos;</span>,
        <span class="hljs-attr">oauth_token_secret</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_token_secret}}&apos;</span>,
        <span class="hljs-attr">oauth_verifier</span>: <span class="hljs-string">&apos;{{bundle.inputData.oauth_verifier}}&apos;</span>,
      },
    },
  },
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/me&apos;</span>,
  },
  <span class="hljs-comment">// If you need any fields upfront, put them here</span>
  <span class="hljs-attr">fields</span>: [
    { <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;app&apos;</span> },
    <span class="hljs-comment">// For OAuth1 we store `oauth_token` and `oauth_token_secret` automatically</span>
    <span class="hljs-comment">// in `bundle.authData` for future use. If you need to save/use something</span>
    <span class="hljs-comment">// that the user shouldn&apos;t need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;user_id&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in oauth1Config.getAccessToken</span>
  ],
};

<span class="hljs-comment">// A middleware that is run before z.request() actually makes the request. Here we&apos;re</span>
<span class="hljs-comment">// adding necessary OAuth1 parameters to `auth` property of the request object.</span>
<span class="hljs-keyword">const</span> includeAccessToken = <span class="hljs-function">(<span class="hljs-params">req, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (
    bundle.authData &amp;&amp;
    bundle.authData.oauth_token &amp;&amp;
    bundle.authData.oauth_token_secret
  ) {
    <span class="hljs-comment">// Just put your OAuth1 credentials in req.auth, Zapier will sign the request for</span>
    <span class="hljs-comment">// you.</span>
    req.auth = req.auth || {};
    _.defaults(req.auth, {
      <span class="hljs-attr">oauth_consumer_key</span>: process.env.CLIENT_ID,
      <span class="hljs-attr">oauth_consumer_secret</span>: process.env.CLIENT_SECRET,
      <span class="hljs-attr">oauth_token</span>: bundle.authData.oauth_token,
      <span class="hljs-attr">oauth_token_secret</span>: bundle.authData.oauth_token_secret,
    });
  }
  <span class="hljs-keyword">return</span> req;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-attr">beforeRequest</span>: [includeAccessToken],
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For OAuth1, <code>authentication.oauth1Config.getRequestToken</code>, <code>authentication.oauth1Config.authorizeUrl</code>, and <code>authentication.oauth1Config.getAccessToken</code> have fields like <code>redirect_uri</code> and the temporary credentials in <code>bundle.inputData</code>. After <code>getAccessToken</code> runs, the resulting token value(s) will be stored in <code>bundle.authData</code> for the connection.</p><p>Also, <code>authentication.oauth1Config.getAccessToken</code> has access to the additional return values in <code>rawRequest</code> and <code>cleanedRequest</code> should you need to extract other values (for example, from the query string).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2">OAuth2</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier&apos;s OAuth2 implementation is based on the <code>authorization_code</code> flow, similar to <a href="https://developer.github.com/v3/oauth/">GitHub</a> and <a href="https://developers.facebook.com/docs/authentication/server-side/">Facebook</a>.</p><blockquote>
<p>To create a new integration with OAuth2, run <code>zapier init [your app name] --template oauth2</code>. You can also check out <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/oauth2">our working example app</a>.</p>
</blockquote><p>If your app&apos;s OAuth2 flow uses a different grant type, such as <code>client_credentials</code>, try using <a href="#session">Session auth</a> instead.</p><p>The OAuth2 flow looks like this:</p><ol>
<li>Zapier sends the user to the authorization URL defined by your app.</li>
<li>Once authorized, your website sends the user to the <code>redirect_uri</code> Zapier provided. Use the <code>zapier describe</code> command to find out what it is: <img src="https://zappy.zapier.com/83E12494-0A03-4DB4-AA46-5A2AF6A9ECCC.png" alt></li>
<li>Zapier makes a backend call to your API to exchange the <code>code</code> for an <code>access_token</code>.</li>
<li>Zapier stores the <code>access_token</code> and uses it to make calls on behalf of the user.</li>
<li>(Optionally) Zapier can refresh the token if it expires.</li>
</ol><p>You are required to define:</p><ul>
<li><code>authorizeUrl</code>: The authorization URL</li>
<li><code>getAccessToken</code>: The API call to fetch the access token</li>
</ul><p>If the access token has a limited life and you want to refresh the token when it expires, you&apos;ll also need to define the API call to perform that refresh (<code>refreshAccessToken</code>). You can choose to set <code>autoRefresh: true</code>, as in the example app, if you want Zapier to automatically make a call to refresh the token after receiving a 401. See <a href="#stale-authentication-credentials">Stale Authentication Credentials</a> for more details on handling auth refresh.</p><p>You&apos;ll also likely want to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env:<span class="hljs-built_in">set</span> 1.0.0 CLIENT_ID=1234
$ zapier env:<span class="hljs-built_in">set</span> 1.0.0 CLIENT_SECRET=abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them in .env or in the command!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth2&apos;</span>,
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-comment">// you can provide additional fields for inclusion in authData</span>
  <span class="hljs-attr">oauth2Config</span>: {
    <span class="hljs-comment">// &quot;authorizeUrl&quot; could also be a function returning a string url</span>
    <span class="hljs-attr">authorizeUrl</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/oauth2/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-string">&apos;{{bundle.inputData.state}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">response_type</span>: <span class="hljs-string">&apos;code&apos;</span>,
      },
    },
    <span class="hljs-comment">// Zapier expects a response providing {access_token: &apos;abcd&apos;}</span>
    <span class="hljs-comment">// &quot;getAccessToken&quot; could also be a function returning an object</span>
    <span class="hljs-attr">getAccessToken</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/v2/oauth2/token&apos;</span>,
      <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&apos;{{bundle.inputData.code}}&apos;</span>,
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">client_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">grant_type</span>: <span class="hljs-string">&apos;authorization_code&apos;</span>,
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>,
      },
    },
    <span class="hljs-attr">scope</span>: <span class="hljs-string">&apos;read,write&apos;</span>,
  },
  <span class="hljs-comment">// If you need any fields upfront, put them here</span>
  <span class="hljs-attr">fields</span>: [
    { <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;app&apos;</span> },
    <span class="hljs-comment">// For OAuth2 we store `access_token` and `refresh_token` automatically</span>
    <span class="hljs-comment">// in `bundle.authData` for future use. If you need to save/use something</span>
    <span class="hljs-comment">// that the user shouldn&apos;t need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;user_id&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in oauth2Config.getAccessToken/refreshAccessToken</span>
  ],
};

<span class="hljs-keyword">const</span> addBearerHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData &amp;&amp; bundle.authData.access_token) {
    request.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${bundle.authData.access_token}</span>`</span>;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-attr">beforeRequest</span>: [addBearerHeader],
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For OAuth2, <code>authentication.oauth2Config.authorizeUrl</code>, <code>authentication.oauth2Config.getAccessToken</code>, and <code>authentication.oauth2Config.refreshAccessToken</code> have fields like <code>redirect_uri</code> and <code>state</code> in <code>bundle.inputData</code>. After the code is exchanged for an access token and/or refresh token, those tokens are stored in <code>bundle.authData</code> for the connection.</p><p>Also, <code>authentication.oauth2Config.getAccessToken</code> has access to the additional return values in <code>rawRequest</code> and <code>cleanedRequest</code> should you need to extract other values (for example, from the query string).</p><p>If you define <code>fields</code> to collect additional details from the user, please note that <code>client_id</code> and <code>client_secret</code> are reserved keys and cannot be used as keys for input form fields.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2-with-pkce">OAuth2 with PKCE</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>Added in v14.0.0.</em></p><p>Zapier&apos;s OAuth2 implementation also supports <a href="https://oauth.net/2/pkce/">PKCE</a>. This implementation is an extension of the OAuth2 <code>authorization_code</code> flow described above. </p><p>To use PKCE in your OAuth2 flow, you&apos;ll need to set the following variables:</p><ol>
<li><code>enablePkce: true</code></li>
<li><code>getAccessToken.body</code> to include <code>code_verifier: &quot;{{bundle.inputData.code_verifier}}&quot;</code></li>
</ol><p>The OAuth2 PKCE flow uses the same flow as OAuth2 but adds a few extra parameters:</p><ol>
<li>Zapier computes a <code>code_verifier</code> and <code>code_challenge</code> internally and stores the <code>code_verifier</code> in the Zapier bundle.</li>
<li>Zapier sends the user to the authorization URL defined by your app, passing along the computed <code>code_challenge</code>.</li>
<li>Once authorized, your website sends the user to the <code>redirect_uri</code> Zapier provided.</li>
<li>Zapier makes a call to your API to exchange the <code>code</code> and the computed <code>code_verifier</code> for an <code>access_token</code>.</li>
<li>Zapier stores the <code>access_token</code> and uses it to make calls on behalf of the user.</li>
</ol><p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth2&apos;</span>,
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>,
  },
  <span class="hljs-comment">// you can provide additional fields for inclusion in authData</span>
  <span class="hljs-attr">oauth2Config</span>: {
    <span class="hljs-comment">// &quot;authorizeUrl&quot; could also be a function returning a string url</span>
    <span class="hljs-attr">authorizeUrl</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/oauth2/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-string">&apos;{{bundle.inputData.state}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">response_type</span>: <span class="hljs-string">&apos;code&apos;</span>,
      },
    },
    <span class="hljs-comment">// Zapier expects a response providing {access_token: &apos;abcd&apos;}</span>
    <span class="hljs-comment">// &quot;getAccessToken&quot; could also be a function returning an object</span>
    <span class="hljs-attr">getAccessToken</span>: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.inputData.subdomain}}.example.com/api/v2/oauth2/token&apos;</span>,
      <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&apos;{{bundle.inputData.code}}&apos;</span>,
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">client_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">grant_type</span>: <span class="hljs-string">&apos;authorization_code&apos;</span>,
        <span class="hljs-attr">code_verifier</span>: <span class="hljs-string">&apos;{{bundle.inputData.code_verifier}}&apos;</span>, <span class="hljs-comment">// Added for PKCE</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>,
      },
    },
    <span class="hljs-attr">scope</span>: <span class="hljs-string">&apos;read,write&apos;</span>,
    <span class="hljs-attr">enablePkce</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Added for PKCE</span>
  },
  <span class="hljs-comment">// If you need any fields upfront, put them here</span>
  <span class="hljs-attr">fields</span>: [
    { <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&apos;app&apos;</span> },
    <span class="hljs-comment">// For OAuth2 we store `access_token` and `refresh_token` automatically</span>
    <span class="hljs-comment">// in `bundle.authData` for future use. If you need to save/use something</span>
    <span class="hljs-comment">// that the user shouldn&apos;t need to type/choose, add a &quot;computed&quot; field, like:</span>
    <span class="hljs-comment">// {key: &apos;user_id&apos;: type: &apos;string&apos;, required: false, computed: true}</span>
    <span class="hljs-comment">// And remember to return it in oauth2Config.getAccessToken/refreshAccessToken</span>
  ],
};

<span class="hljs-keyword">const</span> addBearerHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData &amp;&amp; bundle.authData.access_token) {
    request.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${bundle.authData.access_token}</span>`</span>;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication,
  <span class="hljs-attr">beforeRequest</span>: [addBearerHeader],
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The computed <code>code_verifier</code> uses this standard: <a href="https://www.rfc-editor.org/rfc/rfc7636#section-4.1">RFC 7636 Code Verifier</a></p><p>The computed <code>code_challenge</code> uses this standard: <a href="https://www.rfc-editor.org/rfc/rfc7636#section-4.2">RFC 7636 Code Challenge</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="connection-label">Connection Label</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When a user connects to your app via Zapier and a connection is created to hold the related data in <code>bundle.authData</code>, the connection is automatically labeled with the app name. You also have the option of setting a connection label (<code>connectionLabel</code>), which can be extremely helpful to identify information like which user is connected or what instance of your app they are connected to. That way, users don&apos;t get confused if they have multiple connections to your app.</p><p>When setting a connection label, you can use either a string with variable references (as shown in <a href="#basic">Basic Auth</a>) or a function (as shown in <a href="#digest">Digest Auth</a>).</p><p>When using a string, you have access to the information in <code>bundle.authData</code> and the information returned from the test request in <code>bundle.inputData</code>, all at the top level. So in Basic auth, if <code>connectionLabel</code> is <code>{{username}}</code>, that refers to the username used for authentication.</p><p>When using a function, this &quot;hoisting&quot; of data to the top level is skipped, and you must refer to data items by their fully qualified name, as shown in the line <code>return bundle.inputData.username;</code> in the Digest Auth snippet. <code>return username;</code> would not work in this context.</p><p><strong>NOTE:</strong> Do not use sensitive authentication data such as passwords or API keys in the connection label. It&apos;s visible in plain text on Zapier. The purpose of the label is to identify the connection for the user, so stick with data such as username or instance identifier that is meaningful but not sensitive.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="resources">Resources</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>resource</code> is a representation (as a JavaScript object) of one of the REST resources of your API. Say you have a <code>/recipes</code>
endpoint for working with recipes; you can define a recipe resource in your app that will tell Zapier how to do create,
read, and search operations on that resource.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">// `key` is the unique identifier the Zapier backend references</span>
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// `noun` is the user-friendly name displayed in the Zapier UI</span>
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-comment">// `list` and `create` are just a couple of the methods you can define</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">create</span>: {
    <span class="hljs-comment">// ...</span>
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The quickest way to create a resource is with the <code>zapier scaffold</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier scaffold resource <span class="hljs-string">&quot;Recipe&quot;</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This will generate the resource file and add the necessary statements to the <code>index.js</code> file to import it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="resource-definition">Resource Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A resource has a few basic properties. The first is the <code>key</code>, which allows Zapier to identify the resource on our backend.
The second is the <code>noun</code>, the user-friendly name of the resource that is presented to users throughout the Zapier UI.</p><blockquote>
<p>Check out <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/resource">this working example app</a> to see resources in action.</p>
</blockquote><p>After those, there is a set of optional properties that tell Zapier what methods can be performed on the resource.
The complete list of available methods can be found in the <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#resourceschema">Resource Schema Docs</a>.
For now, let&apos;s focus on two:</p><ul>
<li><code>list</code> - Tells Zapier how to fetch a set of this resource. This becomes a Trigger in the Zapier Editor.</li>
<li><code>create</code> - Tells Zapier how to create a new instance of the resource. This becomes an Action in the Zapier Editor.</li>
</ul><p>Here is a complete example of what the list method might look like</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>,
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>,
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The method is made up of two properties, a <code>display</code> and an <code>operation</code>. The <code>display</code> property (<a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#basicdisplayschema">schema</a>) holds the info needed to present the method as an available Trigger in the Zapier Editor. The <code>operation</code> (<a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#resourceschema">schema</a>) provides the implementation to make the API call.</p><p>Adding a create method looks very similar.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">list</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">create</span>: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Add Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Adds a new recipe to our cookbook.&apos;</span>,
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>,
        <span class="hljs-attr">body</span>: {
          <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
          <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
        },
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Every method you define on a <code>resource</code> Zapier converts to the appropriate Trigger, Create, or Search. Our examples
above would result in an app with a New Recipe Trigger and an Add Recipe Create.</p><p>Note the keys for the Trigger, Create, Search, and Search or Create are automatically generated (in case you want to use them in a dynamic dropdown), like: <code>{resourceName}List</code>, <code>{resourceName}Create</code>, <code>{resourceName}Search</code>, and <code>{resourceName}SearchOrCreate</code>; in the examples above, <code>{resourceName}</code> would be <code>recipe</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="triggerssearchescreates">Triggers/Searches/Creates</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Triggers, Searches, and Creates are the way an app defines what it is able to do. Triggers read
data into Zapier (i.e. watch for new recipes). Searches locate individual records (find recipe by title). Creates create
new records in your system (add a recipe to the catalog).</p><p>The definition for each of these follows the same structure. Here is an example of a trigger:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_recipe</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;new_recipe&apos;</span>, <span class="hljs-comment">// uniquely identifies the trigger</span>
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>, <span class="hljs-comment">// user-friendly word that is used to refer to the resource</span>
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>,
      },
      <span class="hljs-comment">// `operation` implements the API call used to fetch the data</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: {
          <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/recipes&apos;</span>,
        },
      },
    },
    <span class="hljs-attr">another_trigger</span>: {
      <span class="hljs-comment">// Another trigger definition...</span>
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the definition for each by looking at the <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#triggerschema">Trigger Schema</a>,
<a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#searchschema">Search Schema</a>, and <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#createschema">Create Schema</a>.</p><blockquote>
<p>To create a new integration with a premade trigger, search, or create, run <code>zapier init [your app name]</code> and select from the list that appears. You can also check out our working example apps <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps">here</a>.</p>
</blockquote><blockquote>
<p>To add a trigger, search, or create to an existing integration, run <code>zapier scaffold [trigger|search|create] [noun]</code> to create the necessary files to your project. For example, <code>zapier scaffold trigger post</code> will create a new trigger called &quot;New Post&quot;.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="return-types">Return Types</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Each of the 3 types of function should return a certain data type for use by the platform. There are automated checks to let you know when you&apos;re trying to pass the wrong type back. For reference, each expects:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <table>
<thead>
<tr>
<th>Method</th>
<th>Return Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trigger</td>
<td>Array</td>
<td>0 or more objects; passed to the <a href="https://platform.zapier.com/docs/dedupe/">deduper</a> if polling</td>
</tr>
<tr>
<td>Search</td>
<td>Array</td>
<td>0 or more objects. Only the first object will be returned, so if len &gt; 1, put the best match first</td>
</tr>
<tr>
<td>Create</td>
<td>Object</td>
<td>Return values are evaluated by <a href="https://lodash.com/docs#isPlainObject"><code>isPlainObject</code></a></td>
</tr>
</tbody>
</table>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When a trigger function returns an empty array, the Zap will not trigger. For REST Hook triggers, this can be used to filter data if the available subscription options are not specific enough for the Zap&apos;s needs.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="returning-line-items-array-of-objects">Returning Line Items (Array of Objects)</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In some cases, you may want to include multiple items in the data you return for Searches or Creates. To do that, return the set of items as an array of objects under a descriptive key. This may be as part of another object (like items in an invoice) or as multiple top-level items.</p><p>For example, a Create Order action returning an order with multiple items might look like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>order = {
  name: &apos;Zap Zaplar&apos;,
  total_cost: 25.96,
  items: [
    { name: &apos;Zapier T-Shirt&apos;, unit_price: 11.99, quantity: 3, line_amount: 35.97, category: &apos;shirts&apos; },
    { name: &apos;Orange Widget&apos;, unit_price: 7.99, quantity: 10, line_amount: 79.90, category: &apos;widgets&apos; },
    { name:&apos;Stuff&apos;, unit_price: 2.99, quantity: 7, line_amount: 20.93, category: &apos;stuff&apos; },
    { name: &apos;Allbird Shoes&apos;, unit_price: 2.99, quantity: 7, line_amount: 20.93, category: &apos;shoes&apos; },
  ],
  zip: 01002
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>While a Find Users search could return multiple items under an object key within an array, like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>result = [{
  users: [
      { name: &apos;Zap Zaplar&apos;, age: 12, city: &apos;Columbia&apos;, region: &apos;Missouri&apos; },
      { name: &apos;Orange Crush&apos;, age: 28, city: &apos;West Ocean City&apos;, region: &apos;Maryland&apos; },
      { name: &apos;Lego Brick&apos;, age: 91, city: &apos;Billund&apos;, region: &apos;Denmark&apos; },
    ],
  }];
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A standard search would return just the inner array of users, and only the first user would be provided as a final result. Returning line items instead means that the &quot;first result&quot; return is the object containing all the user details within it.</p><p>Using the standard approach is recommended, because not all Zapier integrations support line items directly, so users may need to take additional actions to reformat this data for use in their Zaps. More detail on that at <a href="https://zapier.com/help/create/basics/use-line-items-in-zaps">Use line items in Zaps</a>. However, there are use cases where returning multiple results is helpful enough to outweigh that additional effort.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="fallback-sample">Fallback Sample</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In cases where Zapier needs to show an example record to the user, but we are unable to get a live example from the API, Zapier will fallback to this hard-coded sample. This should reflect the data structure of the Trigger&apos;s perform method, and have dummy values that we can show to any user.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">,<span class="hljs-attr">sample</span>: {
  <span class="hljs-attr">dummydata_field1</span>: <span class="hljs-string">&apos;This will be compared against your perform method output&apos;</span>
  <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="input-fields">Input Fields</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>On each trigger, search, or create in the <code>operation</code> directive, you can provide fields as an array of objects under <code>inputFields</code>. Input Fields are what your users see in Zapier when setting up your app&apos;s triggers and actions. For example, you might have a &quot;Create Contact&quot; action with fields like &quot;First name&quot;, &quot;Last name&quot;, &quot;Email&quot;, etc. These fields will be able to accept input from the user, or from previous steps in a Zap. For example:</p><p><img src="https://cdn.zappy.app/52721a3cb202446b7c298e303b710471.gif" alt="gif of setting up an action field in Zap Editor"></p><p>You can find more details about setting action fields from a user perspective in <a href="https://zapier.com/help/creating-zap/">our help documentation</a>.</p><p>Those fields have various options you can provide. Here is a brief example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">creates</span>: {
    <span class="hljs-attr">create_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">inputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title of Recipe&apos;</span>,
            <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Name your recipe!&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;style&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">choices</span>: { <span class="hljs-attr">mexican</span>: <span class="hljs-string">&apos;Mexican&apos;</span>, <span class="hljs-attr">italian</span>: <span class="hljs-string">&apos;Italian&apos;</span> },
          },
        ],
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {},
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Notably, fields come in different types, which may look and act differently in the Zap editor. The default field display is a single-line input field.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <table>
<thead>
<tr>
<th>Type</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>Accepts text input.</td>
</tr>
<tr>
<td><code>text</code></td>
<td>Displays large, <code>&lt;textarea&gt;</code>-style entry box, accepts text input.</td>
</tr>
<tr>
<td><code>code</code></td>
<td>Displays large, <code>&lt;textarea&gt;</code>-style box with a fixed-width font, accepts text input.</td>
</tr>
<tr>
<td><code>integer</code></td>
<td>Accepts integer number values.</td>
</tr>
<tr>
<td><code>number</code></td>
<td>Accepts any numeric value, including decimal numbers.</td>
</tr>
<tr>
<td><code>boolean</code></td>
<td>Displays dropdown menu offering true and false options. Passes along <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><code>datetime</code></td>
<td>Accepts both <a href="https://help.zapier.com/hc/en-us/articles/8496259603341-Different-field-types-in-Zaps#date-time-fields-0-0">precise and human-readable date-time values</a>. Passes along an ISO-formatted time string.</td>
</tr>
<tr>
<td><code>file</code></td>
<td>Accepts a file object or a string. If a URL is provided in the string, Zapier will automatically make a GET for that file. Otherwise, a text file will be generated.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>Displays entered characters as hidden, accepts text input. Does not accept input from previous steps.</td>
</tr>
<tr>
<td><code>copy</code></td>
<td>Does not allow users enter data. Shows the value of the Markdown-formatted Help Text for the field as a rich text note in the Zap editor. Good for important notices to users.</td>
</tr>
</tbody>
</table>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the different field schema options at <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#fieldschema">our Field Schema</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="customdynamic-fields">Custom/Dynamic Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In some cases, you may need to provide dynamically-generated fields - especially for custom ones. This is common functionality for CRMs, form software, databases, and other highly-customizable platforms. Instead of an explicit field definition, you can provide a function we&apos;ll evaluate to return a list of fields - merging the dynamic with the static fields.</p><blockquote>
<p>You should see <code>bundle.inputData</code> partially filled in as users provide data - even in field retrieval. This allows you to build hierarchical relationships into fields (e.g. only show issues from the previously selected project).</p>
</blockquote><blockquote>
<p>A function that returns a list of dynamic fields cannot include additional functions in that list to call for dynamic fields.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> recipeFields = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(<span class="hljs-string">&apos;https://example.com/api/v2/fields.json&apos;</span>);

  <span class="hljs-comment">// Call response.throwForStatus() if you&apos;re using zapier-platform-core v9 or older</span>

  <span class="hljs-comment">// Should return an array like [{&quot;key&quot;:&quot;field_1&quot;},{&quot;key&quot;:&quot;field_2&quot;}]</span>
  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// response.json if you&apos;re using core v9 or older</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">creates</span>: {
    <span class="hljs-attr">create_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">inputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title of Recipe&apos;</span>,
            <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Name your recipe!&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;style&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">choices</span>: { <span class="hljs-attr">mexican</span>: <span class="hljs-string">&apos;Mexican&apos;</span>, <span class="hljs-attr">italian</span>: <span class="hljs-string">&apos;Italian&apos;</span> },
          },
          recipeFields, <span class="hljs-comment">// provide a function inline - we&apos;ll merge the results!</span>
        ],
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {},
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Additionally, if there is a field that affects the generation of dynamic fields, you can set the property <code>altersDynamicFields: true</code>. This informs the Zapier UI whenever the value of that field changes, the input fields need to be recomputed. For example, imagine the selection on a static dropdown called &quot;Dessert Type&quot; determining whether the function generating dynamic fields includes the field &quot;With Sprinkles?&quot; or not. If the value in one input field affects others, this is an important property to set.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;dessert&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Dessert&apos;</span>,
  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Order Dessert&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Orders a dessert.&apos;</span>,
  },
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-attr">inputFields</span>: [
      {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;type&apos;</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">choices</span>: { <span class="hljs-number">1</span>: <span class="hljs-string">&apos;cake&apos;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&apos;ice cream&apos;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&apos;cookie&apos;</span> },
        <span class="hljs-attr">altersDynamicFields</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">z, bundle</span>) </span>{
        <span class="hljs-keyword">if</span> (bundle.inputData.type === <span class="hljs-string">&apos;2&apos;</span>) {
          <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;with_sprinkles&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;boolean&apos;</span> }];
        }
        <span class="hljs-keyword">return</span> [];
      },
    ],
    <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">z, bundle</span>) </span>{
      <span class="hljs-comment">/* ... */</span>
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Only dropdowns support <code>altersDynamicFields</code>.</p>
</blockquote><p>When using dynamic fields, the fields will be retrieved in three different contexts:</p><ul>
<li>Whenever the value of a field with <code>altersDynamicFields</code> is changed, as described above.</li>
<li>Whenever the Zap Editor opens the &quot;Set up&quot; section for the trigger or action.</li>
<li>Whenever the &quot;Refresh fields&quot; button at the bottom of the Editor&apos;s &quot;Set up&quot; section is clicked.</li>
</ul><p>Be sure to set up your code accordingly - for example, don&apos;t rely on any input fields already having a value, since they won&apos;t have one the first time the &quot;Set up&quot; section loads.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="dynamic-dropdowns">Dynamic Dropdowns</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Sometimes, API endpoints require clients to specify a parent object in order to create or access the child resources. For instance, specifying a spreadsheet id in order to retrieve its worksheets. Since people don&apos;t speak in auto-incremented ID&apos;s, it is necessary that Zapier offer a simple way to select that parent using human readable handles.</p><p>Our solution is to present users a dropdown that is populated by making a live API call to fetch a list of parent objects. We call these special dropdowns &quot;dynamic dropdowns.&quot;</p><p>To define one you include the <code>dynamic</code> property on the <code>inputFields</code> object. The value for the property is a dot-separated <em>string</em> concatenation.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">//...</span>
<span class="hljs-attr">issue</span>: {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
  <span class="hljs-comment">//...</span>
  <span class="hljs-attr">create</span>: {
    <span class="hljs-comment">//...</span>
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">inputFields</span>: [
        {
          <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
          <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;This is a dynamic dropdown&apos;</span>,
          <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;project.id.name&apos;</span>
        }, <span class="hljs-comment">// will call the trigger with a key of project</span>
        {
          <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
          <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
          <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>
        }
      ]
    }
  }
}

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The dot-separated string concatenation follows this pattern:</p><ul>
<li>The key of the trigger you want to use to power the dropdown. <em>required</em></li>
<li>The value to be made available in bundle.inputData. <em>required</em></li>
<li>The human friendly value to be shown on the left of the dropdown in bold. <em>optional</em></li>
</ul><p>In the above code example the dynamic property makes reference to a trigger with a key of project. Assuming the project trigger returns an array of objects and each object contains an id and name key, i.e.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">[
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;First Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Second Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;3&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Third Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&apos;4&apos;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Fourth Option&apos;</span>, <span class="hljs-attr">dateCreated</span>: <span class="hljs-string">&apos;01/01/2000&apos;</span> },
];

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The dynamic dropdown would look something like this.
<img src="https://cdn.zappy.app/6a90fcc532704f6c14b91586f5cd1d5b.png" alt="screenshot of dynamic dropdown in Zap Editor"></p><p>In the first code example the dynamic dropdown is powered by a trigger. You can also use a resource to power a dynamic dropdown. To do this combine the resource key and the resource method using camel case.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">list</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
          }, <span class="hljs-comment">// called for project_id dropdown</span>
        },
      },
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>,
            }, <span class="hljs-comment">// calls project.list</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>,
            },
          ],
        },
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In some cases you will need to power a dynamic dropdown but do not want to make the Trigger available to the end user. Here it is best practice to create the trigger and set <code>hidden: true</code> on it&apos;s display object.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Project&apos;</span>,
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Project&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new project is added.&apos;</span>,
        <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: projectListRequest,
      },
    },
    <span class="hljs-attr">another_trigger</span>: {
      <span class="hljs-comment">// Another trigger definition...</span>
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can have multiple dynamic dropdowns in a single Trigger or Action. And a dynamic dropdown can depend on the value chosen in another dynamic dropdown when making it&apos;s API call. Such as a Spreadsheet and Worksheet dynamic dropdown in a trigger or action. This means you must make sure that the key of the first dynamic dropdown is the same as referenced in the trigger powering the second.</p><p>Let&apos;s say you have a Worksheet trigger with a <code>perform</code> method similar to this.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">perform: <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(<span class="hljs-string">&apos;https://example.com/api/v2/projects.json&apos;</span>, {
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">spreadsheet_id</span>: bundle.inputData.spreadsheet_id,
    },
  });

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re using core v9 or older</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And your New Records trigger has a Spreadsheet and a Worksheet dynamic dropdown. The Spreadsheet dynamic dropdown must have a key of <code>spreadsheet_id</code>. When the user selects a spreadsheet via the dynamic dropdown the value chosen is made available in <code>bundle.inputData</code>. It will then be passed to the Worksheet trigger when the user clicks on the Worksheet dynamic dropdown.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;new_records&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">inputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;spreadsheet_id&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Spreadsheet&apos;</span>,
            <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;spreadsheet.id.name&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;worksheet_id&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Worksheet&apos;</span>,
            <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;worksheet.id.name&apos;</span>,
          },
        ],
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <a href="https://zapier.com/apps/google-sheets/integrations#triggers-and-actions">Google Sheets</a> integration is an example of this pattern.</p><p>If you want your trigger to perform specific scripting for a dynamic dropdown you will need to make use of <code>bundle.meta.isFillingDynamicDropdown</code>. This can be useful if need to make use of <a href="#whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">pagination</a> in the dynamic dropdown to load more options.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">list</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">canPaginate</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (bundle.meta.isFillingDynamicDropdown) {
              <span class="hljs-comment">// perform pagination request here</span>
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
            }
          },
        },
      },
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>,
            }, <span class="hljs-comment">// calls project.list</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>,
            },
          ],
        },
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="search-powered-fields">Search-Powered Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For fields that take id of another object to create a relationship between the two (EG: a project id for a ticket), you can specify the <code>search</code> property on the field to indicate that Zapier needs to prompt the user to setup a Search step to populate the value for this field. Similar to dynamic dropdowns, the value for this property is a dot-separated concatenation of a search&apos;s key and the field to use for the value.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">resources</span>: {
    <span class="hljs-attr">project</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">search</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Project 1&apos;</span> }];
          }, <span class="hljs-comment">// called for project_id</span>
        },
      },
    },
    <span class="hljs-attr">issue</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;issue&apos;</span>,
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">create</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">operation</span>: {
          <span class="hljs-attr">inputFields</span>: [
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;project_id&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Project&apos;</span>,
              <span class="hljs-attr">dynamic</span>: <span class="hljs-string">&apos;projectList.id.name&apos;</span>,
              <span class="hljs-attr">search</span>: <span class="hljs-string">&apos;projectSearch.id&apos;</span>,
            }, <span class="hljs-comment">// calls project.search (requires a trigger in the &quot;dynamic&quot; property)</span>
            {
              <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
              <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Title&apos;</span>,
              <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;What is the name of the issue?&apos;</span>,
            },
          ],
        },
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><strong>NOTE:</strong> This has to be combined with the <code>dynamic</code> property to give the user a guided experience when setting up a Zap.</p><p>If you don&apos;t define a trigger for the <code>dynamic</code> property, the search connector won&apos;t show.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="computed-fields">Computed Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In OAuth and Session Auth, Zapier automatically stores every value from an integration&#x2019;s auth API response i.e. that&#x2019;s <code>getAccessToken</code> and <code>refreshAccessToken</code> for OAuth and <code>getSessionKey</code> for session auth.</p><p>You can return additional fields in these responses, on top of the expected <code>access_token</code> or <code>refresh_token</code> for OAuth and <code>sessionKey</code> for Session auth. They will be saved in <code>bundle.authData</code>. You can reference these fields in any subsequent API call as needed.</p><blockquote>
<p>Note: Only OAuth and Session Auth support computed fields.</p>
</blockquote><p>If you want Zapier to validate that these additional fields exist, you need to use Computed Fields. If you define computed fields in your integration, Zapier will check to make sure those fields exist when it runs the authentication test API call.</p><p>Computed fields work like any other field, though with <code>computed: true</code> property, and <code>required: false</code> as user can not enter computed fields themselves. Reference computed fields in API calls as <code>{{bundle.authData.field}}</code>, replacing <code>field</code> with that field&apos;s name from your test API call response.</p><p>You can see examples of computed fields in the <a href="#oauth2">OAuth2</a> or <a href="#session">Session Auth</a> example sections.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When your action needs to accept an array of items, you can include an input field with the <code>children</code> attribute. The <code>children</code> attribute accepts a list of <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#fieldschema">fields</a> that can be input for each item in this array.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">inputFields</span>: [
      {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;lineItems&apos;</span>,
        <span class="hljs-attr">children</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;lineItemId&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Line Item ID&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Name&apos;</span>,
            <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;description&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Description&apos;</span>,
          },
        ],
      },
    ],
    <span class="hljs-comment">// ...</span>
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="output-fields">Output Fields</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>On each trigger, search, or create in the operation directive - you can provide an array of objects as fields under the <code>outputFields</code>. Output Fields are what your users would see when they select a field provided by your trigger, search or create to map it to another.</p><p>Output Fields are optional, but can be used to:</p><ul>
<li>Define friendly labels for the returned fields. By default, we will <em>humanize</em> for example <code>my_key</code> as <em>My Key</em>.</li>
<li>Make sure that custom fields that may not be found in every live sample and - since they&apos;re custom to the connected account - cannot be defined in the static sample, can still be mapped.</li>
</ul><p>The <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#fieldschema">schema</a> for <code>outputFields</code> is shared with <code>inputFields</code> but only the <code>key</code> and <code>required</code> properties are relevant.</p><p>Custom/Dynamic Output Fields are defined in the same way as <a href="#customdynamic-fields">Custom/Dynamic Input Fields</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="nested--children-line-item-fields">Nested &amp; Children (Line Item) Fields</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an Output Field for a nested field use <code>{{parent}}__{{key}}</code>. For children (line item) fields use <code>{{parent}}[]{{key}}</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> recipeOutputFields = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(<span class="hljs-string">&apos;https://example.com/api/v2/fields.json&apos;</span>);

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-comment">// Should return an array like [{&quot;key&quot;:&quot;field_1&quot;,&quot;label&quot;:&quot;Label for Custom Field&quot;}]</span>
  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re on core v9 or older</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_recipe</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {},
        <span class="hljs-attr">sample</span>: {
          <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">&apos;Pancake&apos;</span>,
          <span class="hljs-attr">author</span>: {
            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Amy&apos;</span>,
          },
          <span class="hljs-attr">ingredients</span>: [
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Egg&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">1</span>,
            },
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Milk&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">60</span>,
              <span class="hljs-attr">unit</span>: <span class="hljs-string">&apos;g&apos;</span>,
            },
            {
              <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Flour&apos;</span>,
              <span class="hljs-attr">amount</span>: <span class="hljs-number">30</span>,
              <span class="hljs-attr">unit</span>: <span class="hljs-string">&apos;g&apos;</span>,
            },
          ],
        },
        <span class="hljs-comment">// an array of objects is the simplest way</span>
        <span class="hljs-attr">outputFields</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;id&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Recipe ID&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;title&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Recipe Title&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;author__id&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Author User ID&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;integer&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;author__name&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Author Name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]name&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Name&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]amount&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Amount&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;number&apos;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;ingredients[]unit&apos;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Ingredient Unit&apos;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>,
          },
          recipeOutputFields, <span class="hljs-comment">// provide a function inline - we&apos;ll merge the results!</span>
        ],
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="z-object">Z Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We provide several methods off of the <code>z</code> object, which is provided as the first argument to all function calls in your app.</p><blockquote>
<p>The <code>z</code> object is passed into your functions as the first argument - IE: <code>perform: (z) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zrequesturl-options"><code>z.request([url], options)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.request([url], options)</code> is a promise based HTTP client with some Zapier-specific goodies. See <a href="#making-http-requests">Making HTTP Requests</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zconsole"><code>z.console</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.console.log(message)</code> is a logging console, similar to Node.js <code>console</code> but logs remotely, as well as to stdout in tests. See <a href="#console-logging">Log Statements</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zdehydratefunc-inputdata"><code>z.dehydrate(func, inputData)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.dehydrate(func, inputData)</code> is used to lazily evaluate a function, perfect to avoid API calls during polling or for reuse. See <a href="#dehydration">Dehydration</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zdehydratefilefunc-inputdata"><code>z.dehydrateFile(func, inputData)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.dehydrateFile</code> is used to lazily download a file, perfect to avoid API calls during polling or for reuse. See <a href="#file-dehydration">File Dehydration</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zstashfilebufferstringstream-knownlength-filename-contenttype"><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code> is a promise based file stasher that returns a URL file pointer. See <a href="#stashing-files">Stashing Files</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zjson"><code>z.JSON</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.JSON</code> is similar to the JSON built-in like <code>z.JSON.parse(&apos;...&apos;)</code>, but catches errors and produces nicer tracebacks.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zhash"><code>z.hash()</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.hash()</code> is a crypto tool for doing things like <code>z.hash(&apos;sha256&apos;, &apos;my password&apos;)</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zerrors"><code>z.errors</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.errors</code> is a collection error classes that you can throw in your code, like <code>throw new z.errors.HaltedError(&apos;...&apos;)</code>.</p><p>The available errors are:</p><ul>
<li><code>Error</code> (<em>added in v9.3.0</em>) - Stops the current operation, allowing for (auto) replay. Read more on <a href="#general-errors">General Errors</a></li>
<li><code>HaltedError</code> - Stops current operation, but will never turn off Zap. Read more on <a href="#halting-execution">Halting Execution</a></li>
<li><code>ExpiredAuthError</code> - Stops the current operation and emails user to manually reconnect. Read more on <a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
<li><code>RefreshAuthError</code> - (OAuth2 or Session Auth) Tells Zapier to refresh credentials and retry operation. Read more on <a href="#stale-authentication-credentials">Stale Authentication Credentials</a></li>
<li><code>ThrottledError</code> (<em>new in v11.2.0</em>) - Tells Zapier to retry the current operation after a delay specified in seconds. Read more on <a href="#handling-throttled-requests">Handling Throttled Requests</a></li>
</ul><p>For more details on error handling in general, see <a href="#error-handling">here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zcursor"><code>z.cursor</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.cursor</code> object exposes two methods:</p><ul>
<li><code>z.cursor.get(): Promise&lt;string|null&gt;</code></li>
<li><code>z.cursor.set(string): Promise&lt;null&gt;</code></li>
</ul><p>Any data you <code>set</code> will be available to that Zap for about an hour (or until it&apos;s overwritten). For more information, see: <a href="#paging">paging</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="zgeneratecallbackurl"><code>z.generateCallbackUrl()</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.generateCallbackUrl()</code> will return a callback URL your app can <code>POST</code> to later for handling long running tasks (like transcription or encoding jobs). In the meantime, the Zap and Task will wait for your response and the user will see the Task marked as waiting.</p><p>For example, in your <code>perform</code> you might do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> perform = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-comment">// something like this url:</span>
  <span class="hljs-comment">// https://zapier.com/hooks/callback/123/abcdef01-2345-6789-abcd-ef0123456789/abcdef0123456789abcdef0123456789abcdef01/</span>
  <span class="hljs-keyword">const</span> callbackUrl = z.generateCallbackUrl();
  <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/slow-job&apos;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-comment">// ... whatever your integration needs</span>
      <span class="hljs-attr">url</span>: callbackUrl,
    },
  });
  <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;hello&quot;</span>: <span class="hljs-string">&quot;world&quot;</span>}; <span class="hljs-comment">// available later in bundle.outputData</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And in your own <code>/api/slow-job</code> view (or more likely, an async job) you&apos;d make this request to Zapier when the long-running job completes to populate <code>bundle.cleanedRequest</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/hooks/callback/123/abcdef01-2345-6789-abcd-ef0123456789/abcdef0123456789abcdef0123456789abcdef01/</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: zapier.com
<span class="hljs-attribute">Content-Type</span>: application/json

<span class="json">{<span class="hljs-attr">&quot;foo&quot;</span>:<span class="hljs-string">&quot;bar&quot;</span>}</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And finally, in a <code>performResume</code> to handle the final step which will receive three bundle properties:</p><ul>
<li><code>bundle.outputData</code> is <code>{&quot;hello&quot;: &quot;world&quot;}</code>, the data returned from the initial <code>perform</code></li>
<li><code>bundle.cleanedRequest</code> is <code>{&quot;foo&quot;: &quot;bar&quot;}</code>, the payload from the callback URL</li>
<li><code>bundle.rawRequest</code> is the full request object corresponding to <code>bundle.cleanedRequest</code></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> performResume = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-comment">// this will give a final value of: {&quot;hello&quot;: &quot;world&quot;, &quot;foo&quot;: &quot;bar&quot;}</span>
  <span class="hljs-keyword">return</span>  { ...bundle.outputData, ...bundle.cleanedRequest };
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>The app will have a maximum of 30 days to <code>POST</code> to the callback URL. If a user deletes or modifies the Zap or Task in the meantime, we will not resume the task.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="bundle-object">Bundle Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This object holds the user&apos;s auth details and the data for the API requests.</p><blockquote>
<p>The <code>bundle</code> object is passed into your functions as the second argument - IE: <code>perform: (z, bundle) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleauthdata"><code>bundle.authData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.authData</code> is user-provided authentication data, like <code>api_key</code> or <code>access_token</code>. <a href="#authentication">Read more on authentication.</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleinputdata"><code>bundle.inputData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputData</code> is user-provided data for this particular run of the trigger/search/create, as defined by the <a href="#input-fields"><code>inputFields</code></a>. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;his name is Bobby Flay&apos;</span>,
  <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;he cooks mediterranean&apos;</span>,
  <span class="hljs-attr">scheduledAt</span>: <span class="hljs-string">&quot;2021-09-09T09:00:00-07:00&quot;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleinputdataraw"><code>bundle.inputDataRaw</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputDataRaw</code> is like <code>bundle.inputData</code>, but before processing such as interpreting friendly datetimes and rendering <code>{{curlies}}</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;his name is {{123__chef_name}}&apos;</span>,
  <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;he cooks {{456__style}}&apos;</span>,
  <span class="hljs-attr">scheduledAt</span>: <span class="hljs-string">&quot;today&quot;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>&quot;curlies&quot; represent data mapped in from previous steps. They take the form <code>{{NODE_ID__key_name}}</code>.</p>
</blockquote><p>You&apos;ll usually want to use <code>bundle.inputData</code> instead.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlemeta"><code>bundle.meta</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.meta</code> contains extra information useful for doing advanced behaviors depending on what the user is doing. It has the following options:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <table>
<thead>
<tr>
<th>key</th>
<th>default</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isLoadingSample</code></td>
<td><code>false</code></td>
<td>If true, this run was initiated manually via the Zap Editor</td>
</tr>
<tr>
<td><code>isFillingDynamicDropdown</code></td>
<td><code>false</code></td>
<td>If true, this poll is being used to populate a dynamic dropdown. You only need to return the fields you specified (such as <code>id</code> and <code>name</code>), though returning everything is fine too</td>
</tr>
<tr>
<td><code>isPopulatingDedupe</code></td>
<td><code>false</code></td>
<td>If true, the results of this poll will be used to initialize the deduplication list rather than trigger a zap. You should grab as many items as possible. See also: <a href="#dedup">deduplication</a></td>
</tr>
<tr>
<td><code>limit</code></td>
<td><code>-1</code></td>
<td>The number of items you should fetch. <code>-1</code> indicates there&apos;s no limit. Build this into your calls insofar as you are able</td>
</tr>
<tr>
<td><code>page</code></td>
<td><code>0</code></td>
<td>Used in <a href="#paging">paging</a> to uniquely identify which page of results should be returned</td>
</tr>
<tr>
<td><code>isTestingAuth</code></td>
<td><code>false</code></td>
<td>(legacy property) If true, the poll was triggered by a user testing their account (via <a href="https://cdn.zapier.com/storage/photos/5c94c304ce11b02c073a973466a7b846.png">clicking &quot;test&quot;</a> or during setup). We use this data to populate the auth label, but it&apos;s mostly used to verify we made a successful authenticated request</td>
</tr>
</tbody>
</table>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Before v8.0.0, the information in <code>bundle.meta</code> was different. See <a href="https://github.com/zapier/zapier-platform-cli/blob/a058e6d538a75d215d2e0c52b9f49a97218640c4/README.md#bundlemeta">the old docs</a> for the previous values and <a href="https://github.com/zapier/zapier-platform/wiki/bundle.meta-changes">the wiki</a> for a mapping of old values to new.</p>
</blockquote><p>Here&apos;s an example of a polling trigger that is also used to power a dynamic dropdown:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> perform = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> params = { <span class="hljs-attr">per_page</span>: <span class="hljs-number">100</span> }; <span class="hljs-comment">// poll for the most recent 100 teams</span>

  <span class="hljs-keyword">if</span> (bundle.meta.isFillingDynamicDropdown) {
    <span class="hljs-comment">// dynamic dropdowns support pagination</span>
    params.per_page = <span class="hljs-number">30</span>;
    params.offset = params.per_page * bundle.meta.page;
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/teams`</span>,
    params,
  });

  <span class="hljs-keyword">return</span> response.json;
};
  <span class="hljs-comment">// ...</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlerawrequest"><code>bundle.rawRequest</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.rawRequest</code> is only available in the <code>perform</code> for webhooks, <code>getAccessToken</code> for OAuth authentication methods, and <code>performResume</code> in a callback action.</p>
</blockquote><p><code>bundle.rawRequest</code> holds raw information about the HTTP request that triggered the <code>perform</code> method or that represents the user&apos;s browser request that triggered the <code>getAccessToken</code> call:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>{
  method: &apos;POST&apos;,
  querystring: &apos;foo=bar&amp;baz=qux&apos;,
  headers: {
    &apos;Content-Type&apos;: &apos;application/json&apos;
  },
  content: &apos;{&quot;hello&quot;: &quot;world&quot;}&apos;
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In <code>bundle.rawRequest</code>, headers other than <code>Content-Length</code> and <code>Content-Type</code> will be prefixed with <code>Http-</code>, and all headers will be named in Camel-Case. For example, the header <code>X-Time-GMT</code> would become <code>Http-X-Time-Gmt</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlecleanedrequest"><code>bundle.cleanedRequest</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.cleanedRequest</code> is only available in the <code>perform</code> for webhooks, <code>getAccessToken</code> for oauth authentication methods, and <code>performResume</code> in a callback action.</p>
</blockquote><p><code>bundle.cleanedRequest</code> will return a formatted and parsed version of the request. Some or all of the following will be available:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>{
  method: &apos;POST&apos;,
  querystring: {
    foo: &apos;bar&apos;,
    baz: &apos;qux&apos;
  },
  headers: {
    &apos;Content-Type&apos;: &apos;application/json&apos;
  },
  content: {
    hello: &apos;world&apos;
  }
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundleoutputdata"><code>bundle.outputData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.outputData</code> is only available in the <code>performResume</code> in a callback action.</p>
</blockquote><p><code>bundle.outputData</code> will return a whatever data you originally returned in the <code>perform</code>, allowing you to mix that with <code>bundle.rawRequest</code> or <code>bundle.cleanedRequest</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundletargeturl"><code>bundle.targetUrl</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.targetUrl</code> is only available in the <code>performSubscribe</code> and <code>performUnsubscribe</code> methods for webhooks.</p>
</blockquote><p>This the URL to which you should send hook data. It&apos;ll look something like <code>https://hooks.zapier.com/1234/abcd</code>. We provide it so you can make a POST request to your server. Your server should store this URL and use is as a destination when there&apos;s new data to report.</p><p>For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> subscribeHook = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {

  <span class="hljs-keyword">const</span> options = {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api/hooks&apos;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-attr">url</span>: bundle.targetUrl, <span class="hljs-comment">// bundle.targetUrl has the Hook URL this app should call</span>
    },
  };

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(options);
  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re using core v9 or older</span>
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">performSubscribe</span>: subscribeHook,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Read more in the <a href="https://github.com/zapier/zapier-platform/blob/main/example-apps/rest-hooks/triggers/recipe.js">REST hook example</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="bundlesubscribedata"><code>bundle.subscribeData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>bundle.subscribeData</code> is available in the <code>perform</code> and <code>performUnsubscribe</code> method for webhooks.</p>
</blockquote><p>This is an object that contains the data you returned from the <code>performSubscribe</code> function. It should contain whatever information you need send a <code>DELETE</code> request to your server to stop sending webhooks to Zapier.</p><p>Read more in the <a href="https://github.com/zapier/zapier-platform/blob/main/example-apps/rest-hooks/triggers/recipe.js">REST hook example</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="environment">Environment</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Apps can define environment variables that are available when the app&apos;s code executes. They work just like environment
variables defined on the command line. They are useful when you have data like an OAuth client ID and secret that you
don&apos;t want to commit to source control. Environment variables can also be used as a quick way to toggle between
a staging and production environment during app development.</p><p>It is important to note that <strong>variables are defined on a per-version basis!</strong> When you push a new version, the
existing variables from the previous version are copied, so you don&apos;t have to manually add them. However, edits
made to one version&apos;s environment will not affect the other versions.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="defining-environment-variables">Defining Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an environment variable, use the <code>env</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will set the environment variable on Zapier.com</span>
zapier env:<span class="hljs-built_in">set</span> 1.0.0 MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will likely also want to set the value locally for testing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Alternatively, we provide some extra tooling to work with an <code>.env</code> (or <code>.environment</code>, see below note) that looks like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>.env</code> is the new recommended name for the environment file since v5.1.0. The old name <code>.environment</code> is deprecated but will continue to work for backward compatibility.</p>
</blockquote><p>And then in your <code>test/basic.js</code> file:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

should(<span class="hljs-string">&apos;some tests&apos;</span>, () =&gt; {
  zapier.tools.env.inject(); <span class="hljs-comment">// testing only!</span>
  <span class="hljs-built_in">console</span>.log(process.env.MY_SECRET_VALUE);
  <span class="hljs-comment">// should print &apos;1234&apos;</span>
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>This is a popular way to provide <code>process.env.ACCESS_TOKEN || bundle.authData.access_token</code> for convenient testing.</p>
</blockquote><blockquote>
<p><strong>NOTE</strong> Variables defined via <code>zapier env:set</code> will <em>always</em> be uppercased. For example, you would access the variable defined by <code>zapier env:set 1.0.0 foo_bar=1234</code> with <code>process.env.FOO_BAR</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="accessing-environment-variables">Accessing Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view existing environment variables, use the <code>env</code> command.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will print a table listing the variables for this version</span>
zapier env:get 1.0.0
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Within your app, you can access the environment via the standard <code>process.env</code> - any values set via local <code>export</code> or <code>zapier env:set</code> will be there.</p><p>For example, you can access the <code>process.env</code> in your perform functions and in templates:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> listExample = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> httpOptions = {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&apos;my-header&apos;</span>: process.env.MY_SECRET_VALUE,
    },
  };
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(
    <span class="hljs-string">&apos;https://example.com/api/v2/recipes.json&apos;</span>,
    httpOptions
  );

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re using core v9 or older</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;{{process.env.MY_NOUN}}&apos;</span>,
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: listExample,
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note! Be sure to lazily access your environment variables - see <a href="#when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="making-http-requests">Making HTTP Requests</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two ways to make HTTP requests:</p><ol>
<li><a href="#shorthand-http-requests"><strong>Shorthand HTTP Requests</strong></a> - Easy to use, but limits what you can control. Best for simple requests.</li>
<li><a href="#manual-http-requests"><strong>Manual HTTP Requests</strong></a> - Gives you full control over the request and response.</li>
</ol><p>Use these helper constructs to reduce boilerplate:</p><ol>
<li><code>requestTemplate</code> - an object literal of <a href="#http-request-options">HTTP request options</a> that will be merged with every request.</li>
<li><code>beforeRequest</code> - <a href="#using-http-middleware">middleware</a> that mutates every request before it is sent.</li>
<li><code>afterResponse</code> - <a href="#using-http-middleware">middleware</a> that mutates every response before it is completed.</li>
</ol><blockquote>
<p>Note: you can install any HTTP client you like - but this is greatly discouraged as you lose <a href="#http-logging">automatic HTTP logging</a> and middleware.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="shorthand-http-requests">Shorthand HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For simple HTTP requests that do not require special pre- or post-processing, you can specify the <a href="#http-request-options">HTTP request options</a> as an object literal in your app definition.</p><p>This features:</p><ol>
<li>Lazy <code>{{curly}}</code> replacement.</li>
<li>JSON and form body de-serialization.</li>
<li>Automatic non-2xx error raising.</li>
</ol>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> triggerShorthandRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/v2/api/recipes.json&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">sort_by</span>: <span class="hljs-string">&apos;id&apos;</span>,
    <span class="hljs-attr">sort_order</span>: <span class="hljs-string">&apos;DESC&apos;</span>,
  },
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: triggerShorthandRequest,
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In the URL above, <code>{{bundle.authData.subdomain}}</code> is automatically replaced with the live value from the bundle. If the call returns a non 2xx return code, an error is automatically raised. The response body is automatically parsed as JSON or form-encoded and returned.</p><p>An error will be raised if the response cannot be parsed as JSON or form-encoded. To use shorthand requests with other response types, add <a href="#using-http-middleware">middleware</a> that sets <code>response.data</code> to the parsed response.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="manual-http-requests">Manual HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Use this when you need full control over the request/response. For example:</p><ol>
<li>To do processing (usually involving <a href="#bundleinputdata"><code>bundle.inputData</code></a>) before a request is made</li>
<li>To do processing of an API&apos;s response before you return data to Zapier</li>
<li>To process an unusual response type, such as XML</li>
</ol><p>To make a manual request, pass your <a href="#http-request-options">request options</a> to <code>z.request()</code> then use the resulting <a href="#http-response-object">response object</a> to return the data you want:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> listRecipes = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-comment">// Custom processing of bundle.inputData would go here...</span>

  <span class="hljs-keyword">const</span> httpRequestOptions = {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/v2/api/recipes.json&apos;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">cuisine</span>: bundle.inputData.cuisine,
    },
  };
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(httpRequestOptions);
  <span class="hljs-keyword">const</span> recipes = response.data;

  <span class="hljs-comment">// Custom processing of recipes would go here...</span>

  <span class="hljs-keyword">return</span> recipes;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: listRecipes,
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Manual requests perform lazy <code>{{curly}}</code> replacement. In the URL above, <code>{{bundle.authData.subdomain}}</code> is automatically replaced with the live value from the bundle.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="post-and-put-requests">POST and PUT Requests</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To POST or PUT data to your API you can do this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">perform</span>: <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
          <span class="hljs-keyword">const</span> recipe = {
            <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
            <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
            <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;Get some dough....&apos;</span>,
          };

          <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/v2/recipes.json&apos;</span>,
            <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(recipe),
          };
          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(options);

          <span class="hljs-comment">// Throw and try to extract message from standard error responses</span>
          <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">201</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.Error(
              <span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>,
              <span class="hljs-string">&apos;CreateRecipeError&apos;</span>,
              response.status
            );
          }

          <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re using core v9 or older</span>
        },
      },
    },
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you need to call <code>z.JSON.stringify()</code> before setting the <code>body</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="using-http-middleware">Using HTTP middleware</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To process all HTTP requests in a certain way, use the <code>beforeRequest</code> and <code>afterResponse</code> middleware functions.</p><p>Middleware functions go in your app definition:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> addHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;my-header&apos;</span>] = <span class="hljs-string">&apos;from zapier&apos;</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-comment">// This example only works on core v10+!</span>
<span class="hljs-keyword">const</span> parseXML = <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
  <span class="hljs-comment">// Parse content that is not JSON</span>
  <span class="hljs-comment">// eslint-disable-next-line no-undef</span>
  response.data = xml.parse(response.content);
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-comment">// This example only works on core v10+!</span>
<span class="hljs-keyword">const</span> handleWeirdErrors = <span class="hljs-function">(<span class="hljs-params">response, z</span>) =&gt;</span> {
  <span class="hljs-comment">// Prevent `throwForStatus` from throwing for a certain status.</span>
  <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">456</span>) {
    response.skipThrowForStatus = <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">200</span> &amp;&amp; response.data.success === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.Error(response.data.message, response.data.code);
  }
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">beforeRequest</span>: [addHeader],
  <span class="hljs-attr">afterResponse</span>: [parseXML, handleWeirdErrors],
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>beforeRequest</code> middleware function takes a request options object, and returns a (possibly mutated) request object. An <code>afterResponse</code> middleware function takes a response object, and returns a (possibly mutated) response object. Middleware functions are executed in the order specified in the app definition, and each subsequent middleware receives the request or response object returned by the previous middleware.</p><p>Middleware functions can be asynchronous - just return a promise from the middleware function.</p><p>The second argument for middleware is the <code>z</code> object, but it does <em>not</em> include <code>z.request()</code> as using that would easily create infinite loops.</p><p>Here is the full request lifecycle when you call <code>z.request({...})</code>:</p><ol>
<li>set defaults on the <code>request</code> object</li>
<li>run your <code>beforeRequest</code> middleware functions in order</li>
<li>add applicable auth headers (e.g. adding <code>Basic ...</code> for <code>basic</code> auth), if applicable</li>
<li>add <code>request.params</code> to <code>request.url</code></li>
<li>execute the <code>request</code>, store the result in <code>response</code></li>
<li>try to auto-parse response body for non-raw requests, store result in <code>response.data</code></li>
<li>log the request to Zapier&apos;s logging server</li>
<li>if the status code is <code>401</code>, you&apos;re using a refresh-able auth (such as <code>oauth2</code> or <code>session</code>) <em>and</em> <code>autoRefresh</code> is <code>true</code> in your auth configuration, throw a <code>RefreshAuthError</code>. The server will attempt to refresh the authentication again and retry the whole step</li>
<li>run your <code>afterResponse</code> middleware functions in order</li>
<li>call <code>response.throwForStatus()</code> unless <code>response.skipThrowForStatus</code> is <code>true</code></li>
</ol><p>The resulting response object is returned from <code>z.request()</code>.</p><blockquote>
<p>Example App: check out <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/middleware">https://github.com/zapier/zapier-platform/tree/main/example-apps/middleware</a> for a working example app using HTTP middleware.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="error-response-handling">Error Response Handling</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Since <code>v10.0.0</code>, <code>z.request()</code> calls <code>response.throwForStatus()</code> before it returns a response. You can disable automatic error throwing by setting <code>skipThrowForStatus</code> on the request object:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// Disable automatic error throwing on the request object</span>
<span class="hljs-keyword">const</span> perform = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;...&apos;</span>,
    <span class="hljs-attr">skipThrowForStatus</span>: <span class="hljs-literal">true</span>
  });
  <span class="hljs-comment">// Now you handle error response on your own.</span>
  <span class="hljs-comment">// The following is equivalent to response.throwForStatus(),</span>
  <span class="hljs-comment">// but you have to remember to do it on every request</span>
  <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">400</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.ResponseError(response);
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can also do it in <code>afterResponse</code> if the API uses a status code &gt;= 400 that should not be treated as an error.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// Don&apos;t throw an error when response status is 456</span>
<span class="hljs-keyword">const</span> disableAutoThrowOn456 = <span class="hljs-function">(<span class="hljs-params">response, z</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">456</span>) {
    response.skipThrowForStatus = <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> response;
};
<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">afterResponse</span>: [disableAutoThrowOn456],
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For developers using v9.x and below, it&apos;s your responsibility to throw an exception for an error response. That means you should call <code>response.throwForStatus()</code> or throw an error yourself, likely following the <code>z.request</code> call.</p><p>This behavior has changed periodically across major versions, which changes how/when you have to worry about handling errors. Here&apos;s a diagram to illustrate that:</p><p><img src="https://cdn.zappy.app/e835d9beca1b6489a065d51a381613f3.png" alt></p><p>Ensure you&apos;re handling errors correctly for your platform version. The latest released version is <strong>14.0.1</strong>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-request-options">HTTP Request Options</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="#shorthand-http-requests">Shorthand requests</a> and <a href="#manual-http-requests">manual requests</a> support the following HTTP <code>options</code>:</p><ul>
<li><code>url</code>: HTTP url, you can provide it as a separate argument (<code>z.request(url, options)</code>) or as part of the <code>options</code> object (<code>z.request({url: url, ...})</code>).</li>
<li><code>method</code>: HTTP method, default is <code>GET</code>.</li>
<li><code>headers</code>: request headers object, format <code>{&apos;header-key&apos;: &apos;header-value&apos;}</code>.</li>
<li><code>params</code>: URL query params object, format <code>{&apos;query-key&apos;: &apos;query-value&apos;}</code>.</li>
<li><code>body</code>: request body, can be a string, buffer, readable stream or plain object. When it is an object/array and the <code>Content-Type</code> header is <code>application/x-www-form-urlencoded</code> the body will be transformed to query string parameters, otherwise we&apos;ll set the header to <code>application/json; charset=utf-8</code> and JSON encode the body. Default is <code>null</code>.</li>
<li><code>json</code>: shortcut object/array/etc. you want to JSON encode into body. Default is <code>null</code>.</li>
<li><code>form</code>: shortcut object. you want to form encode into body. Default is <code>null</code>.</li>
<li><code>raw</code>: set this to stream the response instead of consuming it immediately. Default is <code>false</code>.</li>
<li><code>redirect</code>: set to <code>manual</code> to extract redirect headers, <code>error</code> to reject redirect, default is <code>follow</code>.</li>
<li><code>follow</code>: maximum redirect count, set to <code>0</code> to not follow redirects. default is <code>20</code>.</li>
<li><code>compress</code>: support gzip/deflate content encoding. Set to <code>false</code> to disable. Default is <code>true</code>.</li>
<li><code>agent</code>: Node.js <code>http.Agent</code> instance, allows custom proxy, certificate etc. Default is <code>null</code>.</li>
<li><code>timeout</code>: request / response timeout in ms. Set to <code>0</code> to disable (OS limit still applies), timeout reset on <code>redirect</code>. Default is <code>0</code> (disabled).</li>
<li><code>size</code>: maximum response body size in bytes. Set to <code>0</code> to disable. Default is <code>0</code> (disabled).</li>
<li><code>skipThrowForStatus</code> (<em>added in v10.0.0</em>): don&apos;t call <code>response.throwForStatus()</code> before resolving the request with <code>response</code>. See <a href="#http-response-object">HTTP Response Object</a>.</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>
  },
  <span class="hljs-comment">// only provide body, json or form...</span>
  <span class="hljs-attr">body</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>}, <span class="hljs-comment">// or &apos;{&quot;hello&quot;: &quot;world&quot;}&apos; or &apos;hello=world&apos;</span>
  <span class="hljs-attr">json</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-attr">form</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-comment">// access node-fetch style response.body</span>
  <span class="hljs-attr">raw</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">redirect</span>: <span class="hljs-string">&apos;follow&apos;</span>,
  <span class="hljs-attr">follow</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">agent</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">0</span>,
})
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-response-object">HTTP Response Object</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The response object returned by <code>z.request([url], options)</code> supports the following fields and methods:</p><ul>
<li><code>status</code>: The response status code, i.e. <code>200</code>, <code>404</code>, etc.</li>
<li><code>content</code>: The response content as a String. For Buffer, try <code>options.raw = true</code>.</li>
<li><code>data</code> (<em>added in v10.0.0</em>): The response content as an object if the content is JSON or <code>application/x-www-form-urlencoded</code> (<code>undefined</code> otherwise).</li>
<li><code>headers</code>: Response headers object. The header keys are all lower case.</li>
<li><code>getHeader(key)</code>: Retrieve response header, case insensitive: <code>response.getHeader(&apos;My-Header&apos;)</code></li>
<li><code>skipThrowForStatus</code> (<em>added in v10.0.0</em>): don&apos;t call <code>throwForStatus()</code> before resolving the request with this response.</li>
<li><code>throwForStatus()</code>: Throws an error if <code>400 &lt;= statusCode &lt; 600</code>.</li>
<li><code>request</code>: The original request options object (see above).</li>
</ul><p>Additionally, if <code>request.raw</code> is <code>true</code>, the raw response has the following properties:</p><ul>
<li><code>json()</code>: Get the response content as an object, if <code>options.raw = true</code> and content is JSON (returns a promise). <code>undefined</code> in non-raw requests.</li>
<li><code>body</code>: A stream available only if you provide <code>options.raw = true</code>.</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
  <span class="hljs-comment">// options</span>
});

<span class="hljs-comment">// A bunch of examples for demonstration</span>
response.status;
response.headers[<span class="hljs-string">&apos;Content-Type&apos;</span>];
response.getHeader(<span class="hljs-string">&apos;content-type&apos;</span>);
response.request; <span class="hljs-comment">// original request options</span>
response.throwForStatus();

<span class="hljs-keyword">if</span> (options.raw === <span class="hljs-literal">false</span>) { <span class="hljs-comment">// (default)</span>
  <span class="hljs-comment">// If you&apos;re core v10+</span>
  response.data; <span class="hljs-comment">// same as...</span>
  z.JSON.parse(response.content); <span class="hljs-comment">// or...</span>
  querystring.parse(response.content);

  <span class="hljs-comment">// If you&apos;re core v9 or older...</span>
  response.json;  <span class="hljs-comment">// same as</span>
  z.JSON.parse(response.content);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">const</span> buf = <span class="hljs-keyword">await</span> response.buffer();
  buf.toString();

  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> response.text();

  <span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> response.json();

  response.body.pipe(otherStream);
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="dehydration">Dehydration</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Dehydration, and its counterpart Hydration, is a tool that can lazily load data that might be otherwise expensive to retrieve aggressively.</p><ul>
<li><strong>Dehydration</strong> - think of this as &quot;make a pointer&quot;, you control the creation of pointers with <code>z.dehydrate(func, inputData)</code> (or <code>z.dehydrateFile(func, inputData)</code> for files). This usually happens in a trigger step.</li>
<li><strong>Hydration</strong> - think of this as an automatic step that &quot;consumes a pointer&quot; and &quot;returns some data&quot;, Zapier does this automatically behind the scenes. This usually happens in an action step.</li>
</ul><blockquote>
<p>This is very common when <a href="#stashing-files">Stashing Files</a> - but that isn&apos;t their only use!</p>
</blockquote><p>The method <code>z.dehydrate(func, inputData)</code> has two required arguments:</p><ul>
<li><code>func</code> - the function to call to fetch the extra data. Can be any raw <code>function</code>, defined in the file doing the dehydration or imported from another part of your app. You must also register the function in the app&apos;s <code>hydrators</code> property</li>
<li><code>inputData</code> - this is an object that contains things like a <code>path</code> or <code>id</code> - whatever you need to load data on the other side</li>
</ul><blockquote>
<p><strong>Why do I need to register my functions?</strong> Because of how JavaScript works with its module system, we need an explicit handle on the function that can be accessed from the App definition without trying to &quot;automagically&quot; (and sometimes incorrectly) infer code locations.</p>
</blockquote><p>Here is an example that pulls in extra data for a movie:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> getMovieDetails = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://example.com/movies/<span class="hljs-subst">${bundle.inputData.id}</span>.json`</span>;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(url);

  <span class="hljs-comment">// reponse.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json if you&apos;re using core v9 or older</span>
};

<span class="hljs-keyword">const</span> movieList = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(<span class="hljs-string">&apos;https://example.com/movies.json&apos;</span>);

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-keyword">return</span> response.data.map(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> {
    <span class="hljs-comment">// so maybe /movies.json is thin content but /movies/:id.json has more</span>
    <span class="hljs-comment">// details we want...</span>
    movie.details = z.dehydrate(getMovieDetails, { <span class="hljs-attr">id</span>: movie.id });
    <span class="hljs-keyword">return</span> movie;
  });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// don&apos;t forget to register hydrators here!</span>
  <span class="hljs-comment">// it can be imported from any module</span>
  <span class="hljs-attr">hydrators</span>: {
    getMovieDetails,
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_movie</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Movie&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Movie&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new Movie is added.&apos;</span>,
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: movieList,
      },
    },
  },
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And in future steps of the Zap - if Zapier encounters a pointer as returned by <code>z.dehydrate(func, inputData)</code> - Zapier will tie it back to your app and pull in the data lazily.</p><blockquote>
<p><strong>Why can&apos;t I just load the data immediately?</strong> Isn&apos;t it easier? In some cases it can be - but imagine an API that returns 100 records when polling - doing 100x <code>GET /id.json</code> aggressive inline HTTP calls when 99% of the time Zapier doesn&apos;t <em>need</em> the data yet is wasteful.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="merging-hydrated-data">Merging Hydrated Data</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>As you&apos;ve seen, the usual call to dehydrate will assign the result to an object property:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">movie.details = z.dehydrate(getMovieDetails, { <span class="hljs-attr">id</span>: movie.id });
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In this example, all of the movie details will be located in the <code>details</code> property (e.g. <code>details.releaseDate</code>) after hydration occurs. But what if you want these results available at the top-level (e.g. <code>releaseDate</code>)? Zapier supports a specific keyword for this scenario:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">movie.$HOIST$ = z.dehydrate(getMovieDetails, { <span class="hljs-attr">id</span>: movie.id });
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Using <code>$HOIST$</code> as the key will signal to Zapier that the results should be merged into the object containing the <code>$HOIST$</code> key. You can also use this to merge your hydrated data into a property containing &quot;partial&quot; data that exists before dehydration occurs:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">movie.details = {
  <span class="hljs-attr">title</span>: movie.title,
  <span class="hljs-attr">$HOIST$</span>: z.dehydrate(getMovieDetails, { <span class="hljs-attr">id</span>: movie.id })
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="file-dehydration">File Dehydration</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><em>Added in v7.3.0.</em></p><p>The method <code>z.dehydrateFile(func, inputData)</code> allows you to download a file lazily. It takes the same arguments as <code>z.dehydrate(func, inputData)</code> does, but is recommended when the data is a file.</p><p>An example can be found in the <a href="#stashing-files">Stashing Files</a> section.</p><p>What makes <code>z.dehydrateFile</code> different from <code>z.dehydrate</code> has to do with efficiency and when Zapier chooses to hydrate data. Knowing which pointers give us back files helps us delay downloading files until it&apos;s absolutely necessary. Not only will it help avoid unnecessary file downloads, it can also prevent errors if the file has a limited availability. (Stashing files, described below, can also help with that situation.)</p><p>A good example is when users are creating Zaps in the Zap Editor. If a pointer is made by <code>z.dehydrate</code>, the Zap Editor will hydrate the data immediately after pulling in samples. This allows users to map fields from the hydrated data into the subsequent steps of the Zap. If, however, the pointer is made by <code>z.dehydrateFile</code>, the Zap Editor will wait to hydrate the file, and will display a placeholder instead. There&apos;s nothing inside binary file data for users to map in the subsequent steps.</p><blockquote>
<p><code>z.dehydrateFile(func, inputData)</code> was added in v7.3.0. We used to recommend using <code>z.dehydrate(func, inputData)</code> for files, but we now recommend changing it to <code>z.dehydrateFile(func, inputData)</code> for a better user experience.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="stashing-files">Stashing Files</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>It can be expensive to download and stream files or they can require complex handshakes to authorize downloads - so we provide a helpful stash routine that will take any <code>String</code>, <code>Buffer</code> or <code>Stream</code> and return a URL file pointer suitable for returning from triggers, searches, creates, etc.</p><p>The interface <code>z.stashFile(bufferStringStream, [knownLength], [filename], [contentType])</code> takes a single required argument - the extra three arguments will be automatically populated in most cases. Here&apos;s a full example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> content = <span class="hljs-string">&apos;Hello world!&apos;</span>;
<span class="hljs-keyword">const</span> url = <span class="hljs-keyword">await</span> z.stashFile(content, content.length, <span class="hljs-string">&apos;hello.txt&apos;</span>, <span class="hljs-string">&apos;text/plain&apos;</span>);
z.console.log(url);
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/f75e2819-05e2-41d0-b70e-9f8272f9eebf</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most likely you&apos;d want to stream from another URL - note the usage of <code>z.request({raw: true})</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> fileRequest = z.request({<span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/file.pdf&apos;</span>, <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>});
<span class="hljs-keyword">const</span> url = <span class="hljs-keyword">await</span> z.stashFile(fileRequest); <span class="hljs-comment">// knownLength and filename will be sniffed from the request. contentType will be binary/octet-stream</span>
z.console.log(url);
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/74bc623c-d94d-4cac-81f1-f71d7d517bc7</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you should only be using <code>z.stashFile()</code> in a hydration method or a hook trigger&apos;s <code>perform</code> if you&apos;re sending over a short-lived URL to a file. Otherwise, it can be very expensive to stash dozens of files in a polling call - for example!</p>
</blockquote><p>See a full example with dehydration/hydration wired in correctly:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> stashPDFfunction = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-comment">// use standard auth to request the file</span>
  <span class="hljs-keyword">const</span> filePromise = z.request({
    <span class="hljs-attr">url</span>: bundle.inputData.downloadUrl,
    <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>,
  });
  <span class="hljs-comment">// and swap it for a stashed URL</span>
  <span class="hljs-keyword">return</span> z.stashFile(filePromise);
};

<span class="hljs-keyword">const</span> pdfList = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(<span class="hljs-string">&apos;https://example.com/pdfs.json&apos;</span>);

  <span class="hljs-comment">// response.throwForStatus() if you&apos;re using core v9 or older</span>

  <span class="hljs-comment">// response.json.map if you&apos;re using core v9 or older</span>
  <span class="hljs-keyword">return</span> response.data.map(<span class="hljs-function">(<span class="hljs-params">pdf</span>) =&gt;</span> {
    <span class="hljs-comment">// Lazily convert a secret_download_url to a stashed url</span>
    <span class="hljs-comment">// zapier won&apos;t do this until we need it</span>
    pdf.file = z.dehydrateFile(stashPDFfunction, {
      <span class="hljs-attr">downloadUrl</span>: pdf.secret_download_url,
    });
    <span class="hljs-keyword">delete</span> pdf.secret_download_url;
    <span class="hljs-keyword">return</span> pdf;
  });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-attr">hydrators</span>: {
    <span class="hljs-attr">stashPDF</span>: stashPDFfunction,
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_pdf</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;PDF&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New PDF&apos;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new PDF is added.&apos;</span>,
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: pdfList,
      },
    },
  },
};

<span class="hljs-built_in">module</span>.exports = App;

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>To create a new integration for handling files, run <code>zapier init [your app name] --template files</code>. You can also check out our working example app <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/files">here</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="logging">Logging</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view the logs for your application, use the <code>zapier logs</code> command.</p><p>There are three types of logs for a Zapier app:</p><ul>
<li><code>http</code>: logged automatically by Zapier on HTTP requests</li>
<li><code>bundle</code>: logged automatically on every method execution</li>
<li><code>console</code>: manual logs via <code>z.console.log()</code> statements (<a href="#console-logging">see below for details</a>)</li>
</ul><p>For advanced logging options, including only displaying the logs for a certain user or app version, look at the help for the logs command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">help</span> logs
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="console-logging">Console Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To manually print a log statement in your code, use <code>z.console.log</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.console.log(<span class="hljs-string">&apos;Here are the input fields&apos;</span>, bundle.inputData);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.console</code> object has all the same methods and works just like the Node.js <a href="https://nodejs.org/docs/latest-v14.x/api/console.html"><code>Console</code></a> class - the only difference is we&apos;ll log to our distributed datastore and you can view the logs via <code>zapier logs</code> (more below).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-console-logs">Viewing Console Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see your <code>z.console.log</code> logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=console
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-bundle-logs">Viewing Bundle Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see the bundle logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=bundle
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-logging">HTTP Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you are using <a href="#shorthand-http-requests">shorthand HTTP requests</a> or the <code>z.request()</code> method that we provide, HTTP logging is handled automatically for you. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js">z.request(<span class="hljs-string">&apos;https://57b20fb546b57d1100a3c405.mockapi.io/api/recipes&apos;</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-comment">// do whatever you like, this request is already getting logged! :-D</span>
    <span class="hljs-keyword">return</span> res;
  })
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>HTTP logging will often work with other methods of making requests as well, but if you&apos;re using another method and having trouble seeing logs, try using <code>z.request()</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs">Viewing HTTP Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see the HTTP logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=http
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see detailed HTTP logs, including data such as headers and request and response bodies, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --<span class="hljs-built_in">type</span>=http --detailed
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="error-handling">Error Handling</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>APIs are not always available. Users do not always input data correctly to
formulate valid requests. Thus, it is a good idea to write apps defensively and
plan for 4xx and 5xx responses from APIs. Without proper handling, errors often
have incomprehensible messages for end users, or possibly go uncaught.</p><p>Zapier provides a couple of tools to help with error handling. First is the
<code>afterResponse</code> middleware (<a href="#using-http-middleware">docs</a>), which provides a hook for
processing all responses from HTTP calls. Second is <code>response.throwForStatus()</code>
(<a href="#http-response-object">docs</a>), which throws an error if the response status indicates
an error (status &gt;= 400). Since v10.0.0, we automatically call this method before returning the
response, unless you set <code>skipThrowForStatus</code> on the request or response object. The
last tool is the collection of errors in <code>z.errors</code> (<a href="#zerrors">docs</a>), which control
the behavior of Zaps when various kinds of errors occur.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="general-errors">General Errors</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Errors due to a misconfiguration in a user&apos;s Zap should be handled in your app
by throwing <code>z.errors.Error</code> with a user-friendly message and optional error and
status code. Typically, this will be prettifying 4xx responses or APIs that return
errors as 200s with a payload that describes the error.</p><p>Example: <code>throw new z.errors.Error(&apos;Contact name is too long.&apos;, &apos;InvalidData&apos;, 400);</code></p><blockquote>
<p><code>z.errors.Error</code> was added in v9.3.0. If you&apos;re on an older version of <code>zapier-platform-core</code>, throw a standard JavaScript <code>Error</code> instead, such as <code>throw new Error(&apos;A user-friendly message&apos;)</code>.</p>
</blockquote><p>A couple best practices to keep in mind:</p><ul>
<li>Elaborate on terse messages. &quot;not_authenticated&quot; -&gt; &quot;Your API Key is invalid. Please reconnect your account.&quot;</li>
<li>If the error calls out a specific field, surface that information to the user. &quot;Provided data is invalid&quot; -&gt; &quot;Contact name is invalid&quot;</li>
<li>If the error provides details about why a field is invalid, add that in too! &quot;Contact name is invalid&quot; -&gt; &quot;Contact name is too long&quot;</li>
<li>The second, optional argument should be a code that a computer could use to identify the type of error.</li>
<li>The last, optional argument should be the HTTP status code, if any.</li>
</ul><p>The code and status can be used by us to provide relevant troubleshooting to the
user when we communicate the error.</p><p>Note that if a Zap raises too many error messages it will be automatically
turned off, so only use these if the scenario is truly an error that needs to
be fixed.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="halting-execution">Halting Execution</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Any operation can be interrupted or &quot;halted&quot; (not success, not error, but
stopped for some specific reason) with a <code>HaltedError</code>. You might find yourself
using this error in cases where a required pre-condition is not met. For instance,
in a create to add an email address to a list where duplicates are not allowed,
you would want to throw a <code>HaltedError</code> if the Zap attempted to add a duplicate.
This would indicate failure, but it would be treated as a soft failure.</p><p>Unlike throwing <code>z.errors.Error</code>, a Zap will never by turned off when this error is thrown
(even if it is raised more often than not).</p><p>Example: <code>throw new z.errors.HaltedError(&apos;Your reason.&apos;);</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="stale-authentication-credentials">Stale Authentication Credentials</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For apps that require manual refresh of authorization on a regular basis, Zapier
provides a mechanism to notify users of expired credentials. With the
<code>ExpiredAuthError</code>, the current operation is interrupted and a predefined email
is sent out asking the user to refresh the credentials. While the auth is
disconnected, Zap runs will not be executed, to prevent more calls with expired
credentials. (The runs will be
<a href="https://help.zapier.com/hc/en-us/articles/8496291148685-View-and-manage-your-Zap-history#held-0-3">Held</a>,
and the user will be able to replay them after reconnecting.)</p><p>Example: <code>throw new z.errors.ExpiredAuthError(&apos;You must manually reconnect this auth.&apos;);</code></p><p>For apps that use OAuth2 with <code>autoRefresh: true</code> or Session Auth, <code>core</code> injects
a built-in <code>afterResponse</code> middleware that throws an error when the response status
is 401. The error will signal Zapier to refresh the credentials and then retry the
failed operation. You can also throw this error manually if your server doesn&apos;t use the 401 status or you want to trigger an auth refresh even if the credentials aren&apos;t stale.</p><p>Example: <code>throw new z.errors.RefreshAuthError();</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="handling-throttled-requests">Handling Throttled Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Since v11.2.0, there are two types of errors that can cause Zapier to throttle an operation and retry at a later time.
This is useful if the API you&apos;re interfacing with reports it is receiving too many requests, often indicated by
receiving a response status code of 429.</p><p>If a response receives a status code of 429 and is not caught, Zapier will re-attempt the operation after a delay.
The delay can be customized by the server response containing a specific
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After">Retry-After</a> header in your error response or with a specified time delay in seconds using a <code>ThrottledError</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> yourAfterResponse = <span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (resp.status === <span class="hljs-number">429</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.ThrottledError(<span class="hljs-string">&apos;message here&apos;</span>, <span class="hljs-number">60</span>);  <span class="hljs-comment">// Zapier will retry in 60 seconds</span>
  }
  <span class="hljs-keyword">return</span> resp;
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Instead of a user&#x2019;s Zap erroring and halting, the request will be repeatedly retried at the specified time.</p><p>For throttled requests that occur during processing of a webhook trigger&apos;s perform, before results are produced; there is a max retry delay of 300 seconds and a default delay of 60 seconds if none is specified. For webhook processing only, if a request during the retry attempt is also throttled, it will not be re-attempted again. </p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="testing">Testing</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can write unit tests for your Zapier integration that run locally, outside of the Zapier editor.
You can run these tests in a CI tool like <a href="https://travis-ci.com/">Travis</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="writing-unit-tests">Writing Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>From v10 of <code>zapier-platform-cli</code>, we recommend using the <a href="https://jestjs.io/">Jest</a> testing framework. After running <code>zapier init</code> you should find an example test to start from in the <code>test</code> directory.</p><blockquote>
<p>Note: On v9, the recommendation was <a href="https://mochajs.org/">Mocha</a>. You can still use Mocha if you prefer.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">/* globals describe, expect, test */</span>

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-comment">// createAppTester() makes it easier to test your app. It takes your raw app</span>
<span class="hljs-comment">// definition, and returns a function that will test you app.</span>
<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>);
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(App);

<span class="hljs-comment">// Inject the vars from the .env file to process.env. Do this if you have a .env</span>
<span class="hljs-comment">// file.</span>
zapier.tools.env.inject();

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {
  test(<span class="hljs-string">&apos;new recipe&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> bundle = {
      <span class="hljs-attr">inputData</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
      },
    };

    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> appTester(
      App.triggers.recipe.operation.perform,
      bundle
    );
    expect(results.length).toBeGreaterThan(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
    expect(firstRecipe.id).toBe(<span class="hljs-number">1</span>);
    expect(firstRecipe.name).toBe(<span class="hljs-string">&apos;Baked Falafel&apos;</span>);
  });
});

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="using-the-z-object-in-tests">Using the <code>z</code> Object in Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Introduced in <a href="mailto:`core@11.1.0">`core@11.1.0</a><code>,</code>appTester` can now run arbitrary functions:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">/* globals describe, expect, test */</span>

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>);
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(App);

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {
  test(<span class="hljs-string">&apos;new recipe&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> adHocResult = <span class="hljs-keyword">await</span> appTester(
      <span class="hljs-comment">// your in-line function takes the same [z, bundle] arguments as normal</span>
      <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
        <span class="hljs-comment">// requests are made using your integration&apos;s actual middleware</span>
        <span class="hljs-comment">// make sure to pass the normal `bundle` arg to `appTester` if your requests need auth</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(
          <span class="hljs-string">&apos;https://example.com/some/setup/method&apos;</span>,
          {
            <span class="hljs-attr">params</span>: {
              <span class="hljs-attr">numItems</span>: bundle.inputData.someValue,
            },
          }
        );

        <span class="hljs-keyword">return</span> {
          <span class="hljs-comment">// you can use all the functions on the `z` object</span>
          <span class="hljs-attr">someHash</span>: z.hash(<span class="hljs-string">&apos;md5&apos;</span>, <span class="hljs-string">&apos;mySecret&apos;</span>),
          <span class="hljs-attr">data</span>: response.data,
        };
      },
      {
        <span class="hljs-comment">// you must provide auth data for authenticated requests</span>
        <span class="hljs-comment">// (just like running a normal trigger)</span>
        <span class="hljs-attr">authData</span>: { <span class="hljs-attr">token</span>: <span class="hljs-string">&apos;some-api-key&apos;</span> },
        <span class="hljs-comment">// put arbitrary function params in `inputData`</span>
        <span class="hljs-attr">inputData</span>: {
          <span class="hljs-attr">someValue</span>: <span class="hljs-number">3</span>,
        },
      }
    );

    expect(adHocResult.someHash).toEqual(<span class="hljs-string">&apos;a5beb6624e092adf7be31176c3079e64&apos;</span>);
    expect(adHocResult.data).toEqual({ <span class="hljs-attr">whatever</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-comment">// ... rest of test</span>
  });
});

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="mocking-requests">Mocking Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>It&apos;s useful to test your code without actually hitting any external services. <a href="https://github.com/node-nock/nock">Nock</a> is a Node.js utility that intercepts requests before they ever leave your computer. You can specify a response code, body, headers, and more. It works out of the box with <code>z.request</code> by setting up your <code>nock</code> before calling <code>appTester</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">/* globals describe, expect, test */</span>

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-keyword">const</span> App = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>);
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(App);

<span class="hljs-keyword">const</span> nock = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;nock&apos;</span>);

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {
  test(<span class="hljs-string">&apos;new recipe&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> bundle = {
      <span class="hljs-attr">inputData</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
      },
    };

    <span class="hljs-comment">// mocks the next request that matches this url and querystring</span>
    nock(<span class="hljs-string">&apos;https://example.com/api&apos;</span>)
      .get(<span class="hljs-string">&apos;/recipes&apos;</span>)
      .query(bundle.inputData)
      .reply(<span class="hljs-number">200</span>, [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 1&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 1&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;name 2&apos;</span>, <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;directions 2&apos;</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> },
      ]);

    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> appTester(
      App.triggers.recipe.operation.perform,
      bundle
    );

    expect(results.length).toBeGreaterThan(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
    expect(firstRecipe.id).toBe(<span class="hljs-number">1</span>);
    expect(firstRecipe.name).toBe(<span class="hljs-string">&apos;name 1&apos;</span>);
  });
});

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Here&apos;s more info about nock and its usage in the <a href="https://github.com/node-nock/nock/blob/master/README.md">README</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="running-unit-tests">Running Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To run all your tests do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>You can also go direct with <code>npm test</code> or <code>node_modules/.bin/jest</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing--environment-variables">Testing &amp; Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The best way to store sensitive values (like API keys, OAuth secrets, or passwords) is in an <code>.env</code> (or <code>.environment</code>, see below note) file (<a href="https://github.com/motdotla/dotenv#faq">learn more</a>). Then, you can include the following before your tests run:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);
zapier.tools.env.inject(); <span class="hljs-comment">// inject() can take a filename; defaults to &quot;.env&quot;</span>

<span class="hljs-comment">// now process.env has all the values in your .env file</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p><code>.env</code> is the new recommended name for the environment file since v5.1.0. The old name <code>.environment</code> is deprecated but will continue to work for backward compatibility.</p>
</blockquote><blockquote>
<p>Remember: <strong>NEVER</strong> add your secrets file to version control!</p>
</blockquote><p>Additionally, you can provide them dynamically at runtime:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Or, <code>export</code> them explicitly and place them into the environment:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> CLIENT_ID=1234
<span class="hljs-built_in">export</span> CLIENT_SECRET=abcd
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing-in-your-ci">Testing in Your CI</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Whether you use Travis, Circle, Jenkins, or another service, we aim to make it painless to test in an automated environment.</p><p>Behind the scenes <code>zapier test</code> does a standard <code>npm test</code>, which could be <a href="https://jestjs.io/">Jest</a> or <a href="https://mochajs.org/">Mocha</a>, based on your project setup.</p><p>This makes it straightforward to integrate into your testing interface. For example, if you want to test with <a href="https://travis-ci.com/">Travis CI</a>, the <code>.travis.yml</code> would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-yaml"><span class="hljs-attr">language:</span> <span class="hljs-string">node_js</span>
<span class="hljs-attr">node_js:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;v16&quot;</span>
<span class="hljs-attr">before_script:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">zapier-platform-cli</span>
<span class="hljs-attr">script:</span> <span class="hljs-string">CLIENT_ID=1234</span> <span class="hljs-string">CLIENT_SECRET=abcd</span> <span class="hljs-string">zapier</span> <span class="hljs-string">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can substitute <code>zapier test</code> with <code>npm test</code>, or a direct call to <code>node_modules/.bin/jest</code>. We recommend putting environment variables directly into the configuration screens Jenkins, Travis, or other services provide.</p><p>Alternatively to reading the deploy key from root (the default location), you may set the <code>ZAPIER_DEPLOY_KEY</code> environment variable to run privileged commands without the human input needed for <code>zapier login</code>. We suggest encrypting your deploy key in the manner your CI provides (such as <a href="https://docs.travis-ci.com/user/environment-variables/#Defining-encrypted-variables-in-.travis.yml">these instructions</a>, for Travis).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="debugging-tests">Debugging Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Sometimes tests aren&apos;t enough, and you may want to step through your code and set breakpoints. The testing suite is a regular Node.js process, so debugging it doesn&apos;t take anything special. Because we recommend <code>jest</code> for testing, these instructions will outline steps for debugging w/ jest, but other test runners will work similarly. You can also refer to <a href="https://jestjs.io/docs/en/troubleshooting#tests-are-failing-and-you-dont-know-why">Jest&apos;s own docs on the subject</a>.</p><p>To start, add the following line to the <code>scripts</code> section of your <code>package.json</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>&quot;test:debug&quot;: &quot;node --inspect-brk node_modules/.bin/jest --runInBand&quot;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This will tell <code>node</code> to inspect the <code>jest</code> processes, which is exactly what we need.</p><p>Next, add a <code>debugger;</code> statement somewhere in your code, probably in a <code>perform</code> method:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// triggers on a new pizza with a certain tag</span>
<span class="hljs-keyword">const</span> perform = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">tag</span>: bundle.inputData.tagName,
    },
  });
  <span class="hljs-keyword">debugger</span>;
  <span class="hljs-comment">// this should return an array of objects</span>
  <span class="hljs-keyword">return</span> response.data;
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This creates a <em>breakpoint</em> while <code>inspect</code>ing, or a starting point for our manual inspection.</p><p>Next, you&apos;ll need an inspection client. The most available one is probably the Google Chrome browser, but there are <a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#inspector-clients">lots of options</a>. We&apos;ll use Chrome for this example. In your terminal (and in your integration&apos;s root directory), run <code>yarn test:debug</code> (or <code>npm run test:debug</code>). You should see the following:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>% yarn test:debug
yarn run v1.22.10
$ node --inspect-brk node_modules/.bin/jest --runInBand
Debugger listening on ws://127.0.0.1:9229/5edaab3c-a1d3-45e4-b374-0536095c559b
For help, see: https://nodejs.org/en/docs/inspector
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Now in Chrome, go to chrome://inspect. Make sure <code>Discover Network Targets</code> is checked and you should see a path to your <code>jest</code> file on your local machine:</p><p><img src="https://cdn.zappy.app/e2836d2950e1f8a03e3621a22452c3cd.png" alt></p><p>Click <code>inspect</code>. A new window will open. Next, click the little blue arrow in the top right to actually run the code:</p><p><img src="https://cdn.zappy.app/a64e7963a7090e9730d9c8e7b3595a6a.png" alt></p><p>After a few seconds, you&apos;ll see your code, the <code>debugger</code> statement, and info about the current environment on the right panel. You should see familiar data in the <code>Locals</code> section, such as the <code>response</code> variable, and the <code>z</code> object.</p><p><img src="https://cdn.zappy.app/4bfdfe079a344ab7aced64ad7728bc6a.png" alt></p><p>Debugging combined with thorough unit tests will hopefully equip you in keeping your Zapier integration in smooth working order.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-npm-modules">Using <code>npm</code> Modules</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Use <code>npm</code> modules just like you would use them in any other node app, for example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">npm install --save jwt
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then <code>package.json</code> will be updated, and you can use them like anything else:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;jwt&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>During the <code>zapier build</code> or <code>zapier push</code> step - we&apos;ll copy all your code to a temporary folder and do a fresh re-install of modules.</p><blockquote>
<p>Note: If your package isn&apos;t being pushed correctly (IE: you get &quot;Error: Cannot find module &apos;whatever&apos;&quot; in production), try adding the <code>--disable-dependency-detection</code> flag to <code>zapier push</code>.</p>
</blockquote><blockquote>
<p>Note 2: You can also try adding a <code>includeInBuild</code> array property (with paths to include, which will be evaluated to RegExp, with a case insensitive flag) to your <code>.zapierapprc</code> file, to make it look like:</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-json">{
  <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">&quot;key&quot;</span>: <span class="hljs-string">&quot;App1&quot;</span>,
  <span class="hljs-attr">&quot;includeInBuild&quot;</span>: [
    <span class="hljs-string">&quot;test.txt&quot;</span>,
    <span class="hljs-string">&quot;testing.json&quot;</span>
  ]
}

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Warning: Do not use compiled libraries unless you run your build on the AWS AMI <code>ami-4fffc834</code>, or follow the Docker instructions below.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="building-native-packages-with-docker">Building Native Packages with Docker</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Unfortunately if you are developing on a macOS or Windows box you won&apos;t be able to build native libraries locally. If you try and push locally build native modules, you&apos;ll get runtime errors during usage. However, you can use Docker and Docker Compose to do this in a pinch. Make sure you have all the necessary Docker programs installed and follow along.</p><p>First, create your <code>Dockerfile</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> amazonlinux:<span class="hljs-number">2017.03</span>.<span class="hljs-number">1.20170812</span>

<span class="hljs-keyword">RUN</span><span class="bash"> yum install zip findutils wget gcc44 gcc-c++ libgcc44 cmake -y</span>

<span class="hljs-keyword">RUN</span><span class="bash"> wget https://nodejs.org/dist/v8.10.0/node-v8.10.0.tar.gz &amp;&amp; \
    tar -zxvf node-v8.10.0.tar.gz &amp;&amp; \
    <span class="hljs-built_in">cd</span> node-v8.10.0 &amp;&amp; \
    ./configure &amp;&amp; \
    make &amp;&amp; \
    make install &amp;&amp; \
    <span class="hljs-built_in">cd</span> .. &amp;&amp; \
    rm -rf node-v8.10.0 node-v8.10.0.tar.gz</span>

<span class="hljs-keyword">RUN</span><span class="bash"> npm i -g zapier-platform-cli</span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And finally, create your <code>docker-compose.yml</code> file:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-yml"><span class="hljs-attr">version:</span> <span class="hljs-string">&apos;3.4&apos;</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">pusher:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">.:/app</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">node_modules:/app/node_modules:delegated</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">~/.zapierrc:/root/.zapierrc</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">&apos;bash -c &quot;npm i &amp;&amp; zapier push&quot;&apos;</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">ZAPIER_DEPLOY_KEY:</span> <span class="hljs-string">${ZAPIER_DEPLOY_KEY}</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">node_modules:</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: Watch out for your <code>package-lock.json</code> file, if it exists for local install it might incorrectly pin a native version.</p>
</blockquote><p>Now you should be able to run <code>docker-compose run pusher</code> and see the build and push successfully complete!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-transpilers">Using Transpilers</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you would like to use a transpiler like <code>babel</code>, you can add a script named <code>_zapier-build</code> to your <code>package.json</code>, which will be run during <code>zapier build</code>,
<code>zapier push</code>, and <code>zapier upload</code>.  See the following example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-json">{
  <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;zapier-dev&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib --watch&quot;</span>,
    <span class="hljs-attr">&quot;_zapier-build&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib&quot;</span>
  }
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Then, you can have your fancy ES7 code in <code>src/*</code> and a root <code>index.js</code> like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./lib&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And work with commands like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># watch and recompile</span>
npm run zapier-dev

<span class="hljs-comment"># tests should work fine</span>
zapier <span class="hljs-built_in">test</span>

<span class="hljs-comment"># every build ensures a fresh build</span>
zapier push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are a lot of details left out - check out the full example app for a working setup.</p><blockquote>
<p>To create a new integration with Babel, run <code>zapier init [your app name] --template babel</code>. You can also check out our working example app <a href="https://github.com/zapier/zapier-platform/tree/main/example-apps/babel">here</a>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="faqs">FAQs</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="why-doesnt-zapier-support-newer-versions-of-nodejs">Why doesn&apos;t Zapier support newer versions of Node.js?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We run your code on AWS Lambda, which only supports a few <a href="https://docs.aws.amazon.com/lambda/latest/dg/programming-model.html">versions</a> of Node. Sometimes that doesn&apos;t include the latest version. Additionally, with thousands of apps running on the Zapier platform, we have to be sure upgrading to the latest Node version will not have a negative impact.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">How do I manually set the Node.js version to run my app with?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Update your <code>zapier-platform-core</code> dependency in <code>package.json</code>.  Each major version ties to a specific version of Node.js. You can find the mapping <a href="https://github.com/zapier/zapier-platform/blob/main/packages/cli/src/version-store.js">here</a>. We only support the version(s) supported by <a href="https://docs.aws.amazon.com/lambda/latest/dg/programming-model.html">AWS Lambda</a>.</p><p><strong>IMPORTANT CAVEAT</strong>: AWS periodically deprecates Node versions as they reach EOL. They announce this<a href="https://aws.amazon.com/blogs/developer/node-js-6-is-approaching-end-of-life-upgrade-your-aws-lambda-functions-to-the-node-js-10-lts/">on their blog</a>. Similar info and dates are available on <a href="https://github.com/nodejs/Release">github</a>. Well before this date, we&apos;ll have a version of <code>core</code> that targets the newer Node version.</p><p>If you don&apos;t upgrade before the cutoff date, there&apos;s a chance that AWS will throw an error when attempting to run your app&apos;s code. If that&apos;s the case, we&apos;ll instead run it under the oldest Node version still supported. All that is to say, <strong>we may run your code on a newer version of Node.js than you intend</strong> if you don&apos;t update your app&apos;s dependencies periodically.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="when-to-use-placeholders-or-curlies">When to use placeholders or curlies?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will see both <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Expression_interpolation">template literal placeholders</a> <code>${var}</code> and (double) &quot;curlies&quot; <code>{{var}}</code> used in examples.</p><p>In general, use <code>${var}</code> within functions and use <code>{{var}}</code> anywhere else.</p><p>Placeholders get evaluated as soon as the line of code is evaluated. This means that if you use <code>${process.env.VAR}</code> in a trigger configuration, <code>zapier push</code> will substitute it with your local environment&apos;s value for <code>VAR</code> when it builds your app and the value set via <code>zapier env:set</code> will not be used.</p><blockquote>
<p>If you&apos;re not familiar with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a>, know that <code>const val = &quot;a&quot; + b + &quot;c&quot;</code> is essentially the same as <code>const val = `a${b}c`</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="does-zapier-support-xml-soap-apis">Does Zapier support XML (SOAP) APIs?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Not natively, but it can! Users have reported that the following <code>npm</code> modules are compatible with the CLI Platform:</p><ul>
<li><a href="https://github.com/jhuckaby/pixl-xml">pixl-xml</a></li>
<li><a href="https://github.com/Leonidas-from-XIV/node-xml2js">xml2js</a></li>
<li><a href="https://github.com/NaturalIntelligence/fast-xml-parser">fast-xml-parser</a></li>
</ul><p>Since core v10, it&apos;s possible for <a href="#shorthand-http-requests">shorthand requests</a> to parse XML. Use an <code>afterResponse</code> <a href="#using-http-middleware">middleware</a> that sets <code>response.data</code> to the parsed XML:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> xml = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;pixl-xml&apos;</span>);

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">afterResponse</span>: [
    <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
      <span class="hljs-comment">// Only works on core v10+!</span>
      response.throwForStatus();
      response.data = xml.parse(response.content);
      <span class="hljs-keyword">return</span> response;
    },
  ],
  <span class="hljs-comment">// ...</span>
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="is-it-possible-to-iterate-over-pages-in-a-polling-trigger">Is it possible to iterate over pages in a polling trigger?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Yes, though there are caveats. Your entire function only gets 30 seconds to run. HTTP requests are costly, so paging through a list may time out (which you should avoid at all costs).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// some async call</span>
<span class="hljs-keyword">const</span> makeCall = <span class="hljs-function">(<span class="hljs-params">z, start, limit</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">_start</span>: start,
      <span class="hljs-attr">_limit</span>: limit,
    },
  });
};

<span class="hljs-comment">// triggers on paging with a certain tag</span>
<span class="hljs-keyword">const</span> performPaging = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-comment">// array of promises</span>
  <span class="hljs-keyword">const</span> promises = [];

  <span class="hljs-comment">// 5 requests with page size = 3</span>
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> limit = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
    promises.push(makeCall(z, start, limit));
    start += limit;
  }

  <span class="hljs-comment">// send requests concurrently</span>
  <span class="hljs-keyword">const</span> responses = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(promises);
  <span class="hljs-keyword">return</span> responses.map(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.data);
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;paging&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Paging&apos;</span>,

  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Get Paging&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers on a new paging.&apos;</span>,
  },

  <span class="hljs-attr">operation</span>: {
    <span class="hljs-attr">inputFields</span>: [],
    <span class="hljs-attr">perform</span>: performPaging,
  },
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you need to do more requests conditionally based on the results of an HTTP call (such as the &quot;next URL&quot; param or similar value), using <code>async/await</code> (as shown in the example below) is a good way to go. If you go this route, only page as far as you need to. Keep an eye on the polling <a href="https://zapier.com/developer/documentation/v2/deduplication/">guidelines</a>, namely the part about only iterating until you hit items that have probably been seen in a previous poll.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// a hypothetical API where payloads are big so we want to heavily limit how much comes back</span>
<span class="hljs-comment">// we want to only return items created in the last hour</span>

<span class="hljs-keyword">const</span> asyncExample = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> limit = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> twoHourMilliseconds = <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">2</span> * <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">const</span> hoursAgo = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() - twoHourMilliseconds;

  <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">_start</span>: start,
      <span class="hljs-attr">_limit</span>: limit,
    },
  });

  <span class="hljs-keyword">let</span> results = response.data; <span class="hljs-comment">// response.json if you&apos;re using core v9 or older</span>

  <span class="hljs-comment">// keep paging until the last item was created over two hours ago</span>
  <span class="hljs-comment">// then we know we almost certainly haven&apos;t missed anything and can let</span>
  <span class="hljs-comment">//   deduper handle the rest</span>

  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(results[results.length - <span class="hljs-number">1</span>].createdAt) &gt; hoursAgo) {
    start += limit; <span class="hljs-comment">// next page</span>

    response = <span class="hljs-keyword">await</span> z.request({
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://jsonplaceholder.typicode.com/posts&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">_start</span>: start,
        <span class="hljs-attr">_limit</span>: limit,
      },
    });

    results = results.concat(response.data);
  }

  <span class="hljs-keyword">return</span> results;
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-do-search-powered-fields-relate-to-dynamic-dropdowns-and-why-are-they-both-required-together">How do search-powered fields relate to dynamic dropdowns and why are they both required together?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To understand search-powered fields, we have to have a good understanding of dynamic dropdowns.</p><p>When users are selecting specific resources (for instance, a Google Sheet), it&apos;s important they&apos;re able to select the exact sheet they want. Instead of referencing the sheet by name (which may change), we match via <code>id</code> instead. Rather than directing the user copy and paste an id for every item they might encounter, there is the notion of a <strong>dynamic dropdown</strong>. A dropdown is a trigger that returns a list of resources. It can pull double duty and use its results to power another trigger, search, or action in the same app.  It provides a list of ids with labels that show the item&apos;s name:</p><p><img src="https://cdn.zappy.app/2d7eeda63ff34b70f1d1788de0117181.png" alt></p><p>The field&apos;s value reaches your app as an id. You define this connection with the <code>dynamic</code> property, which is a string: <code>trigger_key.id_key.label_key</code>. This approach works great if the user setting up the Zap always wants the Zap to use the same spreadsheet. They specify the id during setup and the Zap runs happily.</p><p><strong>Search fields</strong> take this connection a step further. Rather than set the spreadsheet id at setup, the user could precede the action with a search field to make the id dynamic. For instance, let&apos;s say you have a different spreadsheet for every day of the week. You could build the following zap:</p><ol>
<li>Some Trigger</li>
<li>Calculate what day of the week it is today (Code)</li>
<li>Find the spreadsheet that matches the day from Step 2</li>
<li>Update the spreadsheet (with the id from step 3) with some data</li>
</ol><p>If the connection between steps 3 and 4 is a common one, you can indicate that in your field by specifying <code>search</code> as a <code>search_key.id_key</code>. When paired <strong>with a dynamic dropdown</strong>, this will add a button to the editor that will add the search step to the user&apos;s Zap and map the id field correctly.</p><p><img src="https://cdn.zappy.app/081e63141ff05c131dadb8ebbea727b0.png" alt></p><p>This is paired most often with &quot;update&quot; actions, where a required parameter will be a resource id.</p><p><a id="paging"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="whats-the-deal-with-pagination-when-is-it-used-and-how-does-it-work">What&apos;s the deal with pagination? When is it used and how does it work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Paging is <strong>only used when a trigger is part of a dynamic dropdown</strong>. Depending on how many items exist and how many are returned in the first poll, it&apos;s possible that the resource the user is looking for isn&apos;t in the initial poll. If they hit the &quot;see more&quot; button, we&apos;ll increment the value of <code>bundle.meta.page</code> and poll again.</p><p>Paging is a lot like a regular trigger except the range of items returned is dynamic. The most common example of this is when you can pass a <code>offset</code> parameter:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-keyword">const</span> perform = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/list.json&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">limit</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">offset</span>: <span class="hljs-number">100</span> * bundle.meta.page
    }
  });
  <span class="hljs-keyword">return</span> response.data; <span class="hljs-comment">// or response.json you&apos;re using core v9 or older</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If your API uses cursor-based paging instead of an offset, you can use <code>z.cursor.get</code> and <code>z.cursor.set</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// the perform method of our trigger</span>
<span class="hljs-comment">// ensure operation.canPaginate is true!</span>

<span class="hljs-keyword">const</span> performWithoutAsync = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve()
    .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (bundle.meta.page === <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// first page, no need to fetch a cursor</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> z.cursor.get(); <span class="hljs-comment">// Promise&lt;string | null&gt;</span>
      }
    })
    .then(<span class="hljs-function">(<span class="hljs-params">cursor</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> z.request(
        <span class="hljs-string">&apos;https://5ae7ad3547436a00143e104d.mockapi.io/api/recipes&apos;</span>,
        {
          <span class="hljs-attr">params</span>: { cursor }, <span class="hljs-comment">// if cursor is null, it&apos;s ignored here</span>
        }
      );
    })
    .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
      <span class="hljs-comment">// need to save the cursor and return a promise, but also need to pass the data along</span>
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([response.items, z.cursor.set(response.nextPage)]);
    })
    .then(<span class="hljs-function">(<span class="hljs-params">[items <span class="hljs-regexp">/* null */</span>]</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> items;
    });
};

<span class="hljs-comment">// ---------------------------------------------------</span>

<span class="hljs-keyword">const</span> performWithAsync = <span class="hljs-keyword">async</span> (z, bundle) =&gt; {
  <span class="hljs-keyword">let</span> cursor;
  <span class="hljs-keyword">if</span> (bundle.meta.page) {
    cursor = <span class="hljs-keyword">await</span> z.cursor.get(); <span class="hljs-comment">// string | null</span>
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> z.request(
    <span class="hljs-string">&apos;https://5ae7ad3547436a00143e104d.mockapi.io/api/recipes&apos;</span>,
    {
      <span class="hljs-comment">// if cursor is null, it&apos;s sent as an empty query</span>
      <span class="hljs-comment">//   param and should be ignored by the server</span>
      <span class="hljs-attr">params</span>: { cursor },
    }
  );

  <span class="hljs-comment">// we successfully got page 1, should store the cursor in case the user wants page 2</span>
  <span class="hljs-keyword">await</span> z.cursor.set(response.nextPage);

  <span class="hljs-keyword">return</span> response.items;
};

</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Cursors are stored per-zap and last about an hour. Per the above, make sure to only include the cursor if <code>bundle.meta.page !== 0</code>, so you don&apos;t accidentally reuse a cursor from a previous poll.</p><p>Lastly, you need to set <code>canPaginate</code> to <code>true</code> in your polling definition (per the <a href="https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#basicpollingoperationschema">schema</a>) for the <code>z.cursor</code> methods to work as expected.</p><p><a id="dedup"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="how-does-deduplication-work">How does deduplication work?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Each time a polling Zap runs, Zapier needs to decide which of the items in the response should trigger the zap. To do this, we compare the <code>id</code>s to all those we&apos;ve seen before, trigger on new objects, and update the list of seen <code>id</code>s. When a Zap is turned on, we initialize the list of seen <code>id</code>s with a single poll. When it&apos;s turned off, we clear that list. For this reason, it&apos;s important that calls to a polling endpoint always return the newest items.</p><p>For example, the initial poll returns objects 4, 5, and 6 (where a higher <code>id</code> is newer). If a later poll increases the limit and returns objects 1-6, then 1, 2, and 3 will be (incorrectly) treated like new objects.</p><p>There&apos;s a more in-depth explanation <a href="https://platform.zapier.com/legacy/dedupe">here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="why-are-my-triggers-complaining-if-i-dont-provide-an-explicit-id-field">Why are my triggers complaining if I don&apos;t provide an explicit <code>id</code> field?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For deduplication to work, we need to be able to identify and use a unique field. In older, legacy Zapier Web Builder apps, we guessed if <code>id</code> wasn&apos;t present. In order to ensure we don&apos;t guess wrong, we now require that the developers send us an <code>id</code> field. If your objects have a differently-named unique field, feel free to adapt this snippet and ensure this test passes:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-js"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">let</span> items = response.data.items; <span class="hljs-comment">// or response.json.items if you&apos;re using core v9 or older</span>
<span class="hljs-keyword">return</span> items.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
  item.id = item.contactId;
  <span class="hljs-keyword">return</span> item;
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="node-x-no-longer-supported">Node X No Longer Supported</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;re seeing errors like the following:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>InvalidParameterValueException An error occurred (InvalidParameterValueException) when calling the CreateFunction operation: The runtime parameter of nodejs6.10 is no longer supported for creating or updating AWS Lambda functions. We recommend you use the new runtime (nodejsX.Y) while creating or updating functions.
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>... then you need to update your <code>zapier-platform-core</code> dependency to a non-deprecated version that uses a newer version of Node.js. Complete the following instructions as soon as possible:</p><ol>
<li>Edit <code>package.json</code> to depend on a later major version of <code>zapier-platform-core</code>. There&apos;s a list of all breaking changes (marked with a :exclamation:) in the <a href="https://github.com/zapier/zapier-platform/blob/main/CHANGELOG.md">changelog</a>.</li>
<li>Increment the <code>version</code> property in <code>package.json</code></li>
<li>Ensure you&apos;re using version <code>v16</code> (or greater) of node locally (<code>node -v</code>). Use <a href="https://github.com/nvm-sh/nvm">nvm</a> to use a different one if need be.</li>
<li>Run <code>rm -rf node_modules &amp;&amp; npm i</code> to get a fresh copy of everything</li>
<li>Run <code>zapier test</code> to ensure your tests still pass</li>
<li>Run <code>zapier push</code></li>
<li>Run <code>zapier promote YOUR_NEW_VERSION</code> (from step 2)</li>
<li>Migrate your users from the previous version (<code>zapier migrate OLD_VERSION YOUR_NEW_VERSION</code>)</li>
</ol><p><a id="analytics"></a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="what-analytics-are-collected">What Analytics are Collected?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Starting with v8.4.0, Zapier collects information about each invocation of the CLI tool.</p><p>This data is collected purely to improve the CLI experience and will <strong>never</strong> be used for advertising or any non-product purpose. There are 3 collection modes that are set on a per-computer basis.</p><p><strong>Anonymous</strong></p><p>When you run a command with analytics in <code>anonymous</code> mode, the following data is sent to Zapier:</p><ul>
<li>which command you ran</li>
<li>if that command is a known command</li>
<li>how many arguments you supplied (but not the contents of the arguments)</li>
<li>which flags you used (but not their contents)</li>
<li>the version of CLI that you&apos;re using</li>
</ul><p><strong>Enabled</strong> (the default)</p><p>When analytics are fully <code>enabled</code>, the above is sent, plus:</p><ul>
<li>your operating system (the result of calling <a href="https://nodejs.org/api/process.html#process_process_platform"><code>process.platform</code></a>)</li>
<li>your Zapier user id</li>
</ul><p><strong>Disabled</strong></p><p>Lastly, analytics can be <code>disabled</code> entirely, either by running <code>zapier analytics --mode disabled</code> or setting the <code>DISABLE_ZAPIER_ANALYTICS</code> environment variable to <code>1</code>.</p><p>We take great care not to collect any information about your filesystem or anything otherwise secret. You can see exactly what&apos;s being collecting at runtime by prefixing any command with <code>DEBUG=zapier:analytics</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="whats-the-difference-between-an-app-and-an-integration">What&apos;s the Difference Between an &quot;App&quot; and an &quot;Integration&quot;?</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We&apos;re in the process of doing some renaming across our Zapier marketing terms. Eventually we&apos;ll use &quot;integration&quot; everywhere. Until then, know that these terms are interchangeable and describe the code that you write that connects your API to Zapier.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="command-line-tab-completion">Command Line Tab Completion</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Introduced in v9.1.0, the <code>zapier autocomplete</code> command shows instructions for generating command line autocomplete.</p><p>Follow those instructions to enable completion for <code>zapier</code> commands and flags!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="the-zapier-platform-packages">The Zapier Platform Packages</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier Platform consists of 3 npm packages that are released simultaneously.</p><ul>
<li><a href="https://github.com/zapier/zapier-platform/tree/main/packages/cli"><code>zapier-platform-cli</code></a> is the code that powers the <code>zapier</code> command. You use it most commonly with the <code>test</code>, <code>scaffold</code>, and <code>push</code> commands. It&apos;s installed with <code>npm install -g zapier-platform-cli</code> and does not correspond to a particular app.</li>
<li><a href="https://github.com/zapier/zapier-platform/tree/main/packages/core"><code>zapier-platform-core</code></a> is what allows your app to interact with Zapier. It holds the <code>z</code> object and app tester code. Your app depends on a specific version of <code>zapier-platform-core</code> in the <code>package.json</code> file. It&apos;s installed via <code>npm install</code> along with the rest of your app&apos;s dependencies.</li>
<li><a href="https://github.com/zapier/zapier-platform/tree/main/packages/schema"><code>zapier-platform-schema</code></a> enforces app structure behind the scenes. It&apos;s a dependency of <code>core</code>, so it will be installed automatically.</li>
</ul><p>To learn more about the structure of the code (especially if you&apos;re interested in contributing), check out the <code>ARCHITECTURE.md</code> file(s).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="updating-these-packages">Updating These Packages</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier platform and its tools are under active development. While you don&apos;t need to install every release, we release new versions because they are better than the last. We do our best to adhere to <a href="https://semver.org/">Semantic Versioning</a> wherein we won&apos;t break your code unless there&apos;s a <code>major</code> release. Otherwise, we&apos;re just fixing bugs (<code>patch</code>) and adding features (<code>minor</code>).</p><p>Broadly speaking, all releases will continue to work indefinitely. While you never <em>have</em> to upgrade your app&apos;s <code>zapier-platform-core</code> dependency, we recommend keeping an eye on the <a href="https://github.com/zapier/zapier-platform/blob/main/CHANGELOG.md">changelog</a> to see what new features and bug fixes are available.</p><p>For more info about which Node versions are supported, see <a href="#how-do-i-manually-set-the-nodejs-version-to-run-my-app-with">the faq</a>.</p><p>The most recently released version of <code>cli</code> and <code>core</code> is <strong>14.0.1</strong>. You can see the versions you&apos;re working with by running <code>zapier -v</code>.</p><p>To update <code>cli</code>, run <code>npm install -g zapier-platform-cli</code>.</p><p>To update the version of <code>core</code> your app depends on, set the <code>zapier-platform-core</code> dependency in your <code>package.json</code> to a version listed <a href="https://www.npmjs.com/package/zapier-platform-core?activeTab=versions">here</a> and reinstall your dependencies (either <code>yarn</code> or <code>npm install</code>).</p><p>For maximum compatibility, keep the versions of <code>cli</code> and <code>core</code> in sync.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="get-help">Get Help!</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can get help by either emailing <a href="mailto:`partners@zapier.com">`partners@zapier.com</a>` or by <a href="https://community.zapier.com/developer-discussion-13">joining our developer community here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <hr>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="developing-on-the-cli">Developing on the CLI</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>See <a href="https://github.com/zapier/zapier-platform/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div>
    </div>

    <script type="text/javascript" src="./lib/lodash.custom.min.js"></script>
    <script type="text/javascript" src="./docs.js"></script>

  </body>
</html>
